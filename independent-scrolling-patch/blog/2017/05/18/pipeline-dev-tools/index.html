<!DOCTYPE html>
<html lang="en">
<head>
<title>
Pipeline Development Tools
</title>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<meta content="Jenkins – an open source automation server which enables developers around the world to reliably build, test, and deploy their software" name="description">
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
<meta content="ie=edge" http-equiv="x-ua-compatible">
<link href="https://Vandit1604.github.io/jenkins.io/independent-scrolling-patch/blog/2017/05/18/pipeline-dev-tools/" rel="canonical">
<!-- Favicons -->
<link href="/favicon.ico" rel="shortcut icon" type="image/x-icon">
<link href="/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180">
<link href="/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png">
<link href="/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png">
<link href="/site.webmanifest" rel="manifest">
<link color="#5bbad5" href="/safari-pinned-tab.svg" rel="mask-icon">
<meta content="#2b5797" name="msapplication-TileColor">
<meta content="#ffffff" name="theme-color">
<meta content="Pipeline Development Tools" name="apple-mobile-web-app-title">
<!-- Twitter Card data -->
<meta content="summary_large_image" name="twitter:card">
<meta content="@JenkinsCI" name="twitter:site">
<meta content="Pipeline Development Tools" name="twitter:title">
<meta content="Jenkins – an open source automation server which enables developers around the world to reliably build, test, and deploy their software" name="twitter:description">
<meta content="@JenkinsCI" name="twitter:creator">
<!-- Twitter Summary card images must be at least 120x120px -->
<meta content="/jenkins.io/independent-scrolling-patch/images/logo-title-opengraph.png" name="twitter:image">
<!-- Open Graph data -->
<meta content="Pipeline Development Tools" property="og:title">
<meta content="article" property="og:type">
<meta content="https://Vandit1604.github.io/jenkins.io/independent-scrolling-patch/blog/2017/05/18/pipeline-dev-tools/" property="og:url">
<meta content="Jenkins – an open source automation server which enables developers around the world to reliably build, test, and deploy their software" name="og:description">
<meta content="Pipeline Development Tools" property="og:site_name">
<meta content="/jenkins.io/independent-scrolling-patch/images/logo-title-opengraph.png" name="og:image">
<link href="/jenkins.io/independent-scrolling-patch/assets/bower/bootstrap/css/bootstrap.min.css" media="screen" rel="stylesheet">
<link href="/jenkins.io/independent-scrolling-patch/css/jenkins.css" media="screen" rel="stylesheet">
<link href="/jenkins.io/independent-scrolling-patch/stylesheets/styles.css" media="screen" rel="stylesheet">
<!-- Non-obtrusive CSS styles -->
<link href="/jenkins.io/independent-scrolling-patch/css/footer.css" media="screen" rel="stylesheet">
<link href="/jenkins.io/independent-scrolling-patch/css/font-awesome.min.css" media="screen" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/@docsearch/css@3" rel="stylesheet">
</head>
<body>
<script src="/jenkins.io/independent-scrolling-patch/assets/bower/jquery/jquery.min.js"></script>
<!-- starting partial toptoolbar.html.haml -->
<jio-navbar class="fixed-top" id="ji-toolbar" property="https://www.jenkins.io" showSearchBox=""></jio-navbar>
<!-- Spacing to make the fixed-top sticky navbar not occlude any content below it -->
<div class="pt-4">
&nbsp;
</div>

<!-- ending partial toptoolbar.html.haml -->
<!-- starting partial anchors.html.haml -->
<script>
  window.addEventListener('DOMContentLoaded', function () {
    for (var i = 1 ; i <= 6 ; i ++) {
      anchors.add('.app-post-page h' + i);
    }
  })
</script>

<!-- ending partial anchors.html.haml -->
<article class="container app-post-page">
<div class="app-!-display-flex">
<a class="app-back-link" href="/jenkins.io/independent-scrolling-patch/node/">
Back to blog
</a>
</div>
<h1>
Pipeline Development Tools
</h1>
<div class="post-attrs">
<a class="app-author-link" href="/blog/authors/lnewman/"><div class="app-avatar"><img alt="Liam Newman" class="app-avatar__image" src="/images/avatars/lnewman.jpeg"></div> Liam Newman</a>
May 18, 2017
<a class="twitter-share-button" data-lang="en" href="https://twitter.com/intent/tweet?text=Pipeline+Development+Tools&amp;url=https%3A%2F%2Fwww.jenkins.io%2Fjenkins.io%2Findependent-scrolling-patch%2Fblog%2F2017%2F05%2F18%2Fpipeline-dev-tools%2F" rel="noreferrer nofollow" target="_blank">
Tweet
</a>
</div>
<div class="blog-content">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This is a guest post by <a href="https://github.com/bitwiseman">Liam Newman</a>,
Technical Evangelist at <a href="https://cloudbees.com">CloudBees</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>I&#8217;ve only been working with Pipeline for about a year.
Pipeline in and of itself has been a huge improvement over old-style Jenkins projects.
As a developer, it has been so great be able work with Jenkins Pipelines
using the same tools I use for writing any other kind of code.</p>
</div>
<div class="paragraph">
<p>I&#8217;ve also found a number of tools that are super helpful specifically
for developing pipelines. Some were easy to find like the
<a href="/doc/book/pipeline/getting-started#built-in-documentation">built-in documentation</a>
and the
<a href="/doc/book/pipeline/getting-started#snippet-generator">Snippet Generator</a>.
Others were not as obvious or were only recently released.
In this post, I&#8217;ll show how a few of those tools make working with Pipelines
even better.</p>
</div>
<div class="sect1">
<h2 id="the-blue-ocean-pipeline-editor"><a class="anchor" href="#the-blue-ocean-pipeline-editor"></a>The Blue Ocean Pipeline Editor</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The best way to start this list is with the most recent and coolest
arrival in this space: the Blue Ocean Pipeline Editor.  The editor only works
with Declarative Pipelines, but it brings a sleek new user experience to writing
Pipelines.  My recent screencast, released as part of the Blue Ocean Launch,
gives good sense of how useful the editor is:</p>
</div>
<div class="videoblock">
<div class="content">
<iframe width="852" height="480" src="https://www.youtube.com/embed/5Nct-jrZBbM?rel=0" frameborder="0" allowfullscreen></iframe>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="command-line-pipeline-linter"><a class="anchor" href="#command-line-pipeline-linter"></a>Command-line Pipeline Linter</h2>
<div class="sectionbody">
<div class="paragraph">
<p>One of the neat features of the Blue Ocean Pipeline Editor is that it does basic
validation on our Declarative Pipelines before they are even committed or Run.
This feature is based on the
<a href="/doc/book/pipeline/development#linter">Declarative Pipeline Linter</a>
which can be accessed from the command-line even if you don&#8217;t have Blue Ocean
installed.</p>
</div>
<div class="paragraph">
<p>When I was working on the
<a href="/blog/2017/02/10/declarative-html-publisher">Declarative Pipeline: Publishing HTML Reports</a>
blog post, I was still learning the declarative syntax and I made a lot lot of mistakes.
Getting quick feedback about the whether my Pipeline was in a sane state made writing that blog much easier.
I wrote a simple shell script that would run my Jenkinsfile through the Declarative Pipeline Linter.</p>
</div>
<div class="listingblock">
<div class="title">pipelint.sh - Linting via HTTP POST using <code>curl</code></div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash"><span class="c"># curl (REST API)</span>
<span class="c"># User</span>
<span class="nv">JENKINS_USER</span><span class="o">=</span>bitwisenote-jenkins1

<span class="c"># Api key from "/me/configure" on my Jenkins instance</span>
<span class="nv">JENKINS_USER_KEY</span><span class="o">=</span><span class="nt">--my</span> secret, get your own--

<span class="c"># Url for my local Jenkins instance.</span>
<span class="nv">JENKINS_URL</span><span class="o">=</span>http://<span class="nv">$JENKINS_USER</span>:<span class="nv">$JENKINS_USER_KEY</span>@localhost:32769 <i class="conum" data-value="1"></i><b>(1)</b>

<span class="c"># JENKINS_CRUMB is needed if your Jenkins controller has CRSF protection enabled (which it should)</span>
<span class="nv">JENKINS_CRUMB</span><span class="o">=</span><span class="sb">`</span>curl <span class="s2">"</span><span class="nv">$JENKINS_URL</span><span class="s2">/crumbIssuer/api/xml?xpath=concat(//crumbRequestField,</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">,//crumb)"</span><span class="sb">`</span>
curl <span class="nt">-X</span> POST <span class="nt">-H</span> <span class="nv">$JENKINS_CRUMB</span> <span class="nt">-F</span> <span class="s2">"jenkinsfile=&lt;Jenkinsfile"</span> <span class="nv">$JENKINS_URL</span>/pipeline-model-converter/validate</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This is not secure.  I&#8217;m running this locally only.
See <a href="/doc/book/managing/cli">Jenkins CLI</a> for details on how to do this securely.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>With this script, I was able to find the error in this this Pipeline without
having to take the time to run it in Jenkins: (Can you spot the mistake?)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="groovy"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
</pre></td><td class="code"><pre><span class="err">#</span><span class="o">!</span><span class="n">groovy</span>

<span class="n">pipeline</span> <span class="o">{</span>
  <span class="n">agent</span> <span class="n">any</span>

  <span class="n">options</span> <span class="o">{</span>
    <span class="c1">// Only keep the 10 most recent builds</span>
    <span class="n">buildDiscarder</span><span class="o">(</span><span class="n">logRotator</span><span class="o">(</span><span class="nl">numToKeepStr:</span><span class="s1">'10'</span><span class="o">))</span>
  <span class="o">}</span>
  <span class="n">stages</span> <span class="o">{</span>
    <span class="n">stage</span> <span class="o">(</span><span class="s1">'Install'</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">steps</span> <span class="o">{</span>
        <span class="c1">// install required bundles</span>
        <span class="n">sh</span> <span class="s1">'bundle install'</span>
      <span class="o">}</span>
    <span class="o">}</span>
    <span class="n">stage</span> <span class="o">(</span><span class="s1">'Build'</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">steps</span> <span class="o">{</span>
        <span class="c1">// build</span>
        <span class="n">sh</span> <span class="s1">'bundle exec rake build'</span>
      <span class="o">}</span>

      <span class="n">post</span> <span class="o">{</span>
        <span class="n">success</span> <span class="o">{</span>
          <span class="c1">// Archive the built artifacts</span>
          <span class="n">archive</span> <span class="nl">includes:</span> <span class="s1">'pkg/*.gem'</span>
        <span class="o">}</span>
      <span class="o">}</span>
    <span class="o">}</span>
    <span class="n">stage</span> <span class="o">(</span><span class="s1">'Test'</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">step</span> <span class="o">{</span>
        <span class="c1">// run tests with coverage</span>
        <span class="n">sh</span> <span class="s1">'bundle exec rake spec'</span>
      <span class="o">}</span>

      <span class="n">post</span> <span class="o">{</span>
        <span class="n">success</span> <span class="o">{</span>
          <span class="c1">// publish html</span>
          <span class="n">publishHTML</span> <span class="nl">target:</span> <span class="o">[</span>
              <span class="nl">allowMissing:</span> <span class="kc">false</span><span class="o">,</span>
              <span class="nl">alwaysLinkToLastBuild:</span> <span class="kc">false</span><span class="o">,</span>
              <span class="nl">keepAll:</span> <span class="kc">true</span><span class="o">,</span>
              <span class="nl">reportDir:</span> <span class="s1">'coverage'</span><span class="o">,</span>
              <span class="nl">reportFiles:</span> <span class="s1">'index.html'</span><span class="o">,</span>
              <span class="nl">reportName:</span> <span class="s1">'RCov Report'</span>
            <span class="o">]</span>
        <span class="o">}</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>
  <span class="n">post</span> <span class="o">{</span>
    <span class="n">always</span> <span class="o">{</span>
      <span class="n">echo</span> <span class="s2">"Send notifications for result: ${currentBuild.result}"</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>When I ran my <code>pipelint.sh</code> script on this pipeline it reported this error:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code>$ pipelint.sh
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100    46  100    46    0     0   3831      0 --:--:-- --:--:-- --:--:--  4181
Errors encountered validating Jenkinsfile:
WorkflowScript: 30: Unknown stage section "step". Starting with version 0.5, steps in a stage must be in a steps block. @ line 30, column 5.
       stage ('Test') {
       ^

WorkflowScript: 30: Nothing to execute within stage "Test" @ line 34, column 5.
       stage ('Test') {
       ^</code></pre>
</div>
</div>
<div class="paragraph">
<p>Doh. I forgot the "s" on <code>steps</code> on line 35. Once I added the "s" and ran
<code>pipelint.sh</code> again, I got an all clear.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code>$ pipelint.sh
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100    46  100    46    0     0   5610      0 --:--:-- --:--:-- --:--:--  5750
Jenkinsfile successfully validated.</code></pre>
</div>
</div>
<div class="paragraph">
<p>This didn&#8217;t mean there weren&#8217;t other errors, but for a two second smoke test I&#8217;ll take it.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="replay"><a class="anchor" href="#replay"></a>Replay</h2>
<div class="sectionbody">
<div class="paragraph">
<p>I love being able to use source control to track changes to my Pipelines
right alongside the rest of the code in a project.  There are also times,
when prototyping or debugging, that I need to iterate quickly on a series
of possible Pipeline changes.
The Replay feature let&#8217;s me do that and see the results,
without committing those changes to source control.</p>
</div>
<div class="paragraph">
<p>When I wanted to take the previous Pipeline from <code>agent any</code> to using Docker via
the <code>docker { &#8230;&#8203; }</code> directive, I used the Replay feature to test it out:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Selected the previously completed run in the build history</p>
<div class="imageblock">
<div class="content">
<img src="/doc/book/resources/pipeline/replay-previous-run.png" alt="Previous Pipeline Run">
</div>
</div>
</li>
<li>
<p>Clicked "Replay" in the left menu</p>
<div class="imageblock">
<div class="content">
<img src="/doc/book/resources/pipeline/replay-left-bar.png" alt="Replay Left-menu Button">
</div>
</div>
</li>
<li>
<p>Made modifications and click "Run". In this example, I replaced <code>any</code> with the <code>docker { &#8230;&#8203; }</code> directive.</p>
<div class="imageblock">
<div class="content">
<img src="/doc/book/resources/pipeline/replay-modified.png" alt="Replay Left-menu Button">
</div>
</div>
</li>
<li>
<p>Checked the results of changes looked good.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Once I worked any bugs out of my Pipeline,
I used Replay to view the Pipeline for the last run and copy it back to my
<code>Jenkinsfile</code> and create a commit for that change.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="conclusion"><a class="anchor" href="#conclusion"></a>Conclusion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is far from a complete list of the tools out there for working with Pipeline.
There are many more and the number is growing.
For example, one tool  I just recently heard about and haven&#8217;t had a chance to delve into
is the
<a href="https://github.com/lesfurets/JenkinsPipelineUnit">Pipeline Unit Testing Framework</a>,
which promises the ability to test Pipelines before running them.
It&#8217;s been a fun year and I can&#8217;t wait to see what the next year holds for Pipeline.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>How do you work with Pipeline?
Do you have a tool that you feel has greatly improved your development experience
with Pipeline?  I&#8217;m interested in hear about others Jenkins user&#8217;s favorite ways
of working with Pipeline.  Drop me a line via
<a href="mail:bitwiseman@gmail.com">email</a> or on the
<a href="https://webchat.freenode.net/?channels=jenkins">#jenkins</a> IRC channel.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<ul class="app-tags">
<li>
<a class="app-tags__tag" href="/jenkins.io/independent-scrolling-patch/node/tags/blueocean/">
blueocean
</a>
</li>
<li>
<a class="app-tags__tag" href="/jenkins.io/independent-scrolling-patch/node/tags/pipeline/">
pipeline
</a>
</li>
<li>
<a class="app-tags__tag" href="/jenkins.io/independent-scrolling-patch/node/tags/tutorial/">
tutorial
</a>
</li>
</ul>
<h2>
About the author
</h2>
<!-- starting partial author.html.haml -->
<div class="app-author" id="about-the-author">
<!-- starting partial avatar.html.haml -->
<div class="app-avatar" style="min-width: 64px; width: 25vw; max-width: 128px">
<img alt="Liam Newman" class="app-avatar__image" src="/jenkins.io/independent-scrolling-patch/images/avatars/lnewman.jpeg">
</div>

<!-- ending partial avatar.html.haml -->
<div class="app-author__content">
<p class="app-author__name">
<a href="/blog/authors/lnewman/">
Liam Newman
</a>
</p>
<div class="paragraph">
<p>Liam started his software career as a tester, which might explain why he&#8217;s such a fan of CI/CD and Pipeline as Code.
He has spent the majority of his software engineering career implementing Continuous Integration systems at companies big and small.
He is a Jenkins project contributor and an expert in Jenkins Pipeline, both Scripted and Declarative.
Liam currently works as a Jenkins Evangelist at <a href="https://cloudbees.com">CloudBees</a>.
When not at work, he enjoys testing gravity by doing Aikido.</p>
</div>
<!-- starting partial social-media-buttons.html.haml -->
<ul class="app-social-media-buttons">
<li>
<a href="https://github.com/bitwiseman" rel="noreferrer noopener" target="_blank">
GitHub
</a>
</li>
<li>
<a href="https://twitter.com/bitwiseman" rel="noreferrer noopener" target="_blank">
Twitter
</a>
</li>
</ul>

<!-- ending partial social-media-buttons.html.haml -->
</div>
</div>

<!-- ending partial author.html.haml -->
<!-- starting partial discuss.html.haml -->

<!-- ending partial discuss.html.haml -->
</article>


<script src="/jenkins.io/independent-scrolling-patch/assets/bower/anchor-js/anchor.min.js"></script>
<script src="/jenkins.io/independent-scrolling-patch/assets/bower/@popperjs/core/umd/popper.min.js"></script>
<script src="/jenkins.io/independent-scrolling-patch/assets/bower/bootstrap/js/bootstrap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/lit@2.5.0/polyfill-support.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@webcomponents/webcomponentsjs@2.6.0/webcomponents-loader.js"></script>
<script data="ionicons" defer="" src="https://cdnjs.cloudflare.com/ajax/libs/ionicons/5.5.2/ionicons/ionicons.esm.js" type="module"></script>
<script data="ionicons" defer="" nomodule="" src="https://cdnjs.cloudflare.com/ajax/libs/ionicons/5.5.2/ionicons/ionicons.js"></script>
<script defer="" src="https://cdn.jsdelivr.net/npm/@jenkinsci/jenkins-io-components/+esm" type="module"></script>
<script defer="" nomodule="" src="https://cdn.jsdelivr.net/npm/@jenkinsci/jenkins-io-components/"></script>
<jio-footer githubBranch="master" githubRepo="jenkins-infra/jenkins.io" property="https://www.jenkins.io" sourcePath="content//blog/2017/05/2017-05-18-pipeline-dev-tools.adoc"></jio-footer>
<script>
 (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
 
ga('create', 'UA-000000-0', 'auto');
ga('send', 'pageview');
ga('set', 'anonymizeIp', true);

</script>

<script>
  $(function(){
    var $body = $(document.body);
    $body.on("keydown", function(){
      $body.removeClass("no-outline");
    })
  })
</script>
<script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3" type="text/javascript"></script>
<script type="text/javascript">
docsearch({
  container: document.querySelector('input.searchbox').parentNode,
  indexName: 'jenkins',
  appId: "M6L7Q4Z8HS",
  apiKey: "52f8dfbff76ffd9106f1c68fee16154b",
  algoliaOptions: { 'facetFilters': ["tags:en"] },
  debug: false
});
</script>
</body>
</html>
