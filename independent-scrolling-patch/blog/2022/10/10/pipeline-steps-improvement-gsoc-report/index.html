<!DOCTYPE html>
<html lang="en">
<head>
<title>
Pipeline Steps Documentation Generator Improvements
</title>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<meta content="Jenkins – an open source automation server which enables developers around the world to reliably build, test, and deploy their software" name="description">
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
<meta content="ie=edge" http-equiv="x-ua-compatible">
<link href="https://Vandit1604.github.io/jenkins.io/independent-scrolling-patch/blog/2022/10/10/pipeline-steps-improvement-gsoc-report/" rel="canonical">
<!-- Favicons -->
<link href="/favicon.ico" rel="shortcut icon" type="image/x-icon">
<link href="/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180">
<link href="/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png">
<link href="/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png">
<link href="/site.webmanifest" rel="manifest">
<link color="#5bbad5" href="/safari-pinned-tab.svg" rel="mask-icon">
<meta content="#2b5797" name="msapplication-TileColor">
<meta content="#ffffff" name="theme-color">
<meta content="Pipeline Steps Documentation Generator Improvements" name="apple-mobile-web-app-title">
<!-- Twitter Card data -->
<meta content="summary_large_image" name="twitter:card">
<meta content="@JenkinsCI" name="twitter:site">
<meta content="Pipeline Steps Documentation Generator Improvements" name="twitter:title">
<meta content="Jenkins – an open source automation server which enables developers around the world to reliably build, test, and deploy their software" name="twitter:description">
<meta content="@JenkinsCI" name="twitter:creator">
<!-- Twitter Summary card images must be at least 120x120px -->
<meta content="/jenkins.io/independent-scrolling-patch/images/logo-title-opengraph.png" name="twitter:image">
<!-- Open Graph data -->
<meta content="Pipeline Steps Documentation Generator Improvements" property="og:title">
<meta content="article" property="og:type">
<meta content="https://Vandit1604.github.io/jenkins.io/independent-scrolling-patch/blog/2022/10/10/pipeline-steps-improvement-gsoc-report/" property="og:url">
<meta content="Jenkins – an open source automation server which enables developers around the world to reliably build, test, and deploy their software" name="og:description">
<meta content="Pipeline Steps Documentation Generator Improvements" property="og:site_name">
<meta content="/jenkins.io/independent-scrolling-patch/images/logo-title-opengraph.png" name="og:image">
<link href="/jenkins.io/independent-scrolling-patch/assets/bower/bootstrap/css/bootstrap.min.css" media="screen" rel="stylesheet">
<link href="/jenkins.io/independent-scrolling-patch/css/jenkins.css" media="screen" rel="stylesheet">
<link href="/jenkins.io/independent-scrolling-patch/stylesheets/styles.css" media="screen" rel="stylesheet">
<!-- Non-obtrusive CSS styles -->
<link href="/jenkins.io/independent-scrolling-patch/css/footer.css" media="screen" rel="stylesheet">
<link href="/jenkins.io/independent-scrolling-patch/css/font-awesome.min.css" media="screen" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/@docsearch/css@3" rel="stylesheet">
</head>
<body>
<script src="/jenkins.io/independent-scrolling-patch/assets/bower/jquery/jquery.min.js"></script>
<!-- starting partial toptoolbar.html.haml -->
<jio-navbar class="fixed-top" id="ji-toolbar" property="https://www.jenkins.io" showSearchBox=""></jio-navbar>
<!-- Spacing to make the fixed-top sticky navbar not occlude any content below it -->
<div class="pt-4">
&nbsp;
</div>

<!-- ending partial toptoolbar.html.haml -->
<!-- starting partial anchors.html.haml -->
<script>
  window.addEventListener('DOMContentLoaded', function () {
    for (var i = 1 ; i <= 6 ; i ++) {
      anchors.add('.app-post-page h' + i);
    }
  })
</script>

<!-- ending partial anchors.html.haml -->
<article class="container app-post-page">
<div class="app-!-display-flex">
<a class="app-back-link" href="/jenkins.io/independent-scrolling-patch/node/">
Back to blog
</a>
</div>
<h1>
Pipeline Steps Documentation Generator Improvements
</h1>
<div class="post-attrs">
<a class="app-author-link" href="/blog/authors/vihaanthora/"><div class="app-avatar"><img alt="Vihaan Thora" class="app-avatar__image" src="/images/avatars/vihaanthora.jpg"></div> Vihaan Thora</a>
October 10, 2022
<a class="twitter-share-button" data-lang="en" href="https://twitter.com/intent/tweet?text=Pipeline+Steps+Documentation+Generator+Improvements&amp;url=https%3A%2F%2Fwww.jenkins.io%2Fjenkins.io%2Findependent-scrolling-patch%2Fblog%2F2022%2F10%2F10%2Fpipeline-steps-improvement-gsoc-report%2F" rel="noreferrer nofollow" target="_blank">
Tweet
</a>
</div>
<div class="blog-content">
<div class="sect1">
<h2 id="about"><a class="anchor" href="#about"></a>About</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="/projects/gsoc/2022/projects/pipeline-step-documentation-generator/">Pipeline Steps Documentation Generator Improvements</a> is a project under Google Summer of Code 2022, and this project aims to improve the steps documentation generated for Pipeline jobs, which is used by thousands of Pipeline developers worldwide.</p>
</div>
<div class="paragraph">
<p>Some initial parts of the project involved changes to the UI of the website.
I spent most of the community bonding period thinking about possible improvements, understanding the code base (for jenkins.io and pipeline-steps-doc-generator), and creating website wireframes that can be shared with the community.
This phase helped me communicate with my mentors and plan my project out, at least to a level where I could distinguish tasks for the two coding phases.
I created an <a href="https://issues.jenkins.io/browse/JENKINS-68650">epic</a> to generate and maintain tickets. Below is a summary of the two coding phases.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="coding-phase-i"><a class="anchor" href="#coding-phase-i"></a>Coding Phase - I</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><strong>Updating sidebar scrolling for Jenkins documentation</strong> (<a href="https://issues.jenkins.io/browse/WEBSITE-799">ticket</a>) -
The sidebar required independent scrolling from the main content to improve the navigation on longer pages.</p>
</li>
<li>
<p><strong>Listing plugins on Pipeline Steps Reference</strong> (<a href="https://issues.jenkins.io/browse/WEBSITE-803">ticket</a>) -
I had included this idea in my proposal, but seeing the outcome, we decided that this does not add much value to the steps documentation for the users.
This gave rise to the idea of adding a search filter instead. See the discussion in this <a href="https://github.com/jenkins-infra/jenkins.io/pull/5245">PR</a>.</p>
</li>
<li>
<p><strong>Adding search filter</strong> (<a href="https://issues.jenkins.io/browse/WEBSITE-807">ticket</a>) -
There are more than 1500 steps listed on the Pipeline Steps Reference page, and filtering them becomes a much required feature for the users.
With this change, users can now type in any string, and the content of the page is changed dynamically according to the input.</p>
</li>
<li>
<p><strong>Separating declarative steps generation from main class</strong> (<a href="https://issues.jenkins.io/browse/JENKINS-68811">ticket</a>) -
A small but helpful change was to separate all the functions that generate declarative Pipeline steps from the main (<code>PipelineStepExtractor</code>) class.
This would not only make the main class more readable but also isolate the specific functions related to declarative steps, making the code more modular.</p>
</li>
<li>
<p><strong>Shifting parameter data types</strong> (<a href="https://issues.jenkins.io/browse/WEBSITE-801">ticket</a>) -
This was an initiative to reduce the overall length of each plugin page listed on Pipeline Steps Reference.
The idea was to move the parameter data type (an essential piece of information regarding a step&#8217;s parameter that a user might want to know) from the bottom of the help text to inline with the name of the parameter/property.</p>
</li>
<li>
<p><strong>Releasing pipeline-metadata-utils</strong> (<a href="https://issues.jenkins.io/browse/WEBSITE-806">ticket</a>) -
<code>pipeline-metadata-utils</code> is a tool that can be imported onto a project as a maven dependency. It provides a <code>HyperLocalPluginManager</code> that can be used to query plugins and build documentation with its help. My work involved updating and refining the code base and writing tests for the same. The released artifact is available in the Jenkins <a href="https://repo.jenkins-ci.org/ui/repos/tree/General/releases/org/jenkins-ci/infra/pipeline-metadata-utils">artifact repository</a>.</p>
</li>
<li>
<p><strong>Midterm Meetup</strong></p>
<div class="ulist">
<ul>
<li>
<p><a href="https://docs.google.com/presentation/d/1t2vuNn1NFpDusnw0m4vdFw6WBQMeU6kccv_K1v2L6R0/edit#slide=id.g13dcaed2105_0_25">Slides</a></p>
</li>
<li>
<p>Presentation Recording -</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="videoblock">
<div class="content">
<iframe width="800" height="420" src="https://www.youtube.com/embed/loLSNdCv6K4?rel=0&amp;start=3154" frameborder="0" allowfullscreen></iframe>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="coding-phase-ii"><a class="anchor" href="#coding-phase-ii"></a>Coding Phase - II</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><strong>Label deprecated plugins</strong> (<a href="https://issues.jenkins.io/browse/WEBSITE-808">ticket</a>) -
Earlier, the only way to determine if a plugin was deprecated was to visit the plugin site.
This can be remediated by adding a label saying so on Pipeline Steps Reference itself.
In this way, users can also find all deprecated plugins that provide Pipeline steps by simply searching "(deprecated)" in the search filter provided.</p>
</li>
<li>
<p><strong>Separate configured parameter classes</strong> (<a href="https://issues.jenkins.io/browse/WEBSITE-809">ticket</a>) -</p>
<div class="ulist">
<ul>
<li>
<p>Many plugin pages included enormous amounts of documentation on a single page.</p>
</li>
<li>
<p>Currently, there are 625 plugins listed on Pipeline Steps Reference. The total size of the Asciidocs that hold their respective documentation is around 16.7 MB. Out of these 625 plugins, 8 of them contribute to 85% of the total size of the Asciidocs.</p>
</li>
<li>
<p>There were many issues associated with this -</p>
<div class="ulist">
<ul>
<li>
<p><strong>Slow loading</strong> - some pages, such as <code>workflow-multibranch</code> took more than 15 to 20 seconds to load. This was due to the laggy action on javascript in collapsing the lists on the 4 MB large page.</p>
</li>
<li>
<p><strong>Difficult navigation</strong> - once the user expanded a parameter containing deeply nested documentation, it became tough to keep track of the hierarchy levels within the documentation (it&#8217;s not easy to eyeball indentation :P). The only possible way to get back to a legible starting point was to refresh the page, which was not a quick thing to do, as mentioned above.</p>
</li>
<li>
<p><strong>Redundant content</strong> - upon some investigation, it was found that there are several occurrences of redundant documentation. Redundant content is never good for any piece of documentation, and hence, this problem needed to be solved.</p>
</li>
</ul>
</div>
</li>
<li>
<p>This problem is solved with the help of configuration-based post-processing of the generated AsciiDocs. A file would contain a list of parameter classes that are then searched in all AsciiDocs and localized in a single document, one by one. This new document is then referenced by all the depending documents with the help of a hyperlink. The tasks done under this ticket were -</p>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Create Java class <code>ProcessAsciiDoc</code>.</p>
</li>
<li>
<p>Write tests and Javadoc comments for it.</p>
</li>
<li>
<p>Add instructions to use the configuration file in the README of <code>pipeline-steps-doc-generator</code>.</p>
</li>
<li>
<p>Add around 36 parameter classes to the configuration as a starting point.</p>
</li>
</ul>
</div>
</div>
</div>
</li>
<li>
<p>The results obtained after running the processing layer with the initial configuration file were pretty encouraging. More than <strong>2 MBs of redundancy</strong> was removed, and the new size of the AsciiDocs is around 14.4 MBs.</p>
</li>
<li>
<p>The larger pages saw a significant drop in size -</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Previous Size (in KBs)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">New Size (in KBs)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">workflow-multibranch</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4967</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">688</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pipeline-groovy-lib</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2267</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">564</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">workflow-scm-step</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">373</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">96</p></td>
</tr>
</tbody>
</table>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Final Meetup</strong></p>
<div class="ulist">
<ul>
<li>
<p><a href="https://docs.google.com/presentation/d/1fswNO3qyeq7iwe9UWK2dWTBncTarSdujwqXWMgYKjIU/edit?usp=sharing">Slides</a></p>
</li>
<li>
<p>Presentation Recording -</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="videoblock">
<div class="content">
<iframe width="800" height="420" src="https://www.youtube.com/embed/fM2SMbppRxw?rel=0&amp;start=2193" frameborder="0" allowfullscreen></iframe>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="future-scope"><a class="anchor" href="#future-scope"></a>Future Scope</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Identify the plugin that a particular parameter class belongs to.
This can be done by manipulating the getPluginNameFromDescriptor method supplied by <code>pipeline-metadata-utils`</code> such that it takes the class name and returns the plugin name corresponding to that.</p>
</li>
<li>
<p>Reduce the manual work required to configure the parameters and make the processing layer more robust towards inconsistencies.</p>
</li>
<li>
<p>Improve the time complexity associated with running the processing layer.</p>
</li>
<li>
<p><strong>Possible future GSoC goal</strong> - Integrate the snippet generator with jenkins.io.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="acknowledgements-and-insights"><a class="anchor" href="#acknowledgements-and-insights"></a>Acknowledgements and Insights</h2>
<div class="sectionbody">
<div class="paragraph">
<p>I am grateful to my mentor, Kristin, and the community at <a href="https://gitter.im/jenkinsci/docs">docs-sig</a>. Their support was essential in making this project successful. I got consistent ideas and feedback from them throughout the project&#8217;s tenure.
Here are some tips for new contributors who wish to participate in GSoC at Jenkins.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Make sure you ask your queries in the right channel. This will maximize the chances of an accurate and fast reply.</p>
</li>
<li>
<p>Don&#8217;t rely on others to solve every error you get. Try to figure it out yourself, and after an honest attempt, mention your query on the channel and all that you have tried.</p>
</li>
<li>
<p>Attend office hours regularly as soon as they begin for the next edition of GSoC. They are a great way to communicate with the mentors and understand the project idea.</p>
</li>
<li>
<p>Draft your proposal as soon as possible and gather feedback to maximize your chance of getting accepted. Make sure you add value to the original idea and include some implementation details in the proposal.<br></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="project-specific-guidance"><a class="anchor" href="#project-specific-guidance"></a>Project-specific guidance</h3>
<div class="ulist">
<ul>
<li>
<p>After the separation of <code>pipeline-metadata-utils</code>, the code has become more abstract and relatively straightforward to dive into for newer contributors. You need not understand everything to start making changes to the code.</p>
</li>
<li>
<p><code>PipelineStepExtractor</code> is the main class responsible for initializing the reactor in which the mock Jenkins instance is set up. It then uses the <code>HyperLocalPluginManager</code> to query the plugins and return all the information as a Java map.</p>
</li>
<li>
<p><code>ToAsciiDoc</code> is responsible for formatting the Java map as an AsciiDoc and contains several functions to handle the different sections in a plugin page. Hence, if your goal is to change the presentation of the documentation while keeping the content static, you will probably need to make changes in this class only.</p>
</li>
<li>
<p><code>ProcessAsciiDoc</code> is a string algorithm-based class responsible for matching the configuration keywords to their occurrences in the produced AsciiDocs. It currently follows a brute-force approach and is not very immune to complex configurations. Hence, there is a lot of scope for improvement in this class. If you want to improve something, feel free to tag my GitHub handle (<code>@vihaanthora</code>) in the issue/pull request you create.</p>
</li>
<li>
<p>The other classes will not require change unless a particular requirement arises.</p>
</li>
<li>
<p>Try to find bugs in the generated documentation by browsing through random AsciiDocs under Pipeline Steps Reference and create an issue on the project&#8217;s GitHub repository. If you want to seek clarification about some anomaly, you can write a brief description about it on the docs-sig gitter channel, and we&#8217;ll try to respond whenever possible.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can find all the important links on the <a href="/projects/gsoc/2022/projects/pipeline-step-documentation-generator/">project page</a>.</p>
</div>
</div>
</div>
</div>
</div>
<ul class="app-tags">
<li>
<a class="app-tags__tag" href="/jenkins.io/independent-scrolling-patch/node/tags/gsoc/">
gsoc
</a>
</li>
<li>
<a class="app-tags__tag" href="/jenkins.io/independent-scrolling-patch/node/tags/gsoc2022/">
gsoc2022
</a>
</li>
<li>
<a class="app-tags__tag" href="/jenkins.io/independent-scrolling-patch/node/tags/pipeline/">
pipeline
</a>
</li>
<li>
<a class="app-tags__tag" href="/jenkins.io/independent-scrolling-patch/node/tags/steps/">
steps
</a>
</li>
<li>
<a class="app-tags__tag" href="/jenkins.io/independent-scrolling-patch/node/tags/layout/">
layout
</a>
</li>
<li>
<a class="app-tags__tag" href="/jenkins.io/independent-scrolling-patch/node/tags/documentation/">
documentation
</a>
</li>
</ul>
<h2>
About the author
</h2>
<!-- starting partial author.html.haml -->
<div class="app-author" id="about-the-author">
<!-- starting partial avatar.html.haml -->
<div class="app-avatar" style="min-width: 64px; width: 25vw; max-width: 128px">
<img alt="Vihaan Thora" class="app-avatar__image" src="/jenkins.io/independent-scrolling-patch/images/avatars/vihaanthora.jpg">
</div>

<!-- ending partial avatar.html.haml -->
<div class="app-author__content">
<p class="app-author__name">
<a href="/blog/authors/vihaanthora/">
Vihaan Thora
</a>
</p>
<div class="paragraph">
<p>Google Summer of Code 2022 contributor at Jenkins.
Interested in learning new things through cool projects.
Passionate about music and art.</p>
</div>
<!-- starting partial social-media-buttons.html.haml -->
<ul class="app-social-media-buttons">
<li>
<a href="https://github.com/vihaanthora" rel="noreferrer noopener" target="_blank">
GitHub
</a>
</li>
<li>
<a href="https://www.linkedin.com/in/vihaanthora" rel="noreferrer noopener" target="_blank">
LinkedIn
</a>
</li>
</ul>

<!-- ending partial social-media-buttons.html.haml -->
</div>
</div>

<!-- ending partial author.html.haml -->
<!-- starting partial discuss.html.haml -->

<!-- ending partial discuss.html.haml -->
</article>


<script src="/jenkins.io/independent-scrolling-patch/assets/bower/anchor-js/anchor.min.js"></script>
<script src="/jenkins.io/independent-scrolling-patch/assets/bower/@popperjs/core/umd/popper.min.js"></script>
<script src="/jenkins.io/independent-scrolling-patch/assets/bower/bootstrap/js/bootstrap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/lit@2.5.0/polyfill-support.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@webcomponents/webcomponentsjs@2.6.0/webcomponents-loader.js"></script>
<script data="ionicons" defer="" src="https://cdnjs.cloudflare.com/ajax/libs/ionicons/5.5.2/ionicons/ionicons.esm.js" type="module"></script>
<script data="ionicons" defer="" nomodule="" src="https://cdnjs.cloudflare.com/ajax/libs/ionicons/5.5.2/ionicons/ionicons.js"></script>
<script defer="" src="https://cdn.jsdelivr.net/npm/@jenkinsci/jenkins-io-components/+esm" type="module"></script>
<script defer="" nomodule="" src="https://cdn.jsdelivr.net/npm/@jenkinsci/jenkins-io-components/"></script>
<jio-footer githubBranch="master" githubRepo="jenkins-infra/jenkins.io" property="https://www.jenkins.io" sourcePath="content//blog/2022/10/2022-10-10-pipeline-steps-improvement-gsoc-report.adoc"></jio-footer>
<script>
 (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
 
ga('create', 'UA-000000-0', 'auto');
ga('send', 'pageview');
ga('set', 'anonymizeIp', true);

</script>

<script>
  $(function(){
    var $body = $(document.body);
    $body.on("keydown", function(){
      $body.removeClass("no-outline");
    })
  })
</script>
<script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3" type="text/javascript"></script>
<script type="text/javascript">
docsearch({
  container: document.querySelector('input.searchbox').parentNode,
  indexName: 'jenkins',
  appId: "M6L7Q4Z8HS",
  apiKey: "52f8dfbff76ffd9106f1c68fee16154b",
  algoliaOptions: { 'facetFilters': ["tags:en"] },
  debug: false
});
</script>
</body>
</html>
