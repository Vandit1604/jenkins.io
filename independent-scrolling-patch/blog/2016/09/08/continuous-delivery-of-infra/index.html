<!DOCTYPE html>
<html lang="en">
<head>
<title>
Continuous Delivery of Infrastructure with Jenkins
</title>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<meta content="Jenkins – an open source automation server which enables developers around the world to reliably build, test, and deploy their software" name="description">
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
<meta content="ie=edge" http-equiv="x-ua-compatible">
<link href="https://Vandit1604.github.io/jenkins.io/independent-scrolling-patch/blog/2016/09/08/continuous-delivery-of-infra/" rel="canonical">
<!-- Favicons -->
<link href="/favicon.ico" rel="shortcut icon" type="image/x-icon">
<link href="/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180">
<link href="/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png">
<link href="/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png">
<link href="/site.webmanifest" rel="manifest">
<link color="#5bbad5" href="/safari-pinned-tab.svg" rel="mask-icon">
<meta content="#2b5797" name="msapplication-TileColor">
<meta content="#ffffff" name="theme-color">
<meta content="Continuous Delivery of Infrastructure with Jenkins" name="apple-mobile-web-app-title">
<!-- Twitter Card data -->
<meta content="summary_large_image" name="twitter:card">
<meta content="@JenkinsCI" name="twitter:site">
<meta content="Continuous Delivery of Infrastructure with Jenkins" name="twitter:title">
<meta content="Jenkins – an open source automation server which enables developers around the world to reliably build, test, and deploy their software" name="twitter:description">
<meta content="@JenkinsCI" name="twitter:creator">
<!-- Twitter Summary card images must be at least 120x120px -->
<meta content="/jenkins.io/independent-scrolling-patch/images/logo-title-opengraph.png" name="twitter:image">
<!-- Open Graph data -->
<meta content="Continuous Delivery of Infrastructure with Jenkins" property="og:title">
<meta content="article" property="og:type">
<meta content="https://Vandit1604.github.io/jenkins.io/independent-scrolling-patch/blog/2016/09/08/continuous-delivery-of-infra/" property="og:url">
<meta content="Jenkins – an open source automation server which enables developers around the world to reliably build, test, and deploy their software" name="og:description">
<meta content="Continuous Delivery of Infrastructure with Jenkins" property="og:site_name">
<meta content="/jenkins.io/independent-scrolling-patch/images/logo-title-opengraph.png" name="og:image">
<link href="/jenkins.io/independent-scrolling-patch/assets/bower/bootstrap/css/bootstrap.min.css" media="screen" rel="stylesheet">
<link href="/jenkins.io/independent-scrolling-patch/css/jenkins.css" media="screen" rel="stylesheet">
<link href="/jenkins.io/independent-scrolling-patch/stylesheets/styles.css" media="screen" rel="stylesheet">
<!-- Non-obtrusive CSS styles -->
<link href="/jenkins.io/independent-scrolling-patch/css/footer.css" media="screen" rel="stylesheet">
<link href="/jenkins.io/independent-scrolling-patch/css/font-awesome.min.css" media="screen" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/@docsearch/css@3" rel="stylesheet">
</head>
<body>
<script src="/jenkins.io/independent-scrolling-patch/assets/bower/jquery/jquery.min.js"></script>
<!-- starting partial toptoolbar.html.haml -->
<jio-navbar class="fixed-top" id="ji-toolbar" property="https://www.jenkins.io" showSearchBox=""></jio-navbar>
<!-- Spacing to make the fixed-top sticky navbar not occlude any content below it -->
<div class="pt-4">
&nbsp;
</div>

<!-- ending partial toptoolbar.html.haml -->
<!-- starting partial anchors.html.haml -->
<script>
  window.addEventListener('DOMContentLoaded', function () {
    for (var i = 1 ; i <= 6 ; i ++) {
      anchors.add('.app-post-page h' + i);
    }
  })
</script>

<!-- ending partial anchors.html.haml -->
<article class="container app-post-page">
<div class="app-!-display-flex">
<a class="app-back-link" href="/jenkins.io/independent-scrolling-patch/node/">
Back to blog
</a>
</div>
<h1>
Continuous Delivery of Infrastructure with Jenkins
</h1>
<div class="post-attrs">
<a class="app-author-link" href="/blog/authors/rtyler/"><div class="app-avatar"><img alt="R. Tyler Croy" class="app-avatar__image" src="/images/avatars/rtyler.jpeg"></div> R. Tyler Croy</a>
September 08, 2016
<a class="twitter-share-button" data-lang="en" href="https://twitter.com/intent/tweet?text=Continuous+Delivery+of+Infrastructure+with+Jenkins&amp;url=https%3A%2F%2Fwww.jenkins.io%2Fjenkins.io%2Findependent-scrolling-patch%2Fblog%2F2016%2F09%2F08%2Fcontinuous-delivery-of-infra%2F" rel="noreferrer nofollow" target="_blank">
Tweet
</a>
</div>
<div class="blog-content">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This is a guest post by Jenkins World speaker
<a href="https://github.com/rtyler">R Tyler Croy</a>, infrastructure maintainer for the
Jenkins project.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><span class="image right"><img src="/images/conferences/Jenkins-World_125x125.png" alt="Jenkins World"></span></p>
</div>
<div class="paragraph">
<p>I don&#8217;t think I have ever met a tools, infrastructure, or operations team that
did not have a ton of work to do. The Jenkins project&#8217;s
<a href="https://github.com/jenkins-infra">infrastructure</a>
"team" is no different; too much work, not enough time. In lieu of hiring more
people, which isn&#8217;t always an option, I have found heavy automation and
continuous delivery pipelines to be two solutions within reach of the
over-worked infrastructure team.</p>
</div>
<div class="paragraph">
<p>As a big believer in the concept of "Infrastructure as Code", I have been,
slowly but surely, moving the project&#8217;s infrastructure from manual tasks to
code, whether implemented in our
<a href="https://github.com/jenkins-infra/jenkins-infra">Puppet code-base</a>,
<a href="https://github.com/jenkins-infra/ircbot">Docker containers</a>,
or even as
<a href="https://github.com/jenkins-infra/azure/tree/master/machines">machine specifications</a>
with
<a href="https://packer.io">Packer</a>.
The more of our infrastructure that is <em>code</em>, the more we can apply continuous
delivery practices to consistently and reliably build, test and deliver our
infrastructure.</p>
</div>
<div class="paragraph">
<p>This approach integrates nicely with
<a href="/doc/pipeline">Jenkins Pipeline</a>,
allowing us to also define our continuous delivery pipelines themselves as
code. For example, by sanity-checking our BIND zone files:</p>
</div>
<div class="listingblock">
<div class="title">Jenkinsfile</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="groovy"><span class="n">node</span><span class="o">(</span><span class="s1">'docker'</span><span class="o">)</span> <span class="o">{</span>
    <span class="kt">def</span> <span class="n">dockerImage</span> <span class="o">=</span> <span class="s1">'rtyler/jenkins-infra-builder'</span>

    <span class="n">checkout</span> <span class="n">scm</span>
    <span class="n">docker</span><span class="o">.</span><span class="na">image</span><span class="o">(</span><span class="n">dockerImage</span><span class="o">).</span><span class="na">inside</span> <span class="o">{</span>
        <span class="n">sh</span> <span class="s2">"/usr/sbin/named-checkzone jenkins-ci.org dist/profile/files/bind/jenkins-ci.org.zone"</span>
        <span class="n">sh</span> <span class="s2">"/usr/sbin/named-checkzone jenkins.io dist/profile/files/bind/jenkins.io.zone"</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Or delivering our Docker containers automatically to
<a href="https://hub.docker.com">Docker Hub</a>
, with a <code>Jenkinsfile</code> such as:</p>
</div>
<div class="listingblock">
<div class="title">Jenkinsfile</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="groovy"><span class="n">node</span><span class="o">(</span><span class="s1">'docker'</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">checkout</span> <span class="n">scm</span>

    <span class="cm">/* Get our abbreviated SHA-1 to uniquely identify this build */</span>
    <span class="kt">def</span> <span class="n">shortCommit</span> <span class="o">=</span> <span class="n">sh</span><span class="o">(</span><span class="nl">script:</span> <span class="s1">'git rev-parse HEAD'</span><span class="o">,</span> <span class="nl">returnStdout:</span> <span class="kc">true</span><span class="o">).</span><span class="na">take</span><span class="o">(</span><span class="mi">6</span><span class="o">)</span>

    <span class="n">stage</span> <span class="s1">'Build ircbot'</span> <span class="o">{</span>
        <span class="n">withEnv</span><span class="o">([</span><span class="s2">"JAVA_HOME=${tool 'jdk8'}"</span><span class="o">,</span> <span class="s2">"PATH+MVN=${tool 'mvn'}/bin"</span><span class="o">])</span> <span class="o">}</span>
            <span class="n">sh</span> <span class="s1">'make bot'</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kt">def</span> <span class="n">whale</span>
    <span class="n">stage</span> <span class="s1">'Build container'</span> <span class="o">{</span>
        <span class="n">whale</span> <span class="o">=</span> <span class="n">docker</span><span class="o">.</span><span class="na">build</span><span class="o">(</span><span class="s2">"jenkinsciinfra/ircbot:build${shortCommit}"</span><span class="o">)</span>
    <span class="o">}</span>

    <span class="n">stage</span> <span class="s1">'Deploy container'</span> <span class="o">{</span>
        <span class="cm">/* Push to Docker Hub */</span>
        <span class="n">whale</span><span class="o">.</span><span class="na">push</span><span class="o">()</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In
<a href="https://www.cloudbees.com/continuous-delivery-infrastructure-jenkins">my talk at Jenkins World</a>
(September 14th, 3:00 - 3:45pm in Exhibit Hall A-1) I will discuss these
Jenkinsfiles along with some of the strategies, patterns and code used with the
Jenkins project&#8217;s
<a href="https://github.com/jenkins-infra">open source</a>
infrastructure to get the most out of the team&#8217;s limited time.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="paragraph">
<p>R Tyler will be
<a href="https://www.cloudbees.com/continuous-delivery-infrastructure-jenkins">presenting</a>
more about continuous delivery of infrastructure at
<a href="https://www.cloudbees.com/jenkinsworld/home">Jenkins World</a>
in September.  Register with the code <code>JWFOSS</code> for 20% off your full conference
pass.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<ul class="app-tags">
<li>
<a class="app-tags__tag" href="/jenkins.io/independent-scrolling-patch/node/tags/event/">
event
</a>
</li>
<li>
<a class="app-tags__tag" href="/jenkins.io/independent-scrolling-patch/node/tags/jenkinsworld/">
jenkinsworld
</a>
</li>
<li>
<a class="app-tags__tag" href="/jenkins.io/independent-scrolling-patch/node/tags/jenkinsworld2016/">
jenkinsworld2016
</a>
</li>
</ul>
<h2>
About the author
</h2>
<!-- starting partial author.html.haml -->
<div class="app-author" id="about-the-author">
<!-- starting partial avatar.html.haml -->
<div class="app-avatar" style="min-width: 64px; width: 25vw; max-width: 128px">
<img alt="R. Tyler Croy" class="app-avatar__image" src="/jenkins.io/independent-scrolling-patch/images/avatars/rtyler.jpeg">
</div>

<!-- ending partial avatar.html.haml -->
<div class="app-author__content">
<p class="app-author__name">
<a href="/blog/authors/rtyler/">
R. Tyler Croy
</a>
</p>
<div class="paragraph">
<p>R&#46; Tyler Croy has been part of the Jenkins project for the past seven years.
While avoiding contributing any Java code, Tyler is involved in many of the
other aspects of the project which keep it running, such as this website,
infrastructure, governance, etc.</p>
</div>
<!-- starting partial social-media-buttons.html.haml -->
<ul class="app-social-media-buttons">
<li>
<a href="https://github.com/rtyler" rel="noreferrer noopener" target="_blank">
GitHub
</a>
</li>
<li>
<a href="https://twitter.com/agentdero" rel="noreferrer noopener" target="_blank">
Twitter
</a>
</li>
<li>
<a href="http://unethicalblogger.com" rel="noreferrer noopener" target="_blank">
Blog
</a>
</li>
</ul>

<!-- ending partial social-media-buttons.html.haml -->
</div>
</div>

<!-- ending partial author.html.haml -->
<!-- starting partial discuss.html.haml -->

<!-- ending partial discuss.html.haml -->
</article>


<script src="/jenkins.io/independent-scrolling-patch/assets/bower/anchor-js/anchor.min.js"></script>
<script src="/jenkins.io/independent-scrolling-patch/assets/bower/@popperjs/core/umd/popper.min.js"></script>
<script src="/jenkins.io/independent-scrolling-patch/assets/bower/bootstrap/js/bootstrap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/lit@2.5.0/polyfill-support.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@webcomponents/webcomponentsjs@2.6.0/webcomponents-loader.js"></script>
<script data="ionicons" defer="" src="https://cdnjs.cloudflare.com/ajax/libs/ionicons/5.5.2/ionicons/ionicons.esm.js" type="module"></script>
<script data="ionicons" defer="" nomodule="" src="https://cdnjs.cloudflare.com/ajax/libs/ionicons/5.5.2/ionicons/ionicons.js"></script>
<script defer="" src="https://cdn.jsdelivr.net/npm/@jenkinsci/jenkins-io-components/+esm" type="module"></script>
<script defer="" nomodule="" src="https://cdn.jsdelivr.net/npm/@jenkinsci/jenkins-io-components/"></script>
<jio-footer githubBranch="master" githubRepo="jenkins-infra/jenkins.io" property="https://www.jenkins.io" sourcePath="content//blog/2016/2016-09-08-continuous-delivery-of-infra.adoc"></jio-footer>
<script>
 (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
 
ga('create', 'UA-000000-0', 'auto');
ga('send', 'pageview');
ga('set', 'anonymizeIp', true);

</script>

<script>
  $(function(){
    var $body = $(document.body);
    $body.on("keydown", function(){
      $body.removeClass("no-outline");
    })
  })
</script>
<script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3" type="text/javascript"></script>
<script type="text/javascript">
docsearch({
  container: document.querySelector('input.searchbox').parentNode,
  indexName: 'jenkins',
  appId: "M6L7Q4Z8HS",
  apiKey: "52f8dfbff76ffd9106f1c68fee16154b",
  algoliaOptions: { 'facetFilters': ["tags:en"] },
  debug: false
});
</script>
</body>
</html>
