<!DOCTYPE html>
<html lang="en">
<head>
<title>
Upgrading to Jenkins LTS 2.19.x
</title>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<meta content="Jenkins – an open source automation server which enables developers around the world to reliably build, test, and deploy their software" name="description">
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
<meta content="ie=edge" http-equiv="x-ua-compatible">
<link href="https://Vandit1604.github.io/jenkins.io/independent-scrolling-patch/doc/upgrade-guide/2.19/" rel="canonical">
<!-- Favicons -->
<link href="/favicon.ico" rel="shortcut icon" type="image/x-icon">
<link href="/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180">
<link href="/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png">
<link href="/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png">
<link href="/site.webmanifest" rel="manifest">
<link color="#5bbad5" href="/safari-pinned-tab.svg" rel="mask-icon">
<meta content="#2b5797" name="msapplication-TileColor">
<meta content="#ffffff" name="theme-color">
<meta content="Upgrading to Jenkins LTS 2.19.x" name="apple-mobile-web-app-title">
<!-- Twitter Card data -->
<meta content="summary_large_image" name="twitter:card">
<meta content="@JenkinsCI" name="twitter:site">
<meta content="Upgrading to Jenkins LTS 2.19.x" name="twitter:title">
<meta content="Jenkins – an open source automation server which enables developers around the world to reliably build, test, and deploy their software" name="twitter:description">
<meta content="@JenkinsCI" name="twitter:creator">
<!-- Twitter Summary card images must be at least 120x120px -->
<meta content="/jenkins.io/independent-scrolling-patch/images/logo-title-opengraph.png" name="twitter:image">
<!-- Open Graph data -->
<meta content="Upgrading to Jenkins LTS 2.19.x" property="og:title">
<meta content="article" property="og:type">
<meta content="https://Vandit1604.github.io/jenkins.io/independent-scrolling-patch/doc/upgrade-guide/2.19/" property="og:url">
<meta content="Jenkins – an open source automation server which enables developers around the world to reliably build, test, and deploy their software" name="og:description">
<meta content="Upgrading to Jenkins LTS 2.19.x" property="og:site_name">
<meta content="/jenkins.io/independent-scrolling-patch/images/logo-title-opengraph.png" name="og:image">
<link href="/jenkins.io/independent-scrolling-patch/assets/bower/bootstrap/css/bootstrap.min.css" media="screen" rel="stylesheet">
<link href="/jenkins.io/independent-scrolling-patch/css/jenkins.css" media="screen" rel="stylesheet">
<link href="/jenkins.io/independent-scrolling-patch/stylesheets/styles.css" media="screen" rel="stylesheet">
<!-- Non-obtrusive CSS styles -->
<link href="/jenkins.io/independent-scrolling-patch/css/footer.css" media="screen" rel="stylesheet">
<link href="/jenkins.io/independent-scrolling-patch/css/font-awesome.min.css" media="screen" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/@docsearch/css@3" rel="stylesheet">
</head>
<body>
<script src="/jenkins.io/independent-scrolling-patch/assets/bower/jquery/jquery.min.js"></script>
<!-- starting partial toptoolbar.html.haml -->
<jio-navbar class="fixed-top" id="ji-toolbar" property="https://www.jenkins.io" showSearchBox=""></jio-navbar>
<!-- Spacing to make the fixed-top sticky navbar not occlude any content below it -->
<div class="pt-4">
&nbsp;
</div>

<!-- ending partial toptoolbar.html.haml -->
<!-- starting partial anchors.html.haml -->
<script>
  window.addEventListener('DOMContentLoaded', function () {
    for (var i = 1 ; i <= 6 ; i ++) {
      anchors.add('.container .row .col-lg-9 h' + i);
    }
  })
</script>

<!-- ending partial anchors.html.haml -->
<div class="container">
<div class="row body flex-lg-nowrap">
<div class="col-lg-3" id="sidebar-menu">
<div class="sidebar-nav tour" id="sidebar-content">
<p>
<a href="/jenkins.io/independent-scrolling-patch/doc/" class="">> User Documentation Home</a>
</p>
<h5>
User Handbook
</h5>
<ul>
<li>
<a href="/jenkins.io/independent-scrolling-patch/doc/book/getting-started/" class="">User Handbook Overview</a>
</li>
<li>
<a href="/jenkins.io/independent-scrolling-patch/doc/book/installing/" class="">Installing Jenkins</a>
</li>
<li>
<a href="/jenkins.io/independent-scrolling-patch/doc/book/using/" class="">Using Jenkins</a>
</li>
<li>
<a href="/jenkins.io/independent-scrolling-patch/doc/book/pipeline/" class="">Pipeline</a>
</li>
<li>
<a href="/jenkins.io/independent-scrolling-patch/doc/book/blueocean/" class="">Blue Ocean</a>
</li>
<li>
<a href="/jenkins.io/independent-scrolling-patch/doc/book/managing/" class="">Managing Jenkins</a>
</li>
<li>
<a href="/jenkins.io/independent-scrolling-patch/doc/book/security/" class="">Securing Jenkins</a>
</li>
<li>
<a href="/jenkins.io/independent-scrolling-patch/doc/book/system-administration/" class="">System Administration</a>
</li>
<li>
<a href="/jenkins.io/independent-scrolling-patch/doc/book/scaling/" class="">Scaling Jenkins</a>
</li>
<li>
<a href="/jenkins.io/independent-scrolling-patch/doc/book/troubleshooting/" class="">Troubleshooting Jenkins</a>
</li>
<li>
<a href="/jenkins.io/independent-scrolling-patch/doc/book/glossary/" class="">Glossary</a>
</li>
</ul>
<h5>
Tutorials
</h5>
<ul>
<li>
<a href="/jenkins.io/independent-scrolling-patch/doc/pipeline/tour/getting-started/" class="">Guided Tour</a>
</li>
<li>
<a href="/jenkins.io/independent-scrolling-patch/doc/tutorials#pipeline" class="">Jenkins Pipeline</a>
</li>
<li>
<a href="/jenkins.io/independent-scrolling-patch/doc/tutorials#tools" class="">Using Build Tools</a>
</li>
</ul>
<h5>
Resources
</h5>
<ul>
<li>
<a href="/jenkins.io/independent-scrolling-patch/doc/book/pipeline/syntax/" class="">Pipeline Syntax reference</a>
</li>
<li>
<a href="/jenkins.io/independent-scrolling-patch/doc/pipeline/steps/" class="">Pipeline Steps reference</a>
</li>
<li>
<a href="/jenkins.io/independent-scrolling-patch/doc/upgrade-guide/" class="active">LTS Upgrade guides</a>
</li>
</ul>
</div>
</div>
<div class="col-lg-9">
<h1>
Upgrading to Jenkins LTS 2.19.x
</h1>
<p>
Each section covers the upgrade from the previous LTS release,
the section on 2.19.1 covers the upgrade from  2.7.4.
</p>
<h3 id="upgrading-to-jenkins-lts-2-19-4">
Upgrading to Jenkins 2.19.4
</h3>
<div class="sect3">
<h4 id="jnlp-agent-protocol-options-werent-correctly-persisted"><a class="anchor" href="#jnlp-agent-protocol-options-werent-correctly-persisted"></a>JNLP agent protocol options weren&#8217;t correctly persisted</h4>
<div class="paragraph">
<p><a href="https://issues.jenkins.io/browse/JENKINS-39465">JENKINS-39465</a></p>
</div>
<div class="paragraph">
<p>The JNLP agent protocol configuration could not be loaded from disk after a Jenkins restart.</p>
</div>
<div class="paragraph">
<p>If you customized these settings since 2.19.1, review that they are configured as expected.</p>
</div>
</div>
<div class="sect3">
<h4 id="honor-jenkins-model-jenkins-slaveagentport-again"><a class="anchor" href="#honor-jenkins-model-jenkins-slaveagentport-again"></a>Honor <code>jenkins.model.Jenkins.slaveAgentPort</code> again</h4>
<div class="paragraph">
<p><a href="https://issues.jenkins.io/browse/JENKINS-38187">JENKINS-38187</a></p>
</div>
<div class="paragraph">
<p>A regression in Jenkins 2.0 caused Jenkins to ignore the System property <code>jenkins.model.Jenkins.slaveAgentPort</code>.</p>
</div>
<div class="paragraph">
<p>The previous behavior has been restored, and a new System property <code>jenkins.model.Jenkins.slaveAgentPort</code> added that, if set, will enforce the JNLP agent port on every Jenkins startup, and will not allow the value to be changed through the UI.</p>
</div>
<div class="paragraph">
<p>It can still be changed via Groovy scripting for troubleshooting purposes, but any change will be reverted on startup.</p>
</div>
</div>
<div class="sect3">
<h4 id="text-boxes-on-configuration-screens-will-no-longer-stretch-to-accommodate-long-lines"><a class="anchor" href="#text-boxes-on-configuration-screens-will-no-longer-stretch-to-accommodate-long-lines"></a>Text boxes on configuration screens will no longer stretch to accommodate long lines</h4>
<div class="paragraph">
<p><a href="https://issues.jenkins.io/browse/JENKINS-27367">JENKINS-27367</a></p>
</div>
<div class="paragraph">
<p>The layout of job configuration screens will no longer break if users don&#8217;t insert extra line breaks to break long lines. Instead, the text box will allow horizontal scrolling.</p>
</div>
</div>
<div class="sect3">
<h4 id="dont-spawn-numerous-threads-on-the-agent-build-history-page"><a class="anchor" href="#dont-spawn-numerous-threads-on-the-agent-build-history-page"></a>Don&#8217;t spawn numerous threads on the agent build history page</h4>
<div class="paragraph">
<p><a href="https://issues.jenkins.io/browse/JENKINS-23244">JENKINS-23244</a></p>
</div>
<div class="paragraph">
<p>The build history for specific agents has long caused numerous potentially long-running threads to spawn. This has been fixed.</p>
</div>
</div>
<div class="sect3">
<h4 id="memory-leak-on-dashboard-fixed"><a class="anchor" href="#memory-leak-on-dashboard-fixed"></a>Memory leak on dashboard fixed</h4>
<div class="paragraph">
<p><a href="https://issues.jenkins.io/browse/JENKINS-10912">JENKINS-10912</a></p>
</div>
<div class="paragraph">
<p>A memory leak on the dashboard (view pages) was fixed, so that browser memory use will no longer grow unbounded.</p>
</div>
</div>
<h3 id="upgrading-to-jenkins-lts-2-19-3">
Upgrading to Jenkins 2.19.3
</h3>
<div class="sect3">
<h4 id="expansion-of-the-serialization-blacklist"><a class="anchor" href="#expansion-of-the-serialization-blacklist"></a>Expansion of the serialization blacklist</h4>
<div class="paragraph">
<p><a href="https://wiki.jenkins.io/display/SECURITY/Jenkins+Security+Advisory+2016-11-16">Security Advisory 2016-11-16</a></p>
</div>
<div class="paragraph">
<p>The major part of the security fix is an expansion of the serialization blacklist used for remoting (Jenkins CLI and master/agent communication) and XStream (XML configuration and data files).</p>
</div>
<div class="paragraph">
<p>It is possible that legitimate uses of classes in blacklisted packages will no longer work. This will be indicated by any of the following in exception messages in logs:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">Rejected: com.sun.jndi.rmi.EvilClass
Refusing to unmarshal com.sun.jndi.rmi.EvilClass for security reasons
Refusing to marshal com.sun.jndi.rmi.EvilClass for security reasons</pre>
</div>
</div>
<div class="paragraph">
<p>In these examples, <code>com.sun.jndi.rmi.EvilClass</code> is a placeholder for a real class name.</p>
</div>
<div class="paragraph">
<p>It is possible to customize the blacklist used by setting the <code>hudson.remoting.ClassFilter.DEFAULTS_OVERRIDE_LOCATION</code> System property for the Jenkins controller <code>java</code> invocation. It is expected to be set to the path to a file containing a complete, custom blacklist overriding the default one.</p>
</div>
<div class="paragraph">
<p>The default blacklist is defined in <a href="https://github.com/jenkinsci/remoting/blob/remoting-3.2/src/main/java/hudson/remoting/ClassFilter.java#L57&#8230;&#8203;L79"><code>ClassFilter.java</code> in the remoting component</a>. In a configuration file as used for <code>hudson.remoting.ClassFilter.DEFAULTS_OVERRIDE_LOCATION</code>, the default blacklist would look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">^bsh[.].*
^com[.]google[.]inject[.].*
^com[.]mchange[.]v2[.]c3p0[.].*
^com[.]sun[.]jndi[.].*
^com[.]sun[.]corba[.].*
^com[.]sun[.]javafx[.].*
^com[.]sun[.]org[.]apache[.]regex[.]internal[.].*
^java[.]awt[.].*
^java[.]rmi[.].*
^javax[.]management[.].*
^javax[.]naming[.].*
^javax[.]script[.].*
^javax[.]swing[.].*
^org[.]apache[.]commons[.]beanutils[.].*
^org[.]apache[.]commons[.]collections[.]functors[.].*
^org[.]apache[.]myfaces[.].*
^org[.]apache[.]wicket[.].*
.*org[.]apache[.]xalan.*
^org[.]codehaus[.]groovy[.]runtime[.].*
^org[.]hibernate[.].*
^org[.]python[.].*
^org[.]springframework[.](?!(\p{Alnum}+[.])*\p{Alnum}*Exception$).*
^sun[.]rmi[.].*</pre>
</div>
</div>
<div class="paragraph">
<p>To check whether any given class name is blacklisted, run the following command in <em>Manage Jenkins » Script Console</em>, replacing <code>com.sun.jndi.rmi.EvilClass</code> with the class name you want to check:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">hudson.remoting.ClassFilter.DEFAULT.isBlacklisted('com.sun.jndi.rmi.EvilClass')</pre>
</div>
</div>
<div class="paragraph">
<p>Removing or relaxing entries on this blacklist must be done carefully as to not open yourself up to known exploits. A possible alternative could be to disable the CLI via HTTP and JNLP agent port (see below) to prevent its unauthenticated use.</p>
</div>
</div>
<div class="sect3">
<h4 id="disabling-the-cli"><a class="anchor" href="#disabling-the-cli"></a>Disabling the CLI</h4>
<div class="paragraph">
<p>Another change in Jenkins 2.19.3 is the new feature to disable the CLI over HTTP and JNLP by setting the System property <code>jenkins.CLI.disabled</code> to <code>true</code>. This is a more convenient alternative to run the <a href="https://github.com/jenkinsci-cert/SECURITY-218/">Groovy script provided as a workaround to SECURITY-218 and SECURITY-360</a> for users who do not want to allow unauthenticated access to the Jenkins CLI even with the security fix.</p>
</div>
<div class="paragraph">
<p>While the CLI can be used using the Jenkins integrated SSH daemon as well, this requires authentication, so it&#8217;s not a vector for unauthenticated attacks. To disable this feature as well, disable the SSH server port in <em>Manage Jenkins » Configure Jenkins » SSH Server</em>.</p>
</div>
</div>
<h3 id="upgrading-to-jenkins-lts-2-19-2">
Upgrading to Jenkins 2.19.2
</h3>
<div class="sect3">
<h4 id="fixes-to-cli-over-http"><a class="anchor" href="#fixes-to-cli-over-http"></a>Fixes to CLI over HTTP</h4>
<div class="paragraph">
<p>CLI over HTTP (when the JNLP port is disabled) now works with CSRF protection enabled and does not need explicitly setting <code>hudson.diyChunking</code>. So any workarounds applied for previous versions of Jenkins to make the CLI work can now be reverted.</p>
</div>
</div>
<h3 id="upgrading-to-jenkins-lts-2-19-1">
Upgrading to Jenkins 2.19.1
</h3>
<div class="sect3">
<h4 id="plugin-dependency-resolution-fix"><a class="anchor" href="#plugin-dependency-resolution-fix"></a>Plugin dependency resolution fix</h4>
<div class="paragraph">
<p><a href="https://issues.jenkins.io/browse/JENKINS-21486">JENKINS-21486</a></p>
</div>
<div class="paragraph">
<p>Previous versions allowed Jenkins to run with invalid plugin configurations. For example, plugins depending on other plugins were loaded even if those dependencies were outdated, or disabled. This could result in difficult to debug errors at run time.</p>
</div>
<div class="paragraph">
<p>Now, Jenkins will refuse to load plugins with unsatisfied dependencies. Diagnostic messages explaining this will be written to the Jenkins log during startup, and we strongly recommend monitoring that after upgrading.</p>
</div>
</div>
<div class="sect3">
<h4 id="form-autocompletion-disabled"><a class="anchor" href="#form-autocompletion-disabled"></a>Form autocompletion disabled</h4>
<div class="paragraph">
<p><a href="https://issues.jenkins.io/browse/JENKINS-18435">JENKINS-18435</a></p>
</div>
<div class="paragraph">
<p>A long-standing problem with JavaScript-heavy configuration forms was that submitting a form, then using the web browser Back button to return to the form resulted in the wrong form contents. Submitting the form again would then result in unexpectedly broken configuration.</p>
</div>
<div class="paragraph">
<p>To work around this problem, we disabled autocompletion for almost all form fields.</p>
</div>
</div>
<div class="sect3">
<h4 id="agent-protocol-selection-in-security-configuration"><a class="anchor" href="#agent-protocol-selection-in-security-configuration"></a>Agent protocol selection in security configuration</h4>
<div class="paragraph">
<p><a href="https://issues.jenkins.io/browse/JENKINS-37032">JENKINS-37032</a></p>
</div>
<div class="paragraph">
<p>The Configure Global Security form now includes options to enable/disable specific agent protocol versions, along with short descriptions of each protocol. There is no general guidance on when to customize the status of specific protocols, but it may be needed in the future.</p>
</div>
</div>
<div class="sect3">
<h4 id="hiding-the-java-web-start-launcher"><a class="anchor" href="#hiding-the-java-web-start-launcher"></a>Hiding the Java Web Start launcher</h4>
<div class="paragraph">
<p><a href="https://issues.jenkins.io/browse/JENKINS-36996">JENKINS-36996</a></p>
</div>
<div class="paragraph">
<p>By default, new Jenkins 2 instances will have the JNLP agent port disabled. As this is a requirement for the JNLP Web Start launch method for build agents to work, this form option will now be hidden if the port is disabled. To make it show up, just enable the JNLP agent port in the Global Security Configuration.</p>
</div>
</div>

</div>
</div>
</div>


<script src="/jenkins.io/independent-scrolling-patch/assets/bower/anchor-js/anchor.min.js"></script>
<script src="/jenkins.io/independent-scrolling-patch/assets/bower/@popperjs/core/umd/popper.min.js"></script>
<script src="/jenkins.io/independent-scrolling-patch/assets/bower/bootstrap/js/bootstrap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/lit@2.5.0/polyfill-support.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@webcomponents/webcomponentsjs@2.6.0/webcomponents-loader.js"></script>
<script data="ionicons" defer="" src="https://cdnjs.cloudflare.com/ajax/libs/ionicons/5.5.2/ionicons/ionicons.esm.js" type="module"></script>
<script data="ionicons" defer="" nomodule="" src="https://cdnjs.cloudflare.com/ajax/libs/ionicons/5.5.2/ionicons/ionicons.js"></script>
<script defer="" src="https://cdn.jsdelivr.net/npm/@jenkinsci/jenkins-io-components/+esm" type="module"></script>
<script defer="" nomodule="" src="https://cdn.jsdelivr.net/npm/@jenkinsci/jenkins-io-components/"></script>
<jio-footer githubBranch="master" githubRepo="jenkins-infra/jenkins.io" property="https://www.jenkins.io" sourcePath="content//doc/upgrade-guide.html.haml"></jio-footer>
<script>
 (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
 
ga('create', 'UA-000000-0', 'auto');
ga('send', 'pageview');
ga('set', 'anonymizeIp', true);

</script>

<script>
  $(function(){
    var $body = $(document.body);
    $body.on("keydown", function(){
      $body.removeClass("no-outline");
    })
  })
</script>
<script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3" type="text/javascript"></script>
<script type="text/javascript">
docsearch({
  container: document.querySelector('input.searchbox').parentNode,
  indexName: 'jenkins',
  appId: "M6L7Q4Z8HS",
  apiKey: "52f8dfbff76ffd9106f1c68fee16154b",
  algoliaOptions: { 'facetFilters': ["tags:en"] },
  debug: false
});
</script>
</body>
</html>
