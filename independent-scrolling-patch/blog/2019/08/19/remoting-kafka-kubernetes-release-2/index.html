<!DOCTYPE html>
<html lang="en">
<head>
<title>
Remoting over Apache Kafka 2.0: Built-in Kubernetes support
</title>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<meta content="Jenkins – an open source automation server which enables developers around the world to reliably build, test, and deploy their software" name="description">
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
<meta content="ie=edge" http-equiv="x-ua-compatible">
<link href="https://Vandit1604.github.io/jenkins.io/independent-scrolling-patch/blog/2019/08/19/remoting-kafka-kubernetes-release-2/" rel="canonical">
<!-- Favicons -->
<link href="/favicon.ico" rel="shortcut icon" type="image/x-icon">
<link href="/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180">
<link href="/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png">
<link href="/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png">
<link href="/site.webmanifest" rel="manifest">
<link color="#5bbad5" href="/safari-pinned-tab.svg" rel="mask-icon">
<meta content="#2b5797" name="msapplication-TileColor">
<meta content="#ffffff" name="theme-color">
<meta content="Remoting over Apache Kafka 2.0: Built-in Kubernetes support" name="apple-mobile-web-app-title">
<!-- Twitter Card data -->
<meta content="summary_large_image" name="twitter:card">
<meta content="@JenkinsCI" name="twitter:site">
<meta content="Remoting over Apache Kafka 2.0: Built-in Kubernetes support" name="twitter:title">
<meta content="Jenkins – an open source automation server which enables developers around the world to reliably build, test, and deploy their software" name="twitter:description">
<meta content="@JenkinsCI" name="twitter:creator">
<!-- Twitter Summary card images must be at least 120x120px -->
<meta content="/jenkins.io/independent-scrolling-patch/images/logo-title-opengraph.png" name="twitter:image">
<!-- Open Graph data -->
<meta content="Remoting over Apache Kafka 2.0: Built-in Kubernetes support" property="og:title">
<meta content="article" property="og:type">
<meta content="https://Vandit1604.github.io/jenkins.io/independent-scrolling-patch/blog/2019/08/19/remoting-kafka-kubernetes-release-2/" property="og:url">
<meta content="Jenkins – an open source automation server which enables developers around the world to reliably build, test, and deploy their software" name="og:description">
<meta content="Remoting over Apache Kafka 2.0: Built-in Kubernetes support" property="og:site_name">
<meta content="/jenkins.io/independent-scrolling-patch/images/logo-title-opengraph.png" name="og:image">
<link href="/jenkins.io/independent-scrolling-patch/assets/bower/bootstrap/css/bootstrap.min.css" media="screen" rel="stylesheet">
<link href="/jenkins.io/independent-scrolling-patch/css/jenkins.css" media="screen" rel="stylesheet">
<link href="/jenkins.io/independent-scrolling-patch/stylesheets/styles.css" media="screen" rel="stylesheet">
<!-- Non-obtrusive CSS styles -->
<link href="/jenkins.io/independent-scrolling-patch/css/footer.css" media="screen" rel="stylesheet">
<link href="/jenkins.io/independent-scrolling-patch/css/font-awesome.min.css" media="screen" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/@docsearch/css@3" rel="stylesheet">
</head>
<body>
<script src="/jenkins.io/independent-scrolling-patch/assets/bower/jquery/jquery.min.js"></script>
<!-- starting partial toptoolbar.html.haml -->
<jio-navbar class="fixed-top" id="ji-toolbar" property="https://www.jenkins.io" showSearchBox=""></jio-navbar>
<!-- Spacing to make the fixed-top sticky navbar not occlude any content below it -->
<div class="pt-4">
&nbsp;
</div>

<!-- ending partial toptoolbar.html.haml -->
<!-- starting partial anchors.html.haml -->
<script>
  window.addEventListener('DOMContentLoaded', function () {
    for (var i = 1 ; i <= 6 ; i ++) {
      anchors.add('.app-post-page h' + i);
    }
  })
</script>

<!-- ending partial anchors.html.haml -->
<article class="container app-post-page">
<div class="app-!-display-flex">
<a class="app-back-link" href="/jenkins.io/independent-scrolling-patch/node/">
Back to blog
</a>
</div>
<h1>
Remoting over Apache Kafka 2.0: Built-in Kubernetes support
</h1>
<div class="post-attrs">
<a class="app-author-link" href="/blog/authors/longnguyen/"><div class="app-avatar"><img alt="Long Nguyen" class="app-avatar__image" src="/images/avatars/longnguyen.jpg"></div> Long Nguyen</a>
August 19, 2019
<a class="twitter-share-button" data-lang="en" href="https://twitter.com/intent/tweet?text=Remoting+over+Apache+Kafka+2.0%3A+Built-in+Kubernetes+support&amp;url=https%3A%2F%2Fwww.jenkins.io%2Fjenkins.io%2Findependent-scrolling-patch%2Fblog%2F2019%2F08%2F19%2Fremoting-kafka-kubernetes-release-2%2F" rel="noreferrer nofollow" target="_blank">
Tweet
</a>
</div>
<div class="blog-content">
<div class="paragraph">
<p>I am Long Nguyen from <a href="https://international.fpt.edu.vn/">FPT University</a>, Vietnam. My project for Google Summer of Code 2019 is <a href="/projects/gsoc/2019/remoting-over-apache-kafka-docker-k8s-features/">Remoting over Apache Kafka with Kubernetes features</a>. After a successful <a href="/blog/2019/07/11/remoting-kafka-kubernetes-phase-1/">Phase 1</a>, finally the 2.0 version of the plugin has been released. The 2.0 version provides seamless integration with Kubernetes environment.</p>
</div>
<div class="sect1">
<h2 id="2-0-version-features"><a class="anchor" href="#2-0-version-features"></a>2.0 version features</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Start a simple Apache Kafka server in Kubernetes.</p>
</li>
<li>
<p>Dynamically provision Remoting Kafka Agent in Kubernetes.</p>
</li>
<li>
<p>Helm chart to bootstrap the whole system in Kubernetes.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="start-a-simple-apache-kafka-server-in-kubernetes"><a class="anchor" href="#start-a-simple-apache-kafka-server-in-kubernetes"></a>Start a simple Apache Kafka server in Kubernetes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Use of the plugin requires that users have a configured Apache Zookeeper and Apache Kafka server, which could be intimidating for people who just want to try out the plugin. Now, users can start a simple, single-node Apache Kafka server in Kubernetes environment with just one button click.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="/images/post-images/remoting-kafka/kafka-provisioning-kubernetes-ui.png" alt="Apache Kafka provisioning in Kubernetes UI"></span></p>
</div>
<div class="paragraph">
<p>On the Global Configuration page, users can input Kubernetes server information and credentials. When users click <code>Start Kafka on Kubernetes</code> button, Jenkins will create a Kubernetes client from the information and then apply Apache Zookeeper and Apache Kafka YAML specification files from <code>resources</code>. After downloading images and creating containers, it will automatically update Apache Zookeeper and Apache Kafka URLs into respective fields.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dynamically-provision-remoting-kafka-agent-in-kubernetes"><a class="anchor" href="#dynamically-provision-remoting-kafka-agent-in-kubernetes"></a>Dynamically provision Remoting Kafka Agent in Kubernetes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>With previous version, users have to manually add/remove nodes so it is hard to scale builds quickly. <a href="https://plugins.jenkins.io/kubernetes">Kubernetes plugin</a> allows us to dynamically provision agents in Kubernetes but it is designed for JNLP agent. With this new version, Remoting Kafka agent can also be provisioned automatically in Kubernetes environment.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="/images/post-images/remoting-kafka/cloud-ui.png" alt="Remoting Kafka Cloud UI"></span></p>
</div>
<div class="paragraph">
<p>Users can find the new feature in Cloud section in <code>/configure</code>. Here users could input Kubernetes connection parameters and desired Remoting Kafka agent properties including labels. When new build with matching labels gets started and there are no free nodes, Cloud will automatically provision Remoting Kafka agent pod in Kubernetes to run the build.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="/images/post-images/remoting-kafka/cloud-nodes.png" alt="Remoting Kafka Agent get provisioned"></span></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="helm-chart"><a class="anchor" href="#helm-chart"></a>Helm Chart</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Helm chart for Remoting over Apache Kafka plugin is based on <a href="https://github.com/helm/charts/tree/master/stable/jenkins">stable/jenkins</a> chart and <a href="https://github.com/helm/charts/tree/master/incubator/kafka">incubator/kafka</a> chart. You can follow the instruction <a href="https://github.com/jenkinsci/remoting-kafka-plugin/blob/master/README.md">here</a> to install a demo ready-to-use Helm release. Your <code>kubectl get all</code> should look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash">NAME                                READY   STATUS    RESTARTS   AGE
pod/demo-jenkins-64dbd87987-bmndf   1/1     Running   0          2m21s
pod/demo-kafka-0                    1/1     Running   0          2m21s
pod/demo-zookeeper-0                1/1     Running   0          2m21s

NAME                              TYPE        CLUSTER-IP      EXTERNAL-IP   PORT<span class="o">(</span>S<span class="o">)</span>                      AGE
service/demo-jenkins              NodePort    10.108.238.56   &lt;none&gt;        8080:30386/TCP               2m21s
service/demo-jenkins-agent        ClusterIP   10.98.85.184    &lt;none&gt;        50000/TCP                    2m21s
service/demo-kafka                ClusterIP   10.109.231.58   &lt;none&gt;        9092/TCP                     2m21s
service/demo-kafka-headless       ClusterIP   None            &lt;none&gt;        9092/TCP                     2m21s
service/demo-zookeeper            ClusterIP   10.103.2.231    &lt;none&gt;        2181/TCP                     2m21s
service/demo-zookeeper-headless   ClusterIP   None            &lt;none&gt;        2181/TCP,3888/TCP,2888/TCP   2m21s

NAME                           READY   UP-TO-DATE   AVAILABLE   AGE
deployment.apps/demo-jenkins   1/1     1            1           2m21s

NAME                                      DESIRED   CURRENT   READY   AGE
replicaset.apps/demo-jenkins-64dbd87987   1         1         1       2m21s

NAME                              READY   AGE
statefulset.apps/demo-kafka       1/1     2m21s
statefulset.apps/demo-zookeeper   1/1     2m21s</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="how-to-contribute"><a class="anchor" href="#how-to-contribute"></a>How to Contribute</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You are welcome to try out the plugin and integrate it into your current setup. If you find out any bug or if you would like to request new feature, you can create ticket at <a href="https://issues.jenkins.io/issues/?jql=project+%3D+JENKINS+AND+component+%3D+remoting-kafka-plugin">JIRA</a>. If you would like to contribute code directly, you can create pull requests in the GitHub page below.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="links"><a class="anchor" href="#links"></a>Links</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://youtu.be/tnoObQqGhyM?t=2368">Phase 2 Demo Video</a></p>
</li>
<li>
<p><a href="https://docs.google.com/presentation/d/1BN2lUcI5UweN2pumAu2m4XHIVXQw6ujzeO9Fbage3ys/edit?usp=sharing">Phase 2 Presentation Slides</a></p>
</li>
<li>
<p><a href="/blog/2019/07/11/remoting-kafka-kubernetes-phase-1/">Phase 1 Blog Post</a></p>
</li>
<li>
<p><a href="https://youtu.be/MDs0Vr7gnnA?t=2601">Phase 1 Demo Video</a></p>
</li>
<li>
<p><a href="https://docs.google.com/presentation/d/1yIPwwL7P051XaSE2EOJYAtbVsd6YvGvvKp9QcJE4J1Y/edit?usp=sharing">Phase 1 Presentation Slides</a></p>
</li>
<li>
<p><a href="https://github.com/jenkinsci/remoting-kafka-plugin">Remoting over Apache Kafka plugin source code</a></p>
</li>
<li>
<p><a href="/projects/gsoc/2019/remoting-over-apache-kafka-docker-k8s-features/">Project Page</a></p>
</li>
<li>
<p><a href="https://gitter.im/jenkinsci/remoting">Gitter Channel</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<ul class="app-tags">
<li>
<a class="app-tags__tag" href="/jenkins.io/independent-scrolling-patch/node/tags/remoting/">
remoting
</a>
</li>
<li>
<a class="app-tags__tag" href="/jenkins.io/independent-scrolling-patch/node/tags/kafka/">
kafka
</a>
</li>
<li>
<a class="app-tags__tag" href="/jenkins.io/independent-scrolling-patch/node/tags/kubernetes/">
kubernetes
</a>
</li>
<li>
<a class="app-tags__tag" href="/jenkins.io/independent-scrolling-patch/node/tags/helm/">
helm
</a>
</li>
<li>
<a class="app-tags__tag" href="/jenkins.io/independent-scrolling-patch/node/tags/plugin/">
plugin
</a>
</li>
<li>
<a class="app-tags__tag" href="/jenkins.io/independent-scrolling-patch/node/tags/gsoc/">
gsoc
</a>
</li>
<li>
<a class="app-tags__tag" href="/jenkins.io/independent-scrolling-patch/node/tags/gsoc2019/">
gsoc2019
</a>
</li>
</ul>
<h2>
About the author
</h2>
<!-- starting partial author.html.haml -->
<div class="app-author" id="about-the-author">
<!-- starting partial avatar.html.haml -->
<div class="app-avatar" style="min-width: 64px; width: 25vw; max-width: 128px">
<img alt="Long Nguyen" class="app-avatar__image" src="/jenkins.io/independent-scrolling-patch/images/avatars/longnguyen.jpg">
</div>

<!-- ending partial avatar.html.haml -->
<div class="app-author__content">
<p class="app-author__name">
<a href="/blog/authors/longnguyen/">
Long Nguyen
</a>
</p>
<div class="paragraph">
<p>Long is a Software Engineering student at FPT University, Vietnam. He started to contribute for Jenkins from Google Summer of Code 2019 for the project <a href="/projects/gsoc/2019/remoting-over-apache-kafka-docker-k8s-features/">Remoting over Apache Kafka with Kubernetes features</a></p>
</div>
<!-- starting partial social-media-buttons.html.haml -->
<ul class="app-social-media-buttons">
<li>
<a href="https://github.com/longngn" rel="noreferrer noopener" target="_blank">
GitHub
</a>
</li>
</ul>

<!-- ending partial social-media-buttons.html.haml -->
</div>
</div>

<!-- ending partial author.html.haml -->
<!-- starting partial discuss.html.haml -->

<!-- ending partial discuss.html.haml -->
</article>


<script src="/jenkins.io/independent-scrolling-patch/assets/bower/anchor-js/anchor.min.js"></script>
<script src="/jenkins.io/independent-scrolling-patch/assets/bower/@popperjs/core/umd/popper.min.js"></script>
<script src="/jenkins.io/independent-scrolling-patch/assets/bower/bootstrap/js/bootstrap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/lit@2.5.0/polyfill-support.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@webcomponents/webcomponentsjs@2.6.0/webcomponents-loader.js"></script>
<script data="ionicons" defer="" src="https://cdnjs.cloudflare.com/ajax/libs/ionicons/5.5.2/ionicons/ionicons.esm.js" type="module"></script>
<script data="ionicons" defer="" nomodule="" src="https://cdnjs.cloudflare.com/ajax/libs/ionicons/5.5.2/ionicons/ionicons.js"></script>
<script defer="" src="https://cdn.jsdelivr.net/npm/@jenkinsci/jenkins-io-components/+esm" type="module"></script>
<script defer="" nomodule="" src="https://cdn.jsdelivr.net/npm/@jenkinsci/jenkins-io-components/"></script>
<jio-footer githubBranch="master" githubRepo="jenkins-infra/jenkins.io" property="https://www.jenkins.io" sourcePath="content//blog/2019/08/2019-08-19-remoting-kafka-kubernetes-release-2.0.adoc"></jio-footer>
<script>
 (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
 
ga('create', 'UA-000000-0', 'auto');
ga('send', 'pageview');
ga('set', 'anonymizeIp', true);

</script>

<script>
  $(function(){
    var $body = $(document.body);
    $body.on("keydown", function(){
      $body.removeClass("no-outline");
    })
  })
</script>
<script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3" type="text/javascript"></script>
<script type="text/javascript">
docsearch({
  container: document.querySelector('input.searchbox').parentNode,
  indexName: 'jenkins',
  appId: "M6L7Q4Z8HS",
  apiKey: "52f8dfbff76ffd9106f1c68fee16154b",
  algoliaOptions: { 'facetFilters': ["tags:en"] },
  debug: false
});
</script>
</body>
</html>
