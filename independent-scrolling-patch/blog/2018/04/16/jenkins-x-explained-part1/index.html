<!DOCTYPE html>
<html lang="en">
<head>
<title>
Jenkins X Explained Part 1 - an integrated CI/CD solution for Kubernetes
</title>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<meta content="Jenkins – an open source automation server which enables developers around the world to reliably build, test, and deploy their software" name="description">
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
<meta content="ie=edge" http-equiv="x-ua-compatible">
<link href="https://Vandit1604.github.io/jenkins.io/independent-scrolling-patch/blog/2018/04/16/jenkins-x-explained-part1/" rel="canonical">
<!-- Favicons -->
<link href="/favicon.ico" rel="shortcut icon" type="image/x-icon">
<link href="/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180">
<link href="/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png">
<link href="/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png">
<link href="/site.webmanifest" rel="manifest">
<link color="#5bbad5" href="/safari-pinned-tab.svg" rel="mask-icon">
<meta content="#2b5797" name="msapplication-TileColor">
<meta content="#ffffff" name="theme-color">
<meta content="Jenkins X Explained Part 1 - an integrated CI/CD solution for Kubernetes" name="apple-mobile-web-app-title">
<!-- Twitter Card data -->
<meta content="summary_large_image" name="twitter:card">
<meta content="@JenkinsCI" name="twitter:site">
<meta content="Jenkins X Explained Part 1 - an integrated CI/CD solution for Kubernetes" name="twitter:title">
<meta content="Jenkins – an open source automation server which enables developers around the world to reliably build, test, and deploy their software" name="twitter:description">
<meta content="@JenkinsCI" name="twitter:creator">
<!-- Twitter Summary card images must be at least 120x120px -->
<meta content="/jenkins.io/independent-scrolling-patch/images/logo-title-opengraph.png" name="twitter:image">
<!-- Open Graph data -->
<meta content="Jenkins X Explained Part 1 - an integrated CI/CD solution for Kubernetes" property="og:title">
<meta content="article" property="og:type">
<meta content="https://Vandit1604.github.io/jenkins.io/independent-scrolling-patch/blog/2018/04/16/jenkins-x-explained-part1/" property="og:url">
<meta content="Jenkins – an open source automation server which enables developers around the world to reliably build, test, and deploy their software" name="og:description">
<meta content="Jenkins X Explained Part 1 - an integrated CI/CD solution for Kubernetes" property="og:site_name">
<meta content="/jenkins.io/independent-scrolling-patch/images/logo-title-opengraph.png" name="og:image">
<link href="/jenkins.io/independent-scrolling-patch/assets/bower/bootstrap/css/bootstrap.min.css" media="screen" rel="stylesheet">
<link href="/jenkins.io/independent-scrolling-patch/css/jenkins.css" media="screen" rel="stylesheet">
<link href="/jenkins.io/independent-scrolling-patch/stylesheets/styles.css" media="screen" rel="stylesheet">
<!-- Non-obtrusive CSS styles -->
<link href="/jenkins.io/independent-scrolling-patch/css/footer.css" media="screen" rel="stylesheet">
<link href="/jenkins.io/independent-scrolling-patch/css/font-awesome.min.css" media="screen" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/@docsearch/css@3" rel="stylesheet">
</head>
<body>
<script src="/jenkins.io/independent-scrolling-patch/assets/bower/jquery/jquery.min.js"></script>
<!-- starting partial toptoolbar.html.haml -->
<jio-navbar class="fixed-top" id="ji-toolbar" property="https://www.jenkins.io" showSearchBox=""></jio-navbar>
<!-- Spacing to make the fixed-top sticky navbar not occlude any content below it -->
<div class="pt-4">
&nbsp;
</div>

<!-- ending partial toptoolbar.html.haml -->
<!-- starting partial anchors.html.haml -->
<script>
  window.addEventListener('DOMContentLoaded', function () {
    for (var i = 1 ; i <= 6 ; i ++) {
      anchors.add('.app-post-page h' + i);
    }
  })
</script>

<!-- ending partial anchors.html.haml -->
<article class="container app-post-page">
<div class="app-!-display-flex">
<a class="app-back-link" href="/jenkins.io/independent-scrolling-patch/node/">
Back to blog
</a>
</div>
<h1>
Jenkins X Explained Part 1 - an integrated CI/CD solution for Kubernetes
</h1>
<div class="post-attrs">
<a class="app-author-link" href="/blog/authors/jrawlings/"><div class="app-avatar"><img alt="James Rawlings" class="app-avatar__image" src="/images/avatars/jrawlings.jpeg"></div> James Rawlings</a>
April 16, 2018
<a class="twitter-share-button" data-lang="en" href="https://twitter.com/intent/tweet?text=Jenkins+X+Explained+Part+1%E2%80%8A-%E2%80%8Aan+integrated+CI%2FCD+solution+for+Kubernetes&amp;url=https%3A%2F%2Fwww.jenkins.io%2Fjenkins.io%2Findependent-scrolling-patch%2Fblog%2F2018%2F04%2F16%2Fjenkins-x-explained-part1%2F" rel="noreferrer nofollow" target="_blank">
Tweet
</a>
</div>
<div class="blog-content">
<div class="paragraph">
<p><a href="https://jenkins-x.io">Jenkins X</a> is an opinionated platform for providing CI / CD on top of
<a href="https://kubernetes.io/">Kubernetes</a>.
We’ve chosen a set of core applications that we install and wire together so things work out-of-the-box, providing a
turn key experience. This blog aims to build on previous introductions to Jenkins X and provide a deeper
insight to what you get when you install Jenkins X.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/jenkins-x/install/key.png" alt="key" width="300">
</div>
</div>
<div class="paragraph">
<p>So what happens? After downloading the jx CLI you will now be able to create clusters with public cloud providers
or install onto an existing Kubernetes cluster.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/jenkins-x/install/cloud-providers.png" alt="cloud Providers" width="300">
</div>
</div>
<div class="paragraph">
<p>This command will create a cluster on your cloud provider of choice.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code>&gt; jx create cluster</code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively you can bring your own Kubernetes cluster and install Jenkins X on it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code>&gt; jx install</code></pre>
</div>
</div>
<div class="paragraph">
<p>That said, we’ve found that creating a new cluster on a public cloud such as GKE
is a lot way easier to start as we can be sure of the state of the cluster.
For example we know that storage, networking and loadbalancers will be working as expected.
Creating a cluster on GKE takes only a few minutes so it’s a great way to try things out as well as run your
enterprise workloads.</p>
</div>
<div class="paragraph">
<p>For now lets assume we are using GKE. When <code>jx create cluster</code> has finished you will see some output in the
terminal that also includes the default admin password to use when logging into the core applications below.
There is a flag <code>--default-admin-password</code> you can use to set this password yourself.</p>
</div>
<div class="sect1">
<h2 id="accessing-applications"><a class="anchor" href="#accessing-applications"></a>Accessing applications</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We automatically install an Nginx ingress controller running with an external loadbalancer pointing at it’s
Kubernetes service. We also generate all the Kubernetes Ingress rules using a golang library called
"<a href="https://github.com/jenkins-x/exposecontroller">exposecontroller</a>".
This runs as a Kubernetes Job triggered by a
<a href="https://helm.sh/">Helm</a> hook once any application is installed to the cluster. </p>
</div>
<div class="paragraph">
<p>Using "exposecontroller" means we can control all the ingress rules for an environment using a single set of
configurations, rather than each application needing to know how to expose the kubernetes service to the outside world.
This also means we can easily switch between HTTP and HTTPS plus support intregration with projects like
<a href="https://hub.kubeapps.com/charts/stable/cert-manager">cert-manager</a> for auto generation of signed TLS certificates.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="environments"><a class="anchor" href="#environments"></a>Environments</h2>
<div class="sectionbody">
<div class="paragraph">
<p>One important point to make is Jenkins X aims to use terminology that developers are familiar with. That’s not
to say we are changing Kubernetes fundamentals, it’s more that if you don’t know Kubernetes concepts then we aim
to help you still adopt the cloud technology and pull back the curtain as you gain confidence and experience.
To that point, a core part of Jenkins X are "environments". An environment can have one or more applications running
in it. In Kubernetes term an "environment" maps to the concept of a "namespace" in code.</p>
</div>
<div class="paragraph">
<p>The installation by default created three environments, this is customisable but by default we have a "dev", a "staging"
and a "production environment". To list, select, or switch between these environments run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code>&gt; jx env</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="jenkins-x-core-applications"><a class="anchor" href="#jenkins-x-core-applications"></a>Jenkins X core applications</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In the "dev" environment we have installed a number of core applications we believe are required at a minimum
to start folks off with CI/CD on Kubernetes. We can easily add to these core apps using Jenkins X addons but
for now lets focus on the core apps. Jenkins X comes with configuration that wires these services together,
meaning everything works together straight away. This dramatically reduces the time to get started with Kubernetes
as all the passwords, environment variables and config files are all setup up to work with each other.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Jenkins</strong> — provides both CI and CD automation. There is an effort to decompose Jenkins over time to
become more cloud native and make use of Kubernetes concepts around CRDs, storage and scaling for example.</p>
</li>
<li>
<p><strong>Nexus</strong> — acts as a dependency cache for Nodejs and Java applications to dramatically improve build
times. After an initial build of a SpringBoot application the build time is reduced from 12 mins to 4. We
have not yet but intend to demonstrate swapping this with Artifactory soon.</p>
</li>
<li>
<p><strong>Docker Registry</strong> — an in cluster docker registry where our pipelines push application images, we will
soon switch to using native cloud provider registries such as Google Container Registry, Azure Container
Registry or Amazon Elastic Container Registry (ECR) for example.</p>
</li>
<li>
<p><strong>Chartmuseum</strong> — a registry for publishing Helm charts</p>
</li>
<li>
<p><strong>Monocular</strong> — a UI used for discovering and running Helm charts</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="helm"><a class="anchor" href="#helm"></a>Helm</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We learned a lot in our early days with fabric8 on Kubernetes and there were some projects from the ecosystem
that either weren’t around or (at the time) didn’t work with OpenShift, therefore we were restricted when
making some design decisions. A couple of years on and now with Jenkins X we were able to look at other OSS
projects that have been flourishing, so I was very happy to start looking at <a href="https://helm.sh/">Helm</a>.
Helm is a package manager for Kubernetes and allows easy installation and upgrades of applications.</p>
</div>
<div class="paragraph">
<p>It was pretty clear that for Jenkins to evolve and include deployments to the cloud we should embrace Helm
and provide an opinionated experience that helps teams and developers. The core applications mentioned above
means Jenkins X provides an out of the box integrated CI/CD solution for Helm.</p>
</div>
<div class="paragraph">
<p>We know that helm has limitations but with the work on
<a href="https://github.com/kubernetes-helm/community/blob/master/helm-v3/000-helm-v3.md">Helm 3</a>, the focus of the Kubernetes
sig-apps group, the Kubernetes community and investment we see from key organisations such as Microsoft, we feel Helm
is currently the best way to install and upgrade applications on Kubernetes.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="gitops"><a class="anchor" href="#gitops"></a>GitOps</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We mentioned earlier that we setup three environments by default. What this means is for the staging and production
environments we created:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Kubernetes namespace</p>
</li>
<li>
<p>An environment resource (<a href="https://kubernetes.io/docs/concepts/api-extension/custom-resources/">CustomResourceDefinition</a>)
in the dev environment which includes details of how applications are promoted to it and includes various team
settings.</p>
</li>
<li>
<p>A git repository that we store what applications and their versions should be present in that environment.
These are stored in a Helm requirements.yaml file</p>
</li>
<li>
<p>A Jenkins Pipeline job: explained in more detail below</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cicd-for-environments"><a class="anchor" href="#cicd-for-environments"></a>CI/CD for Environments</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Having a Jenkins Pipeline Job for each environment means that Pull Requests to the git repo trigger a CI
job.  For now that job performs basic validation but in the future will include ‘gates’ to ensure a change to that
environment has passed expected checks such as QA tasks, gain enough approvals from the correct people, etc -
<strong>YES</strong> CI for environments!</p>
</div>
<div class="paragraph">
<p>Once CI checks have passed the new application or version change can be merged. Only users that have karma
can merge the Pull Request and therefore we get RBAC plus traceability for our environment deployments.</p>
</div>
<div class="paragraph">
<p>This means every application manifest, their version and configuration including storage requirements, resource
needs and secrets for your environments are stored in Git repositories. Given a disaster recovery scenario this
is exactly what you want.</p>
</div>
<div class="paragraph">
<p>Did I just say secrets in Git? Yes! We will be providing a nicer experience to helps folks get set up but we
ourselves encrypt our secrets and  store them in Git, then decrypt them when we come to install and upgrade.</p>
</div>
<div class="paragraph">
<p>Here’s our Git repo <a href="https://github.com/jenkins-x/cloud-environments/blob/a1edcc6/env-jx-infra/secrets.yaml" class="bare">https://github.com/jenkins-x/cloud-environments/blob/a1edcc6/env-jx-infra/secrets.yaml</a>.</p>
</div>
<div class="paragraph">
<p>We do all this with the help of a Helm wrapper called <a href="https://github.com/futuresimple/helm-secrets">helm secrets</a>.
I&#8217;m working on a followup blog post with examples, better explanations and how to guides + add better integration
with JX in the coming weeks.</p>
</div>
<hr>
</div>
</div>
<div class="sect1">
<h2 id="fancy-getting-involved"><a class="anchor" href="#fancy-getting-involved"></a>Fancy getting involved?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We mainly hangout in the <a href="https://jenkins-x.io/community/">jenkins-x Kubernetes slack channels</a> and for tips on
being more involved with Jenkins X take a look at our <a href="https://jenkins-x.io/contribute">contributing docs</a></p>
</div>
<div class="paragraph">
<p>If you’ve not already seen it here’s a video showing the create cluster explained in this blog.</p>
</div>
<div class="videoblock">
<div class="content">
<iframe src="https://www.youtube.com/embed/r8-J9Qg-p9U?rel=0" frameborder="0" allowfullscreen></iframe>
</div>
</div>
</div>
</div>
</div>
<ul class="app-tags">
<li>
<a class="app-tags__tag" href="/jenkins.io/independent-scrolling-patch/node/tags/jenkins-x/">
jenkins-x
</a>
</li>
<li>
<a class="app-tags__tag" href="/jenkins.io/independent-scrolling-patch/node/tags/kubernetes/">
kubernetes
</a>
</li>
<li>
<a class="app-tags__tag" href="/jenkins.io/independent-scrolling-patch/node/tags/pipeline/">
pipeline
</a>
</li>
</ul>
<h2>
About the author
</h2>
<!-- starting partial author.html.haml -->
<div class="app-author" id="about-the-author">
<!-- starting partial avatar.html.haml -->
<div class="app-avatar" style="min-width: 64px; width: 25vw; max-width: 128px">
<img alt="James Rawlings" class="app-avatar__image" src="/jenkins.io/independent-scrolling-patch/images/avatars/jrawlings.jpeg">
</div>

<!-- ending partial avatar.html.haml -->
<div class="app-author__content">
<p class="app-author__name">
<a href="/blog/authors/jrawlings/">
James Rawlings
</a>
</p>
<div class="paragraph">
<p>James has a passion for continuous delivery and software automation in general.  Continually looking at
ways to help improve developers experience for the cloud.  James works on the OSS project <a href="https://jenkins-x.io/">Jenkins X</a></p>
</div>
<!-- starting partial social-media-buttons.html.haml -->
<ul class="app-social-media-buttons">
<li>
<a href="https://github.com/rawlingsj" rel="noreferrer noopener" target="_blank">
GitHub
</a>
</li>
<li>
<a href="https://twitter.com/jdrawlings" rel="noreferrer noopener" target="_blank">
Twitter
</a>
</li>
</ul>

<!-- ending partial social-media-buttons.html.haml -->
</div>
</div>

<!-- ending partial author.html.haml -->
<!-- starting partial discuss.html.haml -->

<!-- ending partial discuss.html.haml -->
</article>


<script src="/jenkins.io/independent-scrolling-patch/assets/bower/anchor-js/anchor.min.js"></script>
<script src="/jenkins.io/independent-scrolling-patch/assets/bower/@popperjs/core/umd/popper.min.js"></script>
<script src="/jenkins.io/independent-scrolling-patch/assets/bower/bootstrap/js/bootstrap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/lit@2.5.0/polyfill-support.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@webcomponents/webcomponentsjs@2.6.0/webcomponents-loader.js"></script>
<script data="ionicons" defer="" src="https://cdnjs.cloudflare.com/ajax/libs/ionicons/5.5.2/ionicons/ionicons.esm.js" type="module"></script>
<script data="ionicons" defer="" nomodule="" src="https://cdnjs.cloudflare.com/ajax/libs/ionicons/5.5.2/ionicons/ionicons.js"></script>
<script defer="" src="https://cdn.jsdelivr.net/npm/@jenkinsci/jenkins-io-components/+esm" type="module"></script>
<script defer="" nomodule="" src="https://cdn.jsdelivr.net/npm/@jenkinsci/jenkins-io-components/"></script>
<jio-footer githubBranch="master" githubRepo="jenkins-infra/jenkins.io" property="https://www.jenkins.io" sourcePath="content//blog/2018/04/2018-04-16-jenkins-x-explained-part1.adoc"></jio-footer>
<script>
 (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
 
ga('create', 'UA-000000-0', 'auto');
ga('send', 'pageview');
ga('set', 'anonymizeIp', true);

</script>

<script>
  $(function(){
    var $body = $(document.body);
    $body.on("keydown", function(){
      $body.removeClass("no-outline");
    })
  })
</script>
<script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3" type="text/javascript"></script>
<script type="text/javascript">
docsearch({
  container: document.querySelector('input.searchbox').parentNode,
  indexName: 'jenkins',
  appId: "M6L7Q4Z8HS",
  apiKey: "52f8dfbff76ffd9106f1c68fee16154b",
  algoliaOptions: { 'facetFilters': ["tags:en"] },
  debug: false
});
</script>
</body>
</html>
