<!DOCTYPE html>
<html lang="en">
<head>
<title>
Upgrading to Jenkins LTS 2.222.x
</title>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<meta content="Jenkins – an open source automation server which enables developers around the world to reliably build, test, and deploy their software" name="description">
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
<meta content="ie=edge" http-equiv="x-ua-compatible">
<link href="https://Vandit1604.github.io/jenkins.io/independent-scrolling-patch/doc/upgrade-guide/2.222/" rel="canonical">
<!-- Favicons -->
<link href="/favicon.ico" rel="shortcut icon" type="image/x-icon">
<link href="/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180">
<link href="/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png">
<link href="/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png">
<link href="/site.webmanifest" rel="manifest">
<link color="#5bbad5" href="/safari-pinned-tab.svg" rel="mask-icon">
<meta content="#2b5797" name="msapplication-TileColor">
<meta content="#ffffff" name="theme-color">
<meta content="Upgrading to Jenkins LTS 2.222.x" name="apple-mobile-web-app-title">
<!-- Twitter Card data -->
<meta content="summary_large_image" name="twitter:card">
<meta content="@JenkinsCI" name="twitter:site">
<meta content="Upgrading to Jenkins LTS 2.222.x" name="twitter:title">
<meta content="Jenkins – an open source automation server which enables developers around the world to reliably build, test, and deploy their software" name="twitter:description">
<meta content="@JenkinsCI" name="twitter:creator">
<!-- Twitter Summary card images must be at least 120x120px -->
<meta content="/jenkins.io/independent-scrolling-patch/images/logo-title-opengraph.png" name="twitter:image">
<!-- Open Graph data -->
<meta content="Upgrading to Jenkins LTS 2.222.x" property="og:title">
<meta content="article" property="og:type">
<meta content="https://Vandit1604.github.io/jenkins.io/independent-scrolling-patch/doc/upgrade-guide/2.222/" property="og:url">
<meta content="Jenkins – an open source automation server which enables developers around the world to reliably build, test, and deploy their software" name="og:description">
<meta content="Upgrading to Jenkins LTS 2.222.x" property="og:site_name">
<meta content="/jenkins.io/independent-scrolling-patch/images/logo-title-opengraph.png" name="og:image">
<link href="/jenkins.io/independent-scrolling-patch/assets/bower/bootstrap/css/bootstrap.min.css" media="screen" rel="stylesheet">
<link href="/jenkins.io/independent-scrolling-patch/css/jenkins.css" media="screen" rel="stylesheet">
<link href="/jenkins.io/independent-scrolling-patch/stylesheets/styles.css" media="screen" rel="stylesheet">
<!-- Non-obtrusive CSS styles -->
<link href="/jenkins.io/independent-scrolling-patch/css/footer.css" media="screen" rel="stylesheet">
<link href="/jenkins.io/independent-scrolling-patch/css/font-awesome.min.css" media="screen" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/@docsearch/css@3" rel="stylesheet">
</head>
<body>
<script src="/jenkins.io/independent-scrolling-patch/assets/bower/jquery/jquery.min.js"></script>
<!-- starting partial toptoolbar.html.haml -->
<jio-navbar class="fixed-top" id="ji-toolbar" property="https://www.jenkins.io" showSearchBox=""></jio-navbar>
<!-- Spacing to make the fixed-top sticky navbar not occlude any content below it -->
<div class="pt-4">
&nbsp;
</div>

<!-- ending partial toptoolbar.html.haml -->
<!-- starting partial anchors.html.haml -->
<script>
  window.addEventListener('DOMContentLoaded', function () {
    for (var i = 1 ; i <= 6 ; i ++) {
      anchors.add('.container .row .col-lg-9 h' + i);
    }
  })
</script>

<!-- ending partial anchors.html.haml -->
<div class="container">
<div class="row body flex-lg-nowrap">
<div class="col-lg-3" id="sidebar-menu">
<div class="sidebar-nav tour" id="sidebar-content">
<p>
<a href="/jenkins.io/independent-scrolling-patch/doc/" class="">> User Documentation Home</a>
</p>
<h5>
User Handbook
</h5>
<ul>
<li>
<a href="/jenkins.io/independent-scrolling-patch/doc/book/getting-started/" class="">User Handbook Overview</a>
</li>
<li>
<a href="/jenkins.io/independent-scrolling-patch/doc/book/installing/" class="">Installing Jenkins</a>
</li>
<li>
<a href="/jenkins.io/independent-scrolling-patch/doc/book/using/" class="">Using Jenkins</a>
</li>
<li>
<a href="/jenkins.io/independent-scrolling-patch/doc/book/pipeline/" class="">Pipeline</a>
</li>
<li>
<a href="/jenkins.io/independent-scrolling-patch/doc/book/blueocean/" class="">Blue Ocean</a>
</li>
<li>
<a href="/jenkins.io/independent-scrolling-patch/doc/book/managing/" class="">Managing Jenkins</a>
</li>
<li>
<a href="/jenkins.io/independent-scrolling-patch/doc/book/security/" class="">Securing Jenkins</a>
</li>
<li>
<a href="/jenkins.io/independent-scrolling-patch/doc/book/system-administration/" class="">System Administration</a>
</li>
<li>
<a href="/jenkins.io/independent-scrolling-patch/doc/book/scaling/" class="">Scaling Jenkins</a>
</li>
<li>
<a href="/jenkins.io/independent-scrolling-patch/doc/book/troubleshooting/" class="">Troubleshooting Jenkins</a>
</li>
<li>
<a href="/jenkins.io/independent-scrolling-patch/doc/book/glossary/" class="">Glossary</a>
</li>
</ul>
<h5>
Tutorials
</h5>
<ul>
<li>
<a href="/jenkins.io/independent-scrolling-patch/doc/pipeline/tour/getting-started/" class="">Guided Tour</a>
</li>
<li>
<a href="/jenkins.io/independent-scrolling-patch/doc/tutorials#pipeline" class="">Jenkins Pipeline</a>
</li>
<li>
<a href="/jenkins.io/independent-scrolling-patch/doc/tutorials#tools" class="">Using Build Tools</a>
</li>
</ul>
<h5>
Resources
</h5>
<ul>
<li>
<a href="/jenkins.io/independent-scrolling-patch/doc/book/pipeline/syntax/" class="">Pipeline Syntax reference</a>
</li>
<li>
<a href="/jenkins.io/independent-scrolling-patch/doc/pipeline/steps/" class="">Pipeline Steps reference</a>
</li>
<li>
<a href="/jenkins.io/independent-scrolling-patch/doc/upgrade-guide/" class="active">LTS Upgrade guides</a>
</li>
</ul>
</div>
</div>
<div class="col-lg-9">
<h1>
Upgrading to Jenkins LTS 2.222.x
</h1>
<p>
Each section covers the upgrade from the previous LTS release,
the section on 2.222.1 covers the upgrade from  2.204.6.
</p>
<h3 id="upgrading-to-jenkins-lts-2-222-4">
Upgrading to Jenkins 2.222.4
</h3>
<div class="paragraph">
<p>No notable changes requiring upgrade notes.</p>
</div>
<h3 id="upgrading-to-jenkins-lts-2-222-3">
Upgrading to Jenkins 2.222.3
</h3>
<div class="paragraph">
<p>No notable changes requiring upgrade notes.</p>
</div>
<h3 id="upgrading-to-jenkins-lts-2-222-2">
Upgrading to Jenkins 2.222.2
</h3>
<div class="paragraph">
<p>Jenkins 2.222.2 release was not delivered to the downloads site or to the artifact repository.
No notable changes requiring upgrade notes.</p>
</div>
<h3 id="upgrading-to-jenkins-lts-2-222-1">
Upgrading to Jenkins 2.222.1
</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
2.222.1 and 2.204.6 were released on the same day, and both contain the same security fixes.
This upgrade guide only covers the upgrade from 2.204.6.
See <a href="../2.204/">its upgrade guide</a> for information related to upgrading from 2.204.5, including all information related to security fixes common to both releases.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="global-build-discarder-configuration-lost-on-restart"><a class="anchor" href="#global-build-discarder-configuration-lost-on-restart"></a>Global build discarder configuration lost on restart</h4>
<div class="paragraph">
<p>The global build discarder configuration is saved when the administrator modifies it, but is not loaded when Jenkins restarts.
The default global build discarder configuration is used when Jenkins restarts.</p>
</div>
<div class="paragraph">
<p>On every restart, Jenkins 2.222.1 will start with the default build discarder configured.
That means:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Any custom global build discarder configuration is lost on restart</p>
</li>
<li>
<p>Users who don&#8217;t want background build discarders get the default one</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="old-builds-may-be-deleted-by-global-build-discarders"><a class="anchor" href="#old-builds-may-be-deleted-by-global-build-discarders"></a>Old builds may be deleted by global build discarders</h4>
<div class="paragraph">
<p>Jenkins will by default periodically run build discarders configured in projects, even when no builds are currently running.
<strong>This may delete old builds of projects that have been configured with a more aggressive build discarder configuration since the last build was run.</strong></p>
</div>
<div class="paragraph">
<p>We recommend reviewing project configurations for aggressive build discarder settings before upgrading Jenkins if this change in behavior could result in unexpected data loss.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
We recommend creating backups of your Jenkins configuration and data regularly.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="always-enabled-csrf-protection"><a class="anchor" href="#always-enabled-csrf-protection"></a>Always enabled CSRF Protection</h4>
<div class="paragraph">
<p>Jenkins will automatically enable CSRF protection with the default crumb issuer if it was disabled before.
The ability to not have CSRF protection enabled has been deprecated and removed from the UI.</p>
</div>
<div class="paragraph">
<p>API clients should authenticate using API tokens, which doesn&#8217;t require CSRF crumbs since 2.96.</p>
</div>
<div class="paragraph">
<p>Set the system property <code>hudson.security.csrf.GlobalCrumbIssuerConfiguration.DISABLE_CSRF_PROTECTION</code> to <code>true</code> on startup to disable CSRF protection as well as the configuration UI for it.
This is an unsupported option and may be removed in the future.</p>
</div>
<div class="paragraph">
<p>While Jenkins is running, the configuration UI can be locked/unlocked by running one of the following commands in the script console:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">// to allow disabling
hudson.security.csrf.GlobalCrumbIssuerConfiguration.DISABLE_CSRF_PROTECTION = true

// to force enabled
hudson.security.csrf.GlobalCrumbIssuerConfiguration.DISABLE_CSRF_PROTECTION = false</pre>
</div>
</div>
<div class="paragraph">
<p>This will not immediately change the configured crumb issuer; the <em>Configure Global Security</em> form must be submitted once to change the setting accordingly.</p>
</div>
</div>
<div class="sect3">
<h4 id="removed-agent-protocols"><a class="anchor" href="#removed-agent-protocols"></a>Removed agent protocols</h4>
<div class="paragraph">
<p><em>Inbound TCP Agent Protocol</em> versions 1, 2, and 3 (also known as <em>JNLP Protocols</em> or <em>Java Web Start Protocols</em>) have been removed.
These protocols have been deprecated <a href="/blog/2017/08/11/remoting-update/">since Jenkins 2.75 in 2017</a>.</p>
</div>
<div class="paragraph">
<p><a href="https://plugins.jenkins.io/ssh-slaves">SSH Build Agents Plugin</a> uses the latest <code>agent.jar</code>, but other agent types may need to have their <code>agent.jar</code> updated manually.</p>
</div>
</div>
<div class="sect3">
<h4 id="redesigned-password-form-field"><a class="anchor" href="#redesigned-password-form-field"></a>Redesigned password form field</h4>
<div class="paragraph">
<p>To reduce the number of times that browser password auto-fill will inappropriately fill in saved credentials, the password form fields used in Jenkins configuration forms have been redesigned.
In case this change causes problems, it can be reverted by setting the system property <code>hudson.Functions.hidingPasswordFields</code> to <code>true</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="dangerous-permissions-deprecation"><a class="anchor" href="#dangerous-permissions-deprecation"></a>Dangerous permissions deprecation</h4>
<div class="paragraph">
<p><a href="https://github.com/jenkinsci/jep/blob/master/jep/223/README.adoc">JEP-223</a>, <a href="https://issues.jenkins.io/browse/JENKINS-60266">JENKINS-60266</a></p>
</div>
<div class="paragraph">
<p>In 2017 the <code>Overall/RunScripts</code>, <code>Overall/UploadPlugins</code>, and <code>Overall/ConfigureUpdateCenter</code> were announced as potentially dangerous permissions and hidden from view in <a href="https://plugins.jenkins.io/matrix-auth">Matrix Authorization Plugin</a> and <a href="https://plugins.jenkins.io/role-strategy">Role-based Strategy Plugin</a> to prevent accidental misconfigurations (<a href="/security/advisory/2017-04-10/#matrix-authorization-strategy-plugin-allowed-configuring-dangerous-permissions">2017-04-10 security advisory</a>).</p>
</div>
<div class="paragraph">
<p>These permissions are now deprecated and no longer used in Jenkins core.
Configurations which grant any of these permissions while not granting <code>Overall/Administer</code> will no longer work as before, as Jenkins now requires <code>Overall/Administer</code> permission for features previously governed by these permissions.
Custom authorization strategies that grant <code>Overall/Administer</code> without implying one or more of those permissions will no longer work as expected as a result.
Plugins are also expected to switch from requiring these deprecated permissions to requiring <code>Overall/Administer</code> instead, resulting in further unexpected behavior changes in these configurations.</p>
</div>
</div>
<div class="sect3">
<h4 id="remove-network-discovery-services"><a class="anchor" href="#remove-network-discovery-services"></a>Remove network discovery services</h4>
<div class="paragraph">
<p><a href="https://issues.jenkins.io/browse/JENKINS-33596">JENKINS-33596</a>, <a href="https://issues.jenkins.io/browse/JENKINS-60913">JENKINS-60913</a></p>
</div>
<div class="paragraph">
<p>Network discovery features, DNS multicast and UDP broadcast, were previously disabled and discouraged because of various problems, including <a href="/security/advisory/2020-01-29/#SECURITY-1641">SECURITY-1641 in Jenkins Security Advisory 2020-01-29</a>.
They have now been removed without replacement.</p>
</div>
<div class="paragraph">
<p><a href="https://plugins.jenkins.io/swarm">Swarm Plugin</a> needs to be updated to version 3.18 or above, otherwise the error described in <a href="https://issues.jenkins.io/browse/JENKINS-61029">JENKINS-61029</a> occurs. This also removes the network discovery capability of the plugin.</p>
</div>
</div>
<div class="sect3">
<h4 id="header-and-breadcrumb-layout-improvements"><a class="anchor" href="#header-and-breadcrumb-layout-improvements"></a>Header and Breadcrumb Layout Improvements</h4>
<div class="paragraph">
<p><a href="https://github.com/jenkinsci/jenkins/pull/4463">PR-4463</a>, <a href="https://issues.jenkins.io/browse/JENKINS-60920">JENKINS-60920</a></p>
</div>
<div class="paragraph">
<p>Instances with plugins that depend on specific details of the Jenkins UI (like <a href="https://plugins.jenkins.io/simple-theme-plugin">Simple Theme plugin</a>) may experience issues with this release and may need to be updated.
In the case of the Simple Theme plugin, theme maintainers may need to adapt the theme to the UI changes.</p>
</div>
</div>
<div class="sect3">
<h4 id="removal-of-jenkins-slave-xml-resource-file"><a class="anchor" href="#removal-of-jenkins-slave-xml-resource-file"></a>Removal of jenkins-slave.xml resource file</h4>
<div class="paragraph">
<p><a href="https://github.com/jenkinsci/jenkins/pull/4330">PR-4330</a></p>
</div>
<div class="paragraph">
<p>The resource file <code>jenkins-slave.xml</code> has been removed as it&#8217;s been unused in Jenkins core since 2017.
<a href="https://plugins.jenkins.io/windows-slaves">WMI Windows Agents Plugin</a> needs to be updated to version 1.3.1 or newer (released in March 2017).</p>
</div>
</div>

</div>
</div>
</div>


<script src="/jenkins.io/independent-scrolling-patch/assets/bower/anchor-js/anchor.min.js"></script>
<script src="/jenkins.io/independent-scrolling-patch/assets/bower/@popperjs/core/umd/popper.min.js"></script>
<script src="/jenkins.io/independent-scrolling-patch/assets/bower/bootstrap/js/bootstrap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/lit@2.5.0/polyfill-support.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@webcomponents/webcomponentsjs@2.6.0/webcomponents-loader.js"></script>
<script data="ionicons" defer="" src="https://cdnjs.cloudflare.com/ajax/libs/ionicons/5.5.2/ionicons/ionicons.esm.js" type="module"></script>
<script data="ionicons" defer="" nomodule="" src="https://cdnjs.cloudflare.com/ajax/libs/ionicons/5.5.2/ionicons/ionicons.js"></script>
<script defer="" src="https://cdn.jsdelivr.net/npm/@jenkinsci/jenkins-io-components/+esm" type="module"></script>
<script defer="" nomodule="" src="https://cdn.jsdelivr.net/npm/@jenkinsci/jenkins-io-components/"></script>
<jio-footer githubBranch="master" githubRepo="jenkins-infra/jenkins.io" property="https://www.jenkins.io" sourcePath="content//doc/upgrade-guide.html.haml"></jio-footer>
<script>
 (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
 
ga('create', 'UA-000000-0', 'auto');
ga('send', 'pageview');
ga('set', 'anonymizeIp', true);

</script>

<script>
  $(function(){
    var $body = $(document.body);
    $body.on("keydown", function(){
      $body.removeClass("no-outline");
    })
  })
</script>
<script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3" type="text/javascript"></script>
<script type="text/javascript">
docsearch({
  container: document.querySelector('input.searchbox').parentNode,
  indexName: 'jenkins',
  appId: "M6L7Q4Z8HS",
  apiKey: "52f8dfbff76ffd9106f1c68fee16154b",
  algoliaOptions: { 'facetFilters': ["tags:en"] },
  debug: false
});
</script>
</body>
</html>
