<!DOCTYPE html>
<html lang="en">
<head>
<title>
Opinionated Kubernetes and Jenkins X
</title>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<meta content="Jenkins – an open source automation server which enables developers around the world to reliably build, test, and deploy their software" name="description">
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
<meta content="ie=edge" http-equiv="x-ua-compatible">
<link href="https://Vandit1604.github.io/jenkins.io/independent-scrolling-patch/blog/2018/04/10/opinionated-cd-jenkins-x/" rel="canonical">
<!-- Favicons -->
<link href="/favicon.ico" rel="shortcut icon" type="image/x-icon">
<link href="/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180">
<link href="/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png">
<link href="/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png">
<link href="/site.webmanifest" rel="manifest">
<link color="#5bbad5" href="/safari-pinned-tab.svg" rel="mask-icon">
<meta content="#2b5797" name="msapplication-TileColor">
<meta content="#ffffff" name="theme-color">
<meta content="Opinionated Kubernetes and Jenkins X" name="apple-mobile-web-app-title">
<!-- Twitter Card data -->
<meta content="summary_large_image" name="twitter:card">
<meta content="@JenkinsCI" name="twitter:site">
<meta content="Opinionated Kubernetes and Jenkins X" name="twitter:title">
<meta content="Jenkins – an open source automation server which enables developers around the world to reliably build, test, and deploy their software" name="twitter:description">
<meta content="@JenkinsCI" name="twitter:creator">
<!-- Twitter Summary card images must be at least 120x120px -->
<meta content="/jenkins.io/independent-scrolling-patch/images/logo-title-opengraph.png" name="twitter:image">
<!-- Open Graph data -->
<meta content="Opinionated Kubernetes and Jenkins X" property="og:title">
<meta content="article" property="og:type">
<meta content="https://Vandit1604.github.io/jenkins.io/independent-scrolling-patch/blog/2018/04/10/opinionated-cd-jenkins-x/" property="og:url">
<meta content="Jenkins – an open source automation server which enables developers around the world to reliably build, test, and deploy their software" name="og:description">
<meta content="Opinionated Kubernetes and Jenkins X" property="og:site_name">
<meta content="/jenkins.io/independent-scrolling-patch/images/logo-title-opengraph.png" name="og:image">
<link href="/jenkins.io/independent-scrolling-patch/assets/bower/bootstrap/css/bootstrap.min.css" media="screen" rel="stylesheet">
<link href="/jenkins.io/independent-scrolling-patch/css/jenkins.css" media="screen" rel="stylesheet">
<link href="/jenkins.io/independent-scrolling-patch/stylesheets/styles.css" media="screen" rel="stylesheet">
<!-- Non-obtrusive CSS styles -->
<link href="/jenkins.io/independent-scrolling-patch/css/footer.css" media="screen" rel="stylesheet">
<link href="/jenkins.io/independent-scrolling-patch/css/font-awesome.min.css" media="screen" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/@docsearch/css@3" rel="stylesheet">
</head>
<body>
<script src="/jenkins.io/independent-scrolling-patch/assets/bower/jquery/jquery.min.js"></script>
<!-- starting partial toptoolbar.html.haml -->
<jio-navbar class="fixed-top" id="ji-toolbar" property="https://www.jenkins.io" showSearchBox=""></jio-navbar>
<!-- Spacing to make the fixed-top sticky navbar not occlude any content below it -->
<div class="pt-4">
&nbsp;
</div>

<!-- ending partial toptoolbar.html.haml -->
<!-- starting partial anchors.html.haml -->
<script>
  window.addEventListener('DOMContentLoaded', function () {
    for (var i = 1 ; i <= 6 ; i ++) {
      anchors.add('.app-post-page h' + i);
    }
  })
</script>

<!-- ending partial anchors.html.haml -->
<article class="container app-post-page">
<div class="app-!-display-flex">
<a class="app-back-link" href="/jenkins.io/independent-scrolling-patch/node/">
Back to blog
</a>
</div>
<h1>
Opinionated Kubernetes and Jenkins X
</h1>
<div class="post-attrs">
<a class="app-author-link" href="/blog/authors/michaelneale/"><div class="app-avatar"><img alt="Michael Neale" class="app-avatar__image" src="/images/avatars/michaelneale.jpg"></div> Michael Neale</a>
April 10, 2018
<a class="twitter-share-button" data-lang="en" href="https://twitter.com/intent/tweet?text=Opinionated+Kubernetes+and+Jenkins+X&amp;url=https%3A%2F%2Fwww.jenkins.io%2Fjenkins.io%2Findependent-scrolling-patch%2Fblog%2F2018%2F04%2F10%2Fopinionated-cd-jenkins-x%2F" rel="noreferrer nofollow" target="_blank">
Tweet
</a>
</div>
<div class="blog-content">
<div class="paragraph">
<p>I
<a href="https://www.cloudbees.com/blog/all-in-on-kubernetes-for-developers">recently wrote</a>
about how all the cloud platforms are all in Kubernetes and so are developers.
It is an exciting time, but the problem for many is that this is
a huge blank sheet of paper for how to build and deploy applications.
A white space, a void, a limitless canvas of possibilities.
Insert metaphors here.</p>
</div>
<div class="paragraph">
<p>The problem, as you may guess, is that few people really like or are able to start with a blank canvas.
I know I prefer to start with something working and iterate towards a solution,
or be given some rails to stay on (again with the metaphors).</p>
</div>
<div class="paragraph">
<p>That&#8217;s where the <a href="https://jenkins-x.io/">Jenkins X</a> project comes in.
Jenkins X is a Kubernetes-native continuous integration and continuous delivery platform
for developing cloud native applications that was recently introduced as a
<a href="https://github.com/jenkinsci/jep/blob/master/jep/400/README.adoc">Jenkins Enhancement Proposal</a>,
sponsored by <a href="https://twitter.com/jstrachan">James Strachan</a>.</p>
</div>
<div class="paragraph">
<p>There is a lot to take in but at it’s heart,
this is an open source opinionated way to do continuous delivery with Kubernetes,
natively, without necessarily having to learn all the things I talked about in my last blog post.
I shall attempt to explain what this is all about and why it matters to developers.
As someone said on the jenkins-dev mailing list
“We have the two glued together with baling wire and twine” -
Jenkins X aims to simplify how to work with continuous delivery and Kubernetes.</p>
</div>
<div class="paragraph">
<p>First and most importantly, let&#8217;s see the logo:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/logos/jenkins-x/jenkins-x.svg" alt="Jenkins X Logo" width="200">
</div>
</div>
<div class="paragraph">
<p>You can see the nautical theme leaking through (and Kubernetes).
Whilst it is called Jenkins X, it is about quite a lot more than Jenkins.</p>
</div>
<div class="sect1">
<h2 id="jenkins-x-makes-decisions-for-you"><a class="anchor" href="#jenkins-x-makes-decisions-for-you"></a>Jenkins X makes decisions for you</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Jenkins X presents itself to you initially as a handy sleek command line
(a native binary you can install called jx - the debate is on as to how pronounce it).
Let’s take a tour (sail?):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code>&gt; jx import my-app</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you have an existing project, this will detect what type of project it is, build a pipeline for you (and a bunch of Kubernetes things, like Helm Charts), add it to your project and set it up in GitHub, WebHooks and all, build the project (run the pipeline) and deploy a version to a “staging” environment.</p>
</div>
<div class="paragraph">
<p>If it looks ok, you can promote it to production:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code>&gt; jx promote --env production --version 1.0.1 my-app</code></pre>
</div>
</div>
<div class="paragraph">
<p>If something went wrong in production, you can roll back an app to any version (the version numbers are made for you):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code>&gt; jx promote --env production --version 1.0.0 my-app
&gt; jx get apps # list versions</code></pre>
</div>
</div>
<div class="paragraph">
<p>An <strong>environment</strong> is a well-established concept for web developers using
continuous delivery: out of the box Jenkins X makes three of them for you
(dev, staging and production), but you can make as many as you like.
Environments have rules around how things are promoted into them
(and they also have their own extensible pipelines,
but you can just use them as-is to start).</p>
</div>
<div class="paragraph">
<p>You can also create a Spring Boot microservice app:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code>&gt; jx create spring</code></pre>
</div>
</div>
<div class="paragraph">
<p>Answer a few questions and it will set everything up for you.</p>
</div>
<div class="paragraph">
<p>Any changes you make to your app automatically are built,
and if the build looks good, they go through to the staging environment.
WebHooks are setup for you (if you are using GitHub) to smooth this over.</p>
</div>
<div class="paragraph">
<p>For those looking at starting from pre-made apps, there are "quickstarts":</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code>&gt; jx create quickstart</code></pre>
</div>
</div>
<div class="paragraph">
<p>They are based on a growing set of starter apps, in a variety of languages and tech stacks.</p>
</div>
<div class="paragraph">
<p><strong>Review apps</strong> for your changes: Each pull request is built/tested,
and a “review app” is made available in a temporary environment.
That means each proposed change, before it goes to the default branch (master),
has an environment made (temporary) that it can be tried out in.
In GitHub, this shows up as a comment in the pull request:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/jenkins-x/comment-in-github-pull-request_0.png" alt="Comment in a GitHub Pull Request" width="550">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="project-type-detection"><a class="anchor" href="#project-type-detection"></a>Project type detection</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As you can see, so far there is no editing or manual creation of pipelines,
or scripting or setup, just importing or creating your app and go.
This is powered by
<a href="https://github.com/jenkins-x/draft-repo/tree/master/packs">Draft “packs”</a>
(a handy project that came out of Azure).
 What you end up with is a Jenkinsfile in your project repository.
 You may want to edit it one day, or you may be happy with it as is!
 Jenkins is famous for being un-opinionated in what you do,
 but Jenkins X has strong opinions (but you can extend and customise).</p>
</div>
<div class="literalblock">
<div class="content">
<pre class="nowrap">image::/images/jenkins-x/draft-logo.png[Draft Logo, width=300]</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="deploying-or-promoting-to-environments"><a class="anchor" href="#deploying-or-promoting-to-environments"></a>Deploying or promoting to environments</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Deploying happens via pipelines behind the scenes -
when a change is pushed, or a version promoted.
You don’t need to directly interact with Kubernetes if you don’t need to.
A tool called Helm does the heavy lifting:
Helm is used to package and perform installations and upgrade for your apps.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/jenkins-x/helm-logo.png" alt="Helm Logo" width="156">
</div>
</div>
<div class="paragraph">
<p>There is a little more magic going on here with environments, which you don’t see at first.
Each environment, for a team, is represented by a Git repository behind the scenes.
Configuration as code is a well-established best practice these days,
so why not use it to track deployments and initiate deployments.
I also mentioned in my previous post how declarative Kubernetes is:
it is perfect for keeping all config in a repository, of the desired system state.</p>
</div>
<div class="paragraph">
<p>Each promotion is actually a pull request to a per-environment repository.
This repository is made and managed for you (and kept outside of the
main application code repository), you don’t have to look at it,
but you can extend things there should you need to.
Specific environment repositories may have different access rules,
or be controlled by a different team (perhaps even deploy to a different cluster).
Some have coined the term for this as “GitOps.”
I first came across this concept on a
<a href="https://www.weave.works/blog/gitops-operations-by-pull-request">WeaveWorks blog</a>.</p>
</div>
<div class="paragraph">
<p>I’ll try and explain this one with a diagram:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/jenkins-x/gitops-flow.png" alt="GitOps Workflow" width="600">
</div>
</div>
<div class="paragraph">
<p>The pipeline is actually split in the middle.
On the left is the more familiar continuous integration pipeline.
This works on pull requests, pre-release version of things
and is all about testing(automated and manual review).
The source of truth for this is the configuration in the
applications repository: branches, pull requests and so on.</p>
</div>
<div class="paragraph">
<p>The right-hand side is the continuous delivery pipeline.
This kicks in when the application is ready to be updated with a new release.
This is the “GitOps” repo behind the scenes that controls the state of things in Kubernetes.
A promotion on this side is a pull request, and then a merge,
from the staging repository to the production repository.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="installing-jenkins-x"><a class="anchor" href="#installing-jenkins-x"></a>Installing Jenkins X</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The jx command line has a jx install command that installs it into a Kubernetes cluster.</p>
</div>
<div class="paragraph">
<p>The best experience initially is using Google’s excellent GKE service:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code>&gt; jx create cluster gke</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will ask a few questions, and go and set it all up for you in a
cluster set aside for Jenkins X (recommended).
Jenkins X runs entirely as services on top of a Kubernetes cluster.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code>&gt; jx install</code></pre>
</div>
</div>
<div class="paragraph">
<p>Is designed to work with a Kubernetes cluster (if it already exists,
recommendation is to have a cluster put aside for Jenkins X if possible).
Amazon EKS support is coming (mostly it is around testing),
that service is in beta/early access so it is still a work in progress,
as is Microsoft Azures excellent AKS service.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="so-where-is-jenkins"><a class="anchor" href="#so-where-is-jenkins"></a>So where is Jenkins?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Good question, thanks for asking. Well, it is behind the scenes.
As you have seen, there was no direct interaction with Jenkins,
but it is there, running the pipelines for continuous integration and
continuous delivery of the respective repositories, and orchestrating things with Kubernetes.</p>
</div>
<div class="paragraph">
<p>If you run <code>jx get pipelines</code> you can see URLs to the various pipelines
that have been setup for you are part of interacting with Jenkins X.</p>
</div>
<div class="paragraph">
<p>By the way,
<a href="/blog/2018/03/19/introducing-jenkins-x/">James Strachan has written an extensive blog on jenkins.io</a>
that really explores the Jenkins X project in-depth.
Once you finish reading this blog, take a stroll on over there and read James'.
He also provides several ways you can get involved in the project.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="what-else-can-i-do-with-the-command-line"><a class="anchor" href="#what-else-can-i-do-with-the-command-line"></a>What else can I do with the command line?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Lots, the jx command line has built in help:</p>
</div>
<div class="paragraph">
<p><code>jx open</code></p>
</div>
<div class="ulist">
<ul>
<li>
<p>open apps, services or pipelines in your browser</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>jx activity</code></p>
</div>
<div class="ulist">
<ul>
<li>
<p>explains how things got to where they are, a history</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>jx get environments</code></p>
</div>
<div class="ulist">
<ul>
<li>
<p>list environments</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>jx get apps</code></p>
</div>
<div class="ulist">
<ul>
<li>
<p>show the state of applications, what versions are in what environments.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="whats-next"><a class="anchor" href="#whats-next"></a>What’s next</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There is a whole lot more to this, and lots more moving parts and services
that are set up for you that are very useful, but it is best to head over
to <a href="https://jenkins-x.io/">jenkins-x.io</a> and have a look.</p>
</div>
<div class="paragraph">
<p>This project is obviously in early stages (it is stll a Draft JEP after all) and there is lots happening.
Check out the <a href="https://jenkins-x.io/community/">Jenkins X community</a>
if you want to chat on slack, IRC, issues or email.
Also, read the
<a href="https://github.com/jenkinsci/jep/blob/master/jep/400/README.adoc">Jenkins Enhancement Proposal doc</a>.</p>
</div>
</div>
</div>
</div>
<ul class="app-tags">
<li>
<a class="app-tags__tag" href="/jenkins.io/independent-scrolling-patch/node/tags/jenkins-x/">
jenkins-x
</a>
</li>
<li>
<a class="app-tags__tag" href="/jenkins.io/independent-scrolling-patch/node/tags/kubernetes/">
kubernetes
</a>
</li>
<li>
<a class="app-tags__tag" href="/jenkins.io/independent-scrolling-patch/node/tags/pipeline/">
pipeline
</a>
</li>
</ul>
<h2>
About the author
</h2>
<!-- starting partial author.html.haml -->
<div class="app-author" id="about-the-author">
<!-- starting partial avatar.html.haml -->
<div class="app-avatar" style="min-width: 64px; width: 25vw; max-width: 128px">
<img alt="Michael Neale" class="app-avatar__image" src="/jenkins.io/independent-scrolling-patch/images/avatars/michaelneale.jpg">
</div>

<!-- ending partial avatar.html.haml -->
<div class="app-author__content">
<p class="app-author__name">
<a href="/blog/authors/michaelneale/">
Michael Neale
</a>
</p>
<div class="paragraph">
<p>Michael is a CD enthusiast with a interest in User Experience.
He is a co-founder of CloudBees and a long time OSS developer, and can often be found
lurking around the jenkins-dev mailing list or #jenkins on irc (same nick as twitter name).
Before CloudBees he worked at Red Hat.</p>
</div>
<!-- starting partial social-media-buttons.html.haml -->
<ul class="app-social-media-buttons">
<li>
<a href="https://github.com/michaelneale" rel="noreferrer noopener" target="_blank">
GitHub
</a>
</li>
<li>
<a href="https://twitter.com/michaelneale" rel="noreferrer noopener" target="_blank">
Twitter
</a>
</li>
</ul>

<!-- ending partial social-media-buttons.html.haml -->
</div>
</div>

<!-- ending partial author.html.haml -->
<!-- starting partial discuss.html.haml -->

<!-- ending partial discuss.html.haml -->
</article>


<script src="/jenkins.io/independent-scrolling-patch/assets/bower/anchor-js/anchor.min.js"></script>
<script src="/jenkins.io/independent-scrolling-patch/assets/bower/@popperjs/core/umd/popper.min.js"></script>
<script src="/jenkins.io/independent-scrolling-patch/assets/bower/bootstrap/js/bootstrap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/lit@2.5.0/polyfill-support.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@webcomponents/webcomponentsjs@2.6.0/webcomponents-loader.js"></script>
<script data="ionicons" defer="" src="https://cdnjs.cloudflare.com/ajax/libs/ionicons/5.5.2/ionicons/ionicons.esm.js" type="module"></script>
<script data="ionicons" defer="" nomodule="" src="https://cdnjs.cloudflare.com/ajax/libs/ionicons/5.5.2/ionicons/ionicons.js"></script>
<script defer="" src="https://cdn.jsdelivr.net/npm/@jenkinsci/jenkins-io-components/+esm" type="module"></script>
<script defer="" nomodule="" src="https://cdn.jsdelivr.net/npm/@jenkinsci/jenkins-io-components/"></script>
<jio-footer githubBranch="master" githubRepo="jenkins-infra/jenkins.io" property="https://www.jenkins.io" sourcePath="content//blog/2018/04/2018-04-10-opinionated-cd-jenkins-x.adoc"></jio-footer>
<script>
 (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
 
ga('create', 'UA-000000-0', 'auto');
ga('send', 'pageview');
ga('set', 'anonymizeIp', true);

</script>

<script>
  $(function(){
    var $body = $(document.body);
    $body.on("keydown", function(){
      $body.removeClass("no-outline");
    })
  })
</script>
<script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3" type="text/javascript"></script>
<script type="text/javascript">
docsearch({
  container: document.querySelector('input.searchbox').parentNode,
  indexName: 'jenkins',
  appId: "M6L7Q4Z8HS",
  apiKey: "52f8dfbff76ffd9106f1c68fee16154b",
  algoliaOptions: { 'facetFilters': ["tags:en"] },
  debug: false
});
</script>
</body>
</html>
