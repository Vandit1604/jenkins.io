<!DOCTYPE html>
<html lang="en">
<head>
<title>
Jenkins X: Announcing CVE docker image analysis with Anchore
</title>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<meta content="Jenkins – an open source automation server which enables developers around the world to reliably build, test, and deploy their software" name="description">
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
<meta content="ie=edge" http-equiv="x-ua-compatible">
<link href="https://Vandit1604.github.io/jenkins.io/independent-scrolling-patch/blog/2018/05/08/jenkins-x-anchore/" rel="canonical">
<!-- Favicons -->
<link href="/favicon.ico" rel="shortcut icon" type="image/x-icon">
<link href="/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180">
<link href="/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png">
<link href="/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png">
<link href="/site.webmanifest" rel="manifest">
<link color="#5bbad5" href="/safari-pinned-tab.svg" rel="mask-icon">
<meta content="#2b5797" name="msapplication-TileColor">
<meta content="#ffffff" name="theme-color">
<meta content="Jenkins X: Announcing CVE docker image analysis with Anchore" name="apple-mobile-web-app-title">
<!-- Twitter Card data -->
<meta content="summary_large_image" name="twitter:card">
<meta content="@JenkinsCI" name="twitter:site">
<meta content="Jenkins X: Announcing CVE docker image analysis with Anchore" name="twitter:title">
<meta content="Jenkins – an open source automation server which enables developers around the world to reliably build, test, and deploy their software" name="twitter:description">
<meta content="@JenkinsCI" name="twitter:creator">
<!-- Twitter Summary card images must be at least 120x120px -->
<meta content="/jenkins.io/independent-scrolling-patch/images/logo-title-opengraph.png" name="twitter:image">
<!-- Open Graph data -->
<meta content="Jenkins X: Announcing CVE docker image analysis with Anchore" property="og:title">
<meta content="article" property="og:type">
<meta content="https://Vandit1604.github.io/jenkins.io/independent-scrolling-patch/blog/2018/05/08/jenkins-x-anchore/" property="og:url">
<meta content="Jenkins – an open source automation server which enables developers around the world to reliably build, test, and deploy their software" name="og:description">
<meta content="Jenkins X: Announcing CVE docker image analysis with Anchore" property="og:site_name">
<meta content="/jenkins.io/independent-scrolling-patch/images/logo-title-opengraph.png" name="og:image">
<link href="/jenkins.io/independent-scrolling-patch/assets/bower/bootstrap/css/bootstrap.min.css" media="screen" rel="stylesheet">
<link href="/jenkins.io/independent-scrolling-patch/css/jenkins.css" media="screen" rel="stylesheet">
<link href="/jenkins.io/independent-scrolling-patch/stylesheets/styles.css" media="screen" rel="stylesheet">
<!-- Non-obtrusive CSS styles -->
<link href="/jenkins.io/independent-scrolling-patch/css/footer.css" media="screen" rel="stylesheet">
<link href="/jenkins.io/independent-scrolling-patch/css/font-awesome.min.css" media="screen" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/@docsearch/css@3" rel="stylesheet">
</head>
<body>
<script src="/jenkins.io/independent-scrolling-patch/assets/bower/jquery/jquery.min.js"></script>
<!-- starting partial toptoolbar.html.haml -->
<jio-navbar class="fixed-top" id="ji-toolbar" property="https://www.jenkins.io" showSearchBox=""></jio-navbar>
<!-- Spacing to make the fixed-top sticky navbar not occlude any content below it -->
<div class="pt-4">
&nbsp;
</div>

<!-- ending partial toptoolbar.html.haml -->
<!-- starting partial anchors.html.haml -->
<script>
  window.addEventListener('DOMContentLoaded', function () {
    for (var i = 1 ; i <= 6 ; i ++) {
      anchors.add('.app-post-page h' + i);
    }
  })
</script>

<!-- ending partial anchors.html.haml -->
<article class="container app-post-page">
<div class="app-!-display-flex">
<a class="app-back-link" href="/jenkins.io/independent-scrolling-patch/node/">
Back to blog
</a>
</div>
<h1>
Jenkins X: Announcing CVE docker image analysis with Anchore
</h1>
<div class="post-attrs">
<a class="app-author-link" href="/blog/authors/jrawlings/"><div class="app-avatar"><img alt="James Rawlings" class="app-avatar__image" src="/images/avatars/jrawlings.jpeg"></div> James Rawlings</a>
May 08, 2018
<a class="twitter-share-button" data-lang="en" href="https://twitter.com/intent/tweet?text=Jenkins+X%3A+Announcing+CVE+docker+image+analysis+with+Anchore&amp;url=https%3A%2F%2Fwww.jenkins.io%2Fjenkins.io%2Findependent-scrolling-patch%2Fblog%2F2018%2F05%2F08%2Fjenkins-x-anchore%2F" rel="noreferrer nofollow" target="_blank">
Tweet
</a>
</div>
<div class="blog-content">
<div class="paragraph">
<p><a href="https://anchore.io/">Anchore</a> provides docker image analysis for user defined acceptance policies to allow automated image validation and acceptance.</p>
</div>
<div class="paragraph">
<p>As developers we would like to know if a change we are proposing introduces a
<a href="https://en.wikipedia.org/wiki/Common_Vulnerabilities_and_Exposures">Common Vulnerability and Exposure (CVE)</a>.
As operators we would like to know what running applications are affected if a new CVE is discovered.</p>
</div>
<div class="paragraph">
<p>Now in Jenkins X pipelines, if we find an
<a href="https://anchore.com/engine/">Anchore engine</a> service running we will add the preview and release images to be analyzed.
This means we can look at any environment including previews (created from Pull Requests)
to see if your application contains a CVE.</p>
</div>
<div class="sect1">
<h2 id="upgrade"><a class="anchor" href="#upgrade"></a>Upgrade</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Start by checking your current Jenkins X version:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash">jx version</code></pre>
</div>
</div>
<div class="paragraph">
<p>If your Jenkins X platform is older than 0.0.903, then first you will need to upgrade to at least 0.0.922:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash">jx upgrade cli
jx upgrade platform</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="install-addon"><a class="anchor" href="#install-addon"></a>Install addon</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can install the
<a href="https://hub.kubeapps.com/charts/stable/anchore-engine">Anchore engine addon</a>
when you are in your Jenkins X team <code>home</code> environment.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash">jx <span class="nb">env </span>dev
jx create addon anchore</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will install the engine in a separate <code>anchore</code> namespace
and create a service link in the current team <code>home</code> environment
so our pipeline builds can add docker images to Anchore for analysis.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="create-an-application"><a class="anchor" href="#create-an-application"></a>Create an application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can now create a new quickstart:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash">jx create quickstart</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="list-any-cves"><a class="anchor" href="#list-any-cves"></a>List any CVEs</h3>
<div class="paragraph">
<p>Once the build has run you will be able to check for CVEs in any environment including previews created for pull requests.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash">jx get cve <span class="nt">--environment</span> staging</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="demo"><a class="anchor" href="#demo"></a>Demo</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Here&#8217;s a 4 minute video that demonstrates the steps above:</p>
</div>
<div class="videoblock">
<div class="content">
<iframe src="https://www.youtube.com/embed/rB8Sw0FqCQk?rel=0" frameborder="0" allowfullscreen></iframe>
</div>
</div>
<div class="sect2">
<h3 id="upgrading-existing-pipelines"><a class="anchor" href="#upgrading-existing-pipelines"></a>Upgrading existing pipelines</h3>
<div class="paragraph">
<p>If you have an existing application pipeline and and want enable image analysis you can update your Jenkinsfile,
in the <code>preview</code> stage after the skaffold step add the line</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="groovy"><span class="n">sh</span> <span class="s2">"jx step validate --min-jx-version 1.2.36"</span>
<span class="n">sh</span> <span class="s2">"jx step post build --image \$JENKINS_X_DOCKER_REGISTRY_SERVICE_HOST:\$JENKINS_X_DOCKER_REGISTRY_SERVICE_PORT/$ORG/$APP_NAME:$PREVIEW_VERSION"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In the <code>master</code> stage the add this line after the skaffold step</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="groovy"><span class="n">sh</span> <span class="s2">"jx step validate --min-jx-version 1.2.36"</span>
<span class="n">sh</span> <span class="s2">"jx step post build --image \$JENKINS_X_DOCKER_REGISTRY_SERVICE_HOST:\$JENKINS_X_DOCKER_REGISTRY_SERVICE_PORT/$ORG/$APP_NAME:\$(cat VERSION)"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>For any questions please find us - we mainly hang out on Slack at
<a href="https://kubernetes.slack.com/messages/C9LTHT2BB">#jenkins-x-dev</a> - or see
<a href="https://jenkins-x.io/community/">jenkins-x.io/community</a> for other channels.</p>
</div>
</div>
</div>
</div>
</div>
<ul class="app-tags">
<li>
<a class="app-tags__tag" href="/jenkins.io/independent-scrolling-patch/node/tags/jenkins-x/">
jenkins-x
</a>
</li>
<li>
<a class="app-tags__tag" href="/jenkins.io/independent-scrolling-patch/node/tags/kubernetes/">
kubernetes
</a>
</li>
<li>
<a class="app-tags__tag" href="/jenkins.io/independent-scrolling-patch/node/tags/pipeline/">
pipeline
</a>
</li>
</ul>
<h2>
About the author
</h2>
<!-- starting partial author.html.haml -->
<div class="app-author" id="about-the-author">
<!-- starting partial avatar.html.haml -->
<div class="app-avatar" style="min-width: 64px; width: 25vw; max-width: 128px">
<img alt="James Rawlings" class="app-avatar__image" src="/jenkins.io/independent-scrolling-patch/images/avatars/jrawlings.jpeg">
</div>

<!-- ending partial avatar.html.haml -->
<div class="app-author__content">
<p class="app-author__name">
<a href="/blog/authors/jrawlings/">
James Rawlings
</a>
</p>
<div class="paragraph">
<p>James has a passion for continuous delivery and software automation in general.  Continually looking at
ways to help improve developers experience for the cloud.  James works on the OSS project <a href="https://jenkins-x.io/">Jenkins X</a></p>
</div>
<!-- starting partial social-media-buttons.html.haml -->
<ul class="app-social-media-buttons">
<li>
<a href="https://github.com/rawlingsj" rel="noreferrer noopener" target="_blank">
GitHub
</a>
</li>
<li>
<a href="https://twitter.com/jdrawlings" rel="noreferrer noopener" target="_blank">
Twitter
</a>
</li>
</ul>

<!-- ending partial social-media-buttons.html.haml -->
</div>
</div>

<!-- ending partial author.html.haml -->
<!-- starting partial discuss.html.haml -->

<!-- ending partial discuss.html.haml -->
</article>


<script src="/jenkins.io/independent-scrolling-patch/assets/bower/anchor-js/anchor.min.js"></script>
<script src="/jenkins.io/independent-scrolling-patch/assets/bower/@popperjs/core/umd/popper.min.js"></script>
<script src="/jenkins.io/independent-scrolling-patch/assets/bower/bootstrap/js/bootstrap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/lit@2.5.0/polyfill-support.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@webcomponents/webcomponentsjs@2.6.0/webcomponents-loader.js"></script>
<script data="ionicons" defer="" src="https://cdnjs.cloudflare.com/ajax/libs/ionicons/5.5.2/ionicons/ionicons.esm.js" type="module"></script>
<script data="ionicons" defer="" nomodule="" src="https://cdnjs.cloudflare.com/ajax/libs/ionicons/5.5.2/ionicons/ionicons.js"></script>
<script defer="" src="https://cdn.jsdelivr.net/npm/@jenkinsci/jenkins-io-components/+esm" type="module"></script>
<script defer="" nomodule="" src="https://cdn.jsdelivr.net/npm/@jenkinsci/jenkins-io-components/"></script>
<jio-footer githubBranch="master" githubRepo="jenkins-infra/jenkins.io" property="https://www.jenkins.io" sourcePath="content//blog/2018/05/2018-05-08-jenkins-x-anchore.adoc"></jio-footer>
<script>
 (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
 
ga('create', 'UA-000000-0', 'auto');
ga('send', 'pageview');
ga('set', 'anonymizeIp', true);

</script>

<script>
  $(function(){
    var $body = $(document.body);
    $body.on("keydown", function(){
      $body.removeClass("no-outline");
    })
  })
</script>
<script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3" type="text/javascript"></script>
<script type="text/javascript">
docsearch({
  container: document.querySelector('input.searchbox').parentNode,
  indexName: 'jenkins',
  appId: "M6L7Q4Z8HS",
  apiKey: "52f8dfbff76ffd9106f1c68fee16154b",
  algoliaOptions: { 'facetFilters': ["tags:en"] },
  debug: false
});
</script>
</body>
</html>
