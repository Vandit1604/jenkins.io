<!DOCTYPE html>
<html lang="en">
<head>
<title>
Automatic git cache maintenance on the controller
</title>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<meta content="Jenkins – an open source automation server which enables developers around the world to reliably build, test, and deploy their software" name="description">
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
<meta content="ie=edge" http-equiv="x-ua-compatible">
<link href="https://Vandit1604.github.io/jenkins.io/independent-scrolling-patch/projects/gsoc/2022/projects/automatic-git-cache-maintenance/" rel="canonical">
<!-- Favicons -->
<link href="/favicon.ico" rel="shortcut icon" type="image/x-icon">
<link href="/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180">
<link href="/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png">
<link href="/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png">
<link href="/site.webmanifest" rel="manifest">
<link color="#5bbad5" href="/safari-pinned-tab.svg" rel="mask-icon">
<meta content="#2b5797" name="msapplication-TileColor">
<meta content="#ffffff" name="theme-color">
<meta content="Automatic git cache maintenance on the controller" name="apple-mobile-web-app-title">
<!-- Twitter Card data -->
<meta content="summary_large_image" name="twitter:card">
<meta content="@JenkinsCI" name="twitter:site">
<meta content="Automatic git cache maintenance on the controller" name="twitter:title">
<meta content="Jenkins – an open source automation server which enables developers around the world to reliably build, test, and deploy their software" name="twitter:description">
<meta content="@JenkinsCI" name="twitter:creator">
<!-- Twitter Summary card images must be at least 120x120px -->
<meta content="/jenkins.io/independent-scrolling-patch/images/logo-title-opengraph.png" name="twitter:image">
<!-- Open Graph data -->
<meta content="Automatic git cache maintenance on the controller" property="og:title">
<meta content="article" property="og:type">
<meta content="https://Vandit1604.github.io/jenkins.io/independent-scrolling-patch/projects/gsoc/2022/projects/automatic-git-cache-maintenance/" property="og:url">
<meta content="Jenkins – an open source automation server which enables developers around the world to reliably build, test, and deploy their software" name="og:description">
<meta content="Automatic git cache maintenance on the controller" property="og:site_name">
<meta content="/jenkins.io/independent-scrolling-patch/images/logo-title-opengraph.png" name="og:image">
<link href="/jenkins.io/independent-scrolling-patch/assets/bower/bootstrap/css/bootstrap.min.css" media="screen" rel="stylesheet">
<link href="/jenkins.io/independent-scrolling-patch/css/jenkins.css" media="screen" rel="stylesheet">
<link href="/jenkins.io/independent-scrolling-patch/stylesheets/styles.css" media="screen" rel="stylesheet">
<!-- Non-obtrusive CSS styles -->
<link href="/jenkins.io/independent-scrolling-patch/css/footer.css" media="screen" rel="stylesheet">
<link href="/jenkins.io/independent-scrolling-patch/css/font-awesome.min.css" media="screen" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/@docsearch/css@3" rel="stylesheet">
</head>
<body>
<script src="/jenkins.io/independent-scrolling-patch/assets/bower/jquery/jquery.min.js"></script>
<!-- starting partial toptoolbar.html.haml -->
<jio-navbar class="fixed-top" id="ji-toolbar" property="https://www.jenkins.io" showSearchBox=""></jio-navbar>
<!-- Spacing to make the fixed-top sticky navbar not occlude any content below it -->
<div class="pt-4">
&nbsp;
</div>

<!-- ending partial toptoolbar.html.haml -->
<!-- starting partial anchors.html.haml -->
<script>
  window.addEventListener('DOMContentLoaded', function () {
    for (var i = 1 ; i <= 6 ; i ++) {
      anchors.add('.container .row .col-lg-9 h' + i);
    }
  })
</script>

<!-- ending partial anchors.html.haml -->
<div class="container">
<div class="row body">
<div class="col-lg-9">
<h1>
Automatic git cache maintenance on the controller
</h1>
<p>
<b>
Goal:
</b>
Automate the maintenance of cached git repositories on the Jenkins controller
</p>
<p>
<b>
Status:
</b>
Selected
</p>
<h3 class="title">
Team
</h3>
<ul>
<li>
Contributor:
<a class="app-author-link" href="/blog/authors/hrushikeshrao/"><div class="app-avatar"><img alt="Hrushikesh Rao" class="app-avatar__image" src="/images/avatars/HrushikeshRao.jpeg"></div> Hrushikesh Rao</a>
</li>
<li>
Mentor(s):
<a class="app-author-link" href="/blog/authors/rishabhbudhouliya/"><div class="app-avatar"><img alt="Rishabh Budhouliya" class="app-avatar__image" src="/images/avatars/rishabhbudhouliya.jpg"></div> Rishabh Budhouliya</a>
, 
<a class="app-author-link" href="/blog/authors/markewaite/"><div class="app-avatar"><img alt="Mark Waite" class="app-avatar__image" src="/images/avatars/markewaite.jpg"></div> Mark Waite</a>
</li>
</ul>
<h2 class="title">
Details
</h2>
<div class="sect2">
<h3 id="abstract"><a class="anchor" href="#abstract"></a>Abstract</h3>
<div class="paragraph">
<p><span class="image"><img src="/images/post-images/gsoc-git-cache-maintenance/maintenance.png" alt="maintenance" title="Git Maintenance"></span></p>
</div>
<div class="paragraph">
<p>The project aims to add <a href="https://git-scm.com/docs/git-maintenance">git-maintenance</a> to improve performance of the Jenkins controller. Git-maintenance optimizes caches, thereby executing the git commands faster.</p>
</div>
</div>
<div class="sect2">
<h3 id="rationale"><a class="anchor" href="#rationale"></a>Rationale</h3>
<div class="paragraph">
<p>Git caches that exist on the controller can become slower and larger than necessary during the lifetime of the remote repositories. Command line git focuses on high performance for frequent operations and relies on end users to perform most repository maintenance. Garbage collection, removal of deleted branches, and other operations are not performed by default on most cached repositories. This project aims to undertake the responsibility of git maintenance tasks by doing all the hard work behind the scenes and providing a simple user interface to configure the maintenance.</p>
</div>
</div>
<div class="sect2">
<h3 id="project-deliverables"><a class="anchor" href="#project-deliverables"></a>Project Deliverables</h3>
<div class="ulist">
<ul>
<li>
<p>Git Maintenance official API support for v &gt;= 2.30</p>
</li>
<li>
<p>Git Maintenance support for versions &lt; 2.30 (Older versions of git)</p>
</li>
<li>
<p>Scheduling git maintenance using cron syntax to optimize caches on Jenkins controller.</p>
</li>
<li>
<p>Display execution results of maintenance tasks in UI.</p>
</li>
<li>
<p>Testing the software (Unit tests).</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="architecture-diagram"><a class="anchor" href="#architecture-diagram"></a>Architecture Diagram</h3>
<div class="paragraph">
<p><span class="image"><img src="/images/post-images/gsoc-git-cache-maintenance/architecture-diagram.png" alt="architecture diagram" title="Architecture Diagram"></span></p>
</div>
</div>
<div class="sect2">
<h3 id="evaluation-phase-1"><a class="anchor" href="#evaluation-phase-1"></a>Evaluation Phase 1</h3>
<div class="paragraph">
<p><span class="image"><img src="/images/post-images/gsoc-git-cache-maintenance/maintenance-config.png" alt="maintenance config" title="Config UI"></span></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Added git maintenance api in Git Client Plugin.</p>
</li>
<li>
<p>Created simple UI to configure maintenance tasks.</p>
</li>
<li>
<p>Schedule and execute maintenance tasks based on cron syntax.</p>
</li>
<li>
<p>Logging and unit tests.</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="resources"><a class="anchor" href="#resources"></a>Resources</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="https://docs.google.com/presentation/d/1t2vuNn1NFpDusnw0m4vdFw6WBQMeU6kccv_K1v2L6R0/edit#slide=id.g13dcaed2105_0_17">Slides</a></p>
</li>
<li>
<p>Phase 1 demo and presentation:</p>
</li>
</ol>
</div>
<div class="videoblock">
<div class="content">
<iframe width="800" height="420" src="https://www.youtube.com/embed/loLSNdCv6K4?rel=0&amp;start=1791" frameborder="0" allowfullscreen></iframe>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="evaluation-phase-2"><a class="anchor" href="#evaluation-phase-2"></a>Evaluation Phase 2</h3>
<div class="paragraph">
<p><span class="image"><img src="/images/post-images/gsoc-git-cache-maintenance/maintenance-records.png" alt="maintenance records" title="Maintenance Records"></span></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Created a table to display maintenance execution results.</p>
</li>
<li>
<p>Persist maintenance data in xml file.</p>
</li>
<li>
<p>Documented the project.</p>
</li>
<li>
<p>Git Client Plugin 3.12.0 released</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/jenkinsci/git-client-plugin/releases/tag/git-client-3.12.0">Changelog</a></p>
</li>
<li>
<p><a href="https://github.com/jenkinsci/git-client-plugin/blob/git-client-3.4.0/README.adoc">Documentation</a></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="resources-2"><a class="anchor" href="#resources-2"></a>Resources</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Phase 2 demo and presentation:</p>
</li>
</ol>
</div>
<div class="videoblock">
<div class="content">
<iframe width="800" height="420" src="https://www.youtube.com/embed/fM2SMbppRxw?rel=0&amp;start=1791" frameborder="0" allowfullscreen></iframe>
</div>
</div>
</div>
<div class="sect2">
<h3 id="outcomes"><a class="anchor" href="#outcomes"></a>Outcomes</h3>
<div class="paragraph">
<p>I cloned the linux kernel and scheduled git maintenance tasks.
Below is the analysis of the git maintenance tasks.
The repo was 813 commits behind the latest commit while performing the maintenance tasks.
As I cloned it, the cache was almost optimized.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maintenance Task</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gain</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prefetch</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x 35</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Commit Graph</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x 410</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Loose Objects</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x 10</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Garbage Collection</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cache already optimized.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Incremental Repack</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="learnings"><a class="anchor" href="#learnings"></a>Learnings-</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Architecture Designing</p>
</li>
<li>
<p>Core Java Programming</p>
</li>
<li>
<p>MultiThreading</p>
</li>
<li>
<p>Testing (JUnit)</p>
</li>
<li>
<p>CI/CD code development</p>
</li>
<li>
<p>Time Management</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="project-links"><a class="anchor" href="#project-links"></a>Project links</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Pull Requests-</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/jenkinsci/git-plugin/pull/1277">Git Plugin #1277</a></p>
</li>
<li>
<p><a href="https://github.com/jenkinsci/git-client-plugin/pull/862">Git Client Plugin #862</a></p>
</li>
<li>
<p><a href="https://github.com/jenkinsci/git-client-plugin/pull/824">Git Client Plugin #824</a></p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="https://docs.google.com/document/d/1vpeIX75i5ylM068JsMdhB8npuS7EEkIANdCmpLN_Yzo/edit?usp=sharing">Brainstorming</a></p>
</li>
<li>
<p><a href="https://community.jenkins.io/t/git-cache-maintenance-gsoc-2022/2563">Weekly Office hour</a></p>
</li>
</ol>
</div>
</div>
<h3 class="title">
Links
</h3>
<ul>
<!-- starting partial connect-links.html.haml -->
<li>
<a href="https://groups.google.com/g/jenkins-platform-sig" rel="noreferrer noopener" target="_blank">
Mailing List
</a>
</li>
<li>
<a href="https://gitter.im/jenkinsci/git-plugin" rel="noreferrer noopener" target="_blank">
<img src="https://badges.gitter.im/jenkinsci/git-plugin.svg" title="Gitter">
</a>
</li>
<li>
<a href="/jenkins.io/independent-scrolling-patch/projects/gsoc/2022/projects/automatic-git-cache-maintenance/#office-hours" rel="noreferrer noopener" target="_blank">
Meetings
</a>
</li>

<!-- ending partial connect-links.html.haml -->
<li>
<a href="/projects/gsoc/2022/project-ideas/automatic-git-cache-maintenance" rel="noreferrer noopener" target="_blank">
Original GSoC project idea
</a>
</li>
<li>
<a href="/projects/gsoc" target="_blank">
Jenkins GSoC page
</a>
</li>
</ul>

<!-- starting partial discuss.html.haml -->

<!-- ending partial discuss.html.haml -->
</div>
<div class="col-lg-3">
<div class="sidebar-nav">
<h4>
On this page
</h4>
<ul class="sectlevel2">
<li><a href="#abstract">Abstract</a></li>
<li><a href="#rationale">Rationale</a></li>
<li><a href="#project-deliverables">Project Deliverables</a></li>
<li><a href="#architecture-diagram">Architecture Diagram</a></li>
<li><a href="#evaluation-phase-1">Evaluation Phase 1</a></li>
<li><a href="#evaluation-phase-2">Evaluation Phase 2</a></li>
<li><a href="#resources-2">Resources</a></li>
<li><a href="#outcomes">Outcomes</a></li>
<li><a href="#learnings">Learnings-</a></li>
<li><a href="#project-links">Project links</a></li>
</ul>
<!-- starting partial connect-h4-div.html.haml -->
<div>
<h4>
Connect
</h4>
</div>
<ul>
<!-- starting partial connect-links.html.haml -->
<li>
<a href="https://groups.google.com/g/jenkins-platform-sig" rel="noreferrer noopener" target="_blank">
Mailing List
</a>
</li>
<li>
<a href="https://gitter.im/jenkinsci/git-plugin" rel="noreferrer noopener" target="_blank">
<img src="https://badges.gitter.im/jenkinsci/git-plugin.svg" title="Gitter">
</a>
</li>
<li>
<a href="/jenkins.io/independent-scrolling-patch/projects/gsoc/2022/projects/automatic-git-cache-maintenance/#office-hours" rel="noreferrer noopener" target="_blank">
Meetings
</a>
</li>

<!-- ending partial connect-links.html.haml -->
</ul>

<!-- ending partial connect-h4-div.html.haml -->
<div>
<div class="block block-block even blog-posts" id="block-block-15">
<h4 class="title">
Recent Blog Posts
</h4>
<ul>
<li>
<a href="/blog/2022/11/16/gsoc-2023/">
Google Summer of Code 2023 Call for Project Ideas and Mentors
</a>
</li>
<li>
<a href="/blog/2022/10/10/plugin-health-scoring-system-report/">
Plugin Health Scoring System
</a>
</li>
<li>
<a href="/blog/2022/10/10/pipeline-steps-improvement-gsoc-report/">
Pipeline Steps Documentation Generator Improvements
</a>
</li>
<li>
<a href="/blog/2022/09/07/jenkinsfile-runner-as-github-actions/">
A near Feature-complete version of Jenkinsfile Runner Actions as GitHub Actions
</a>
</li>
<li>
<a href="/blog/2022/06/13/Let-the-coding-start/">
Let the (GSoC) coding start !
</a>
</li>
<li>
<a href="/blog/2022/05/20/gsoc2022-projects-announcement/">
Welcome Google Summer of Code 2022 Contributors!
</a>
</li>
<li>
<a href="/blog/2022/03/08/gsoc2022-announcement/">
Google Summer of Code 2022… Here We Come!
</a>
</li>
<li>
<a href="/blog/2022/02/16/return_of_students_as_mentors/">
Jenkins GSoC 2022: The Return of Students as Mentors
</a>
</li>
<li>
<a href="/blog/2022/01/07/gsoc-2022/">
Google Summer of Code 2022 Call for Project Ideas and Mentors
</a>
</li>
<li>
<a href="/blog/2021/12/22/deprecated-ruby-runtime/">
Deprecating non-Java plugins
</a>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>


<script src="/jenkins.io/independent-scrolling-patch/assets/bower/anchor-js/anchor.min.js"></script>
<script src="/jenkins.io/independent-scrolling-patch/assets/bower/@popperjs/core/umd/popper.min.js"></script>
<script src="/jenkins.io/independent-scrolling-patch/assets/bower/bootstrap/js/bootstrap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/lit@2.5.0/polyfill-support.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@webcomponents/webcomponentsjs@2.6.0/webcomponents-loader.js"></script>
<script data="ionicons" defer="" src="https://cdnjs.cloudflare.com/ajax/libs/ionicons/5.5.2/ionicons/ionicons.esm.js" type="module"></script>
<script data="ionicons" defer="" nomodule="" src="https://cdnjs.cloudflare.com/ajax/libs/ionicons/5.5.2/ionicons/ionicons.js"></script>
<script defer="" src="https://cdn.jsdelivr.net/npm/@jenkinsci/jenkins-io-components/+esm" type="module"></script>
<script defer="" nomodule="" src="https://cdn.jsdelivr.net/npm/@jenkinsci/jenkins-io-components/"></script>
<jio-footer githubBranch="master" githubRepo="jenkins-infra/jenkins.io" property="https://www.jenkins.io" sourcePath="content//projects/gsoc/2022/projects/automatic-git-cache-maintenance.adoc"></jio-footer>
<script>
 (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
 
ga('create', 'UA-000000-0', 'auto');
ga('send', 'pageview');
ga('set', 'anonymizeIp', true);

</script>

<script>
  $(function(){
    var $body = $(document.body);
    $body.on("keydown", function(){
      $body.removeClass("no-outline");
    })
  })
</script>
<script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3" type="text/javascript"></script>
<script type="text/javascript">
docsearch({
  container: document.querySelector('input.searchbox').parentNode,
  indexName: 'jenkins',
  appId: "M6L7Q4Z8HS",
  apiKey: "52f8dfbff76ffd9106f1c68fee16154b",
  algoliaOptions: { 'facetFilters': ["tags:en"] },
  debug: false
});
</script>
</body>
</html>
