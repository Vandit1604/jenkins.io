<!DOCTYPE html>
<html lang="en">
<head>
<title>
Pipeline Syntax
</title>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<meta content="Jenkins – an open source automation server which enables developers around the world to reliably build, test, and deploy their software" name="description">
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
<meta content="ie=edge" http-equiv="x-ua-compatible">
<link href="https://Vandit1604.github.io/jenkins.io/jemkins.io-5818/doc/book/pipeline/syntax/" rel="canonical">
<!-- Favicons -->
<link href="/favicon.ico" rel="shortcut icon" type="image/x-icon">
<link href="/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180">
<link href="/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png">
<link href="/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png">
<link href="/site.webmanifest" rel="manifest">
<link color="#5bbad5" href="/safari-pinned-tab.svg" rel="mask-icon">
<meta content="#2b5797" name="msapplication-TileColor">
<meta content="#ffffff" name="theme-color">
<meta content="Pipeline Syntax" name="apple-mobile-web-app-title">
<!-- Twitter Card data -->
<meta content="summary_large_image" name="twitter:card">
<meta content="@JenkinsCI" name="twitter:site">
<meta content="Pipeline Syntax" name="twitter:title">
<meta content="Jenkins – an open source automation server which enables developers around the world to reliably build, test, and deploy their software" name="twitter:description">
<meta content="@JenkinsCI" name="twitter:creator">
<!-- Twitter Summary card images must be at least 120x120px -->
<meta content="/jenkins.io/jemkins.io-5818/images/logo-title-opengraph.png" name="twitter:image">
<!-- Open Graph data -->
<meta content="Pipeline Syntax" property="og:title">
<meta content="article" property="og:type">
<meta content="https://Vandit1604.github.io/jenkins.io/jemkins.io-5818/doc/book/pipeline/syntax/" property="og:url">
<meta content="Jenkins – an open source automation server which enables developers around the world to reliably build, test, and deploy their software" name="og:description">
<meta content="Pipeline Syntax" property="og:site_name">
<meta content="/jenkins.io/jemkins.io-5818/images/logo-title-opengraph.png" name="og:image">
<link href="/jenkins.io/jemkins.io-5818/assets/bower/bootstrap/css/bootstrap.min.css" media="screen" rel="stylesheet">
<link href="/jenkins.io/jemkins.io-5818/css/jenkins.css" media="screen" rel="stylesheet">
<link href="/jenkins.io/jemkins.io-5818/stylesheets/styles.css" media="screen" rel="stylesheet">
<!-- Non-obtrusive CSS styles -->
<link href="/jenkins.io/jemkins.io-5818/css/footer.css" media="screen" rel="stylesheet">
<link href="/jenkins.io/jemkins.io-5818/css/font-awesome.min.css" media="screen" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/@docsearch/css@3" rel="stylesheet">
</head>
<body>
<script src="/jenkins.io/jemkins.io-5818/assets/bower/jquery/jquery.min.js"></script>
<!-- starting partial toptoolbar.html.haml -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top" id="ji-toolbar">
<a class="navbar-brand" href="/jenkins.io/jemkins.io-5818/">
Jenkins
</a>
<button class="navbar-toggler" data-bs-target="#CollapsingNavbar" data-bs-toggle="collapse" type="button">
<span class="navbar-toggler-icon"></span>
</button>
<div class="collapse navbar-collapse" id="CollapsingNavbar">
<ul class="nav navbar-nav mr-auto">
<li class="nav-item dropdown">
<!-- starting partial dropdown.html.haml -->
<button aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">
<!-- starting partial cdf_logo.html.haml -->
<svg width="36" height="18" xmlns="http://www.w3.org/2000/svg" role="img" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="-3.23 44.77 362.70 271.95"><defs><linearGradient id="a" x1="359.765" x2="104.082" y1="134.295" y2="124.577" gradientTransform="matrix(1 0 0 -1 0 439.068)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#ed1c24"/><stop offset="1" stop-color="#f7941d"/></linearGradient><linearGradient id="b" x1="355.202" x2="99.519" y1="254.467" y2="244.749" xlink:href="#a"/><linearGradient id="c" x1="183.903" x2="10.612" y1="227.598" y2="221.023" xlink:href="#a"/><linearGradient id="d" x1="367.119" x2="157.995" y1="265.311" y2="257.091" xlink:href="#a"/></defs><path fill="#c49a6c" d="M231.52 309.278c2.483-.332 4.895-.77 7.255-1.329s4.649-1.206 6.991-1.957c13.494-4.58 25.187-12.952 36.374-24.593l-.14-.175c-14.944 15.486-30.693 25.344-50.48 28.054z"/><path fill="url(#a)" d="M224.232 309.96h.332c1.084 0 2.15-.14 3.216-.228a93.844 93.844 0 0 1-3.233.227z"/><path fill="url(#b)" d="M284.692 187.187l-.122.192.122-.192z"/><path fill="url(#c)" d="M146.145 231.847a150.844 150.844 0 0 1-12.97 15.862c-7.582 7.889-15.507 13.563-24.652 16.667a47.832 47.832 0 0 1-4.738 1.326 56.959 56.959 0 0 1-4.916.9 38.32 38.32 0 0 1-1.682.214l-.912.083c-.723.059-1.445.118-2.18.154h-3.068a42.325 42.325 0 0 1-9.192-1.043 49.977 49.977 0 0 1-6.764-2.002 43.097 43.097 0 0 1-4.525-1.954c-1.493-.77-2.961-1.516-4.407-2.37a59.5 59.5 0 0 1-17.105-15.399 59.714 59.714 0 0 1-2.914-4.311 53.09 53.09 0 0 1-1.291-2.263 51.985 51.985 0 0 1-2.263-4.738 46.72 46.72 0 0 1 0-36.426 51.986 51.986 0 0 1 2.263-4.738 54.14 54.14 0 0 1 1.291-2.263 59.742 59.742 0 0 1 2.914-4.311 59.714 59.714 0 0 1 17.105-15.4 60.828 60.828 0 0 1 4.407-2.369q2.217-1 4.525-1.777a49.976 49.976 0 0 1 6.906-2.073 42.325 42.325 0 0 1 9.192-1.042h3.128c.722 0 1.445.094 2.155.154l1.043.106 1.019.119c1.8.237 3.553.557 5.271.96.853.2 1.694.426 2.523.663a51.186 51.186 0 0 1 11.846 5.176 59.645 59.645 0 0 1 4.395 2.89 74.485 74.485 0 0 1 8.386 7.108q2.038 1.99 4.063 4.193l.083-.13a159.395 159.395 0 0 1 11.064 13.942c5.437-8.576 13.658-21.464 16.584-25.74 1.185-1.718 2.37-3.46 3.66-5.212-13.54-16.513-29.827-30.23-51.587-36.082h-.154a89.397 89.397 0 0 0-3.187-.794l-.45-.107a92.565 92.565 0 0 0-3.151-.627l-.628-.119a80.578 80.578 0 0 0-3.743-.569h-.142a58.29 58.29 0 0 0-2.073-.236h-.391l-1.872-.166h-.568l-1.754-.119h-.675l-1.777-.07h-3.115c-46.447-.25-87.125 40.476-87.125 86.911s40.725 87.173 87.172 87.173h3.14l1.729-.071h.734l1.67-.095h.676l1.706-.154h.568l1.813-.213.414-.06 1.967-.272h.213a125.91 125.91 0 0 0 3.553-.628l.652-.142c.96-.201 1.907-.415 2.855-.64l.58-.142a86.66 86.66 0 0 0 3.009-.817l.237-.071c20.73-6.077 36.425-19.392 49.55-35.277-2.037-3.068-3.4-5.366-4.039-6.48z"/><path fill="url(#d)" d="M318.05 51.733v94.66a85.514 85.514 0 0 0-52.595-18.729h-3.115l-1.777.072-.7.047-1.752.118h-.569l-1.871.166h-.391c-.7.071-1.386.142-2.073.237h-.154c-1.256.154-2.5.355-3.732.569l-.628.118c-1.066.19-2.108.403-3.15.628l-.45.107c-30.35 6.858-50.333 28.808-66.822 52.82-.7 1.018-1.35 2.049-2.038 3.068-2.25 3.423-5.46 8.422-8.635 13.397-4.17 6.527-8.292 13.03-9.939 15.66l20.624 32.137s21.997 40.465 61.68 51.482l.237.07c.995.297 2.002.558 3.009.818l.58.142c.936.237 1.896.439 2.855.64l.652.142c1.184.225 2.369.439 3.553.628h.214l1.966.273.415.059 1.812.213h.569l1.705.154h.676l1.67.095h.734l1.73.07h3.139c54.703 0 86.355-30.964 87.149-85.063V51.733zm-52.595 215.403h-3.068c-.734 0-1.457-.095-2.18-.154l-.912-.083c-.568-.06-1.125-.13-1.682-.213a49.077 49.077 0 0 1-9.571-2.275 49.612 49.612 0 0 1-6.634-2.83 55.792 55.792 0 0 1-6.254-3.768 63.068 63.068 0 0 1-3.009-2.215 82.399 82.399 0 0 1-8.683-7.925l-.095.119c-1.255-1.303-2.487-2.69-3.731-4.11-.154-.167-.296-.356-.45-.534-.628-.722-1.256-1.445-1.884-2.215s-1.125-1.398-1.682-2.097-.888-1.101-1.338-1.682a184.467 184.467 0 0 1-6.053-8.292c-.7-.995-1.398-2.025-2.109-3.056-.379-.569-.77-1.184-1.185-1.73-.675-1.018-1.362-2.013-2.049-3.056l-.355-.545c-1.185-1.812-2.37-3.684-3.649-5.603q2.95-4.608 5.817-8.86c1.907-2.831 3.79-5.556 5.662-8.138s3.72-5.046 5.591-7.38 3.72-4.525 5.603-6.586q2.026-2.203 4.063-4.194c1.374-1.338 2.748-2.594 4.158-3.778s2.807-2.287 4.252-3.329a57.594 57.594 0 0 1 7.748-4.62c.331-.166.663-.367 1.006-.533l.226-.118c1.41-.652 2.843-1.185 4.3-1.73l.485-.201c.273-.083.557-.142.83-.237a44.943 44.943 0 0 1 3.34-.948l1.374-.343a60.798 60.798 0 0 1 4.738-.841l1.019-.119 1.042-.106c.711 0 1.434-.119 2.156-.154h3.128a42.431 42.431 0 0 1 4.572.26 48.011 48.011 0 0 1 6.93 1.35c1.54.427 3.08.925 4.596 1.505a48.724 48.724 0 0 1 4.525 1.955c1.493.722 2.961 1.516 4.407 2.369s2.866 1.8 4.24 2.784 2.725 2.049 4.028 3.174a58.459 58.459 0 0 1 8.837 9.477 59.73 59.73 0 0 1 2.914 4.312 51.067 51.067 0 0 1 5.318 11.916 47.38 47.38 0 0 1 1.185 5.165 45.567 45.567 0 0 1 .71 8.09c.072 35.964-16.062 52.122-52.227 52.122z"/></svg>

<!-- ending partial cdf_logo.html.haml -->
</button>

<!-- ending partial dropdown.html.haml -->
<div class="dropdown-menu">
<a class="dropdown-item feature" href="https://cd.foundation/">
What is CDF?
</a>
<a class="dropdown-item feature" href="https://jenkins-x.io/">
Jenkins X
</a>
<a class="dropdown-item feature" href="https://tekton.dev/">
Tekton
</a>
<a class="dropdown-item feature" href="https://www.spinnaker.io/">
Spinnaker
</a>
</div>
</li>
</ul>
<ul class="nav navbar-nav ml-auto">
<li class="nav-item">
<a class="nav-link" href="/jenkins.io/jemkins.io-5818/node/">
Blog
</a>
</li>
<li class="nav-item dropdown">
<!-- starting partial dropdown.html.haml -->
<button aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">
Documentation
</button>

<!-- ending partial dropdown.html.haml -->
<div class="dropdown-menu">
<a class="dropdown-item feature" href="/jenkins.io/jemkins.io-5818/doc/book/">
<strong>
User Guide
</strong>
</a>
<a class="dropdown-item" href="/jenkins.io/jemkins.io-5818/doc/book/installing/">
&nbsp;-&nbsp;Installing Jenkins
</a>
<a class="dropdown-item" href="/jenkins.io/jemkins.io-5818/doc/book/pipeline/">
&nbsp;-&nbsp;Jenkins Pipeline
</a>
<a class="dropdown-item" href="/jenkins.io/jemkins.io-5818/doc/book/managing/">
&nbsp;-&nbsp;Managing Jenkins
</a>
<a class="dropdown-item" href="/jenkins.io/jemkins.io-5818/doc/book/security/">
&nbsp;-&nbsp;Securing Jenkins
</a>
<a class="dropdown-item" href="/jenkins.io/jemkins.io-5818/doc/book/system-administration/">
&nbsp;-&nbsp;System Administration
</a>
<a class="dropdown-item" href="/jenkins.io/jemkins.io-5818/doc/book/troubleshooting/">
&nbsp;-&nbsp;Troubleshooting Jenkins
</a>
<a class="dropdown-item" href="/jenkins.io/jemkins.io-5818/doc/book/glossary/">
&nbsp;-&nbsp;Terms and Definitions
</a>
<a class="dropdown-item" href="/jenkins.io/jemkins.io-5818/solutions/">
<strong>
Solution Pages
</strong>
</a>
<a class="dropdown-item" href="/jenkins.io/jemkins.io-5818/doc/tutorials/">
<strong>
Tutorials
</strong>
</a>
<a class="dropdown-item" href="/jenkins.io/jemkins.io-5818/doc/pipeline/tour/getting-started/">
&nbsp;-&nbsp;Guided Tour
</a>
<a class="dropdown-item" href="/jenkins.io/jemkins.io-5818/doc/tutorials/">
&nbsp;-&nbsp;More Tutorials
</a>
<a class="dropdown-item feature" href="/jenkins.io/jemkins.io-5818/doc/developer/">
<strong>
Developer Guide
</strong>
</a>
<a class="dropdown-item" href="/jenkins.io/jemkins.io-5818/participate/">
<strong>
Contributor Guide
</strong>
</a>
</div>
</li>
<li class="nav-item">
<a class="nav-link" href="https://plugins.jenkins.io/">
Plugins
</a>
</li>
<li class="nav-item dropdown">
<!-- starting partial dropdown.html.haml -->
<button aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">
Community
</button>

<!-- ending partial dropdown.html.haml -->
<div class="dropdown-menu">
<a class="dropdown-item feature" href="/jenkins.io/jemkins.io-5818/participate/">
Overview
</a>
<a class="dropdown-item feature" href="/jenkins.io/jemkins.io-5818/chat/" title="Chat with the rest of the Jenkins community on IRC">
Chat
</a>
<a class="dropdown-item feature" href="/jenkins.io/jemkins.io-5818/projects/jam/">
Meet
</a>
<a class="dropdown-item feature" href="/jenkins.io/jemkins.io-5818/events/">
Events
</a>
<a class="dropdown-item feature" href="https://community.jenkins.io/">
Forum
</a>
<a class="dropdown-item feature" href="https://issues.jenkins.io/">
Issue Tracker
</a>
<a class="dropdown-item feature" href="/jenkins.io/jemkins.io-5818/mailing-lists/" title="Browse Jenkins mailing list archives and/or subscribe to lists">
Mailing Lists
</a>
<a class="dropdown-item feature" href="/jenkins.io/jemkins.io-5818/project/roadmap/">
Roadmap
</a>
<a class="dropdown-item feature" href="https://accounts.jenkins.io/" title="Create/manage your account for accessing wiki, issue tracker, etc">
Account Management
</a>
<a class="dropdown-item feature" href="/jenkins.io/jemkins.io-5818/sigs/">
<strong>
Special Interest Groups
</strong>
</a>
<a class="dropdown-item feature" href="/jenkins.io/jemkins.io-5818/sigs/advocacy-and-outreach/">
&nbsp;-&nbsp;Advocacy and Outreach
</a>
<a class="dropdown-item feature" href="/jenkins.io/jemkins.io-5818/sigs/chinese-localization/">
&nbsp;-&nbsp;Chinese Localization
</a>
<a class="dropdown-item feature" href="/jenkins.io/jemkins.io-5818/sigs/cloud-native/">
&nbsp;-&nbsp;Cloud Native
</a>
<a class="dropdown-item feature" href="/jenkins.io/jemkins.io-5818/sigs/docs/">
&nbsp;-&nbsp;Documentation
</a>
<a class="dropdown-item feature" href="/jenkins.io/jemkins.io-5818/sigs/gsoc/">
&nbsp;-&nbsp;Google Summer of Code
</a>
<a class="dropdown-item feature" href="/jenkins.io/jemkins.io-5818/sigs/hw-and-eda/">
&nbsp;-&nbsp;Hardware and EDA
</a>
<a class="dropdown-item feature" href="/jenkins.io/jemkins.io-5818/sigs/pipeline-authoring/">
&nbsp;-&nbsp;Pipeline Authoring
</a>
<a class="dropdown-item feature" href="/jenkins.io/jemkins.io-5818/sigs/platform/">
&nbsp;-&nbsp;Platform
</a>
<a class="dropdown-item feature" href="/jenkins.io/jemkins.io-5818/sigs/ux/">
&nbsp;-&nbsp;User Experience
</a>
</div>
</li>
<li class="dropdown nav-item">
<!-- starting partial dropdown.html.haml -->
<button aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">
Subprojects
</button>

<!-- ending partial dropdown.html.haml -->
<div class="dropdown-menu">
<a class="dropdown-item feature" href="/jenkins.io/jemkins.io-5818/projects/">
Overview
</a>
<a class="dropdown-item feature" href="/jenkins.io/jemkins.io-5818/projects/gsoc/">
Google Summer of Code in Jenkins
</a>
<a class="dropdown-item feature" href="/jenkins.io/jemkins.io-5818/projects/infrastructure/">
Infrastructure
</a>
<a class="dropdown-item feature" href="/jenkins.io/jemkins.io-5818/projects/jam/">
CI/CD and Jenkins Area Meetups
</a>
<a class="dropdown-item feature" href="/jenkins.io/jemkins.io-5818/projects/jcasc/">
Jenkins Configuration as Code
</a>
<a class="dropdown-item feature" href="/jenkins.io/jemkins.io-5818/projects/jenkins-operator/">
Jenkins Operator
</a>
<a class="dropdown-item feature" href="/jenkins.io/jemkins.io-5818/projects/remoting/">
Jenkins Remoting
</a>
<a class="dropdown-item feature" href="/jenkins.io/jemkins.io-5818/sigs/docs/gsod/2020/projects/document-jenkins-on-kubernetes/">
Document Jenkins on Kubernetes
</a>
</div>
</li>
<li class="nav-item dropdown">
<!-- starting partial dropdown.html.haml -->
<button aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">
About
</button>

<!-- ending partial dropdown.html.haml -->
<div class="dropdown-menu">
<a class="dropdown-item" href="/jenkins.io/jemkins.io-5818/project/roadmap/">
Roadmap
</a>
<a class="dropdown-item" href="/jenkins.io/jemkins.io-5818/security/">
Security
</a>
<a class="dropdown-item" href="/jenkins.io/jemkins.io-5818/press/">
Press
</a>
<a class="dropdown-item" href="/jenkins.io/jemkins.io-5818/awards/">
Awards
</a>
<a class="dropdown-item" href="/jenkins.io/jemkins.io-5818/project/conduct/">
Conduct
</a>
<a class="dropdown-item" href="/jenkins.io/jemkins.io-5818/artwork/">
Artwork
</a>
<a class="dropdown-item" href="/jenkins.io/jemkins.io-5818/books/">
Books
</a>
</div>
</li>
<li class="nav-item dropdown">
<!-- starting partial dropdown.html.haml -->
<button aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">
English
</button>

<!-- ending partial dropdown.html.haml -->
<div class="dropdown-menu">
<a class="dropdown-item" href="/jenkins.io/jemkins.io-5818/zh/">
中文 Chinese
</a>
</div>
</li>
<li class="nav-item searchbox">
<input aria-label="Search" class="form-control searchbox" placeholder="Search" type="search">
</li>
<li class="nav-item download-btn">
<a class="nav-link btn btn-outline-secondary" href="/jenkins.io/jemkins.io-5818/download/">
Download
</a>
</li>
</ul>
</div>
</nav>
<!-- Spacing to make the fixed-top sticky navbar not occlude any content below it -->
<div class="pt-4">
&nbsp;
</div>

<!-- ending partial toptoolbar.html.haml -->
<!-- starting partial anchors.html.haml -->
<script>
  window.addEventListener('DOMContentLoaded', function () {
    for (var i = 1 ; i <= 6 ; i ++) {
      anchors.add('.container .row .col-lg-9 h' + i);
    }
  })
</script>

<!-- ending partial anchors.html.haml -->
<div class="container">
<div class="row body flex-lg-nowrap">
<div class="col-lg-3" id="sidebar-menu">
<div class="sidebar-nav tour" id="sidebar-content">
<p>
<a href="/jenkins.io/jemkins.io-5818/doc/" class="">> User Documentation Home</a>
</p>
<h5>
User Handbook
</h5>
<ul>
<li>
<a href="/jenkins.io/jemkins.io-5818/doc/book/getting-started/" class="">User Handbook Overview</a>
</li>
<li>
<a href="/jenkins.io/jemkins.io-5818/doc/book/installing/" class="">Installing Jenkins</a>
</li>
<li>
<a href="/jenkins.io/jemkins.io-5818/doc/book/using/" class="">Using Jenkins</a>
</li>
<li>
<a href="/jenkins.io/jemkins.io-5818/doc/book/pipeline/" class="active">Pipeline</a>
<small>
<ul style="padding-left: 1rem;">
<li>
<a href="/jenkins.io/jemkins.io-5818/doc/book/pipeline/getting-started/" class="">Getting started with Pipeline</a>
</li>
<li>
<a href="/jenkins.io/jemkins.io-5818/doc/book/pipeline/jenkinsfile/" class="">Using a Jenkinsfile</a>
</li>
<li>
<a href="/jenkins.io/jemkins.io-5818/doc/book/pipeline/running-pipelines/" class="">Running Pipelines</a>
</li>
<li>
<a href="/jenkins.io/jemkins.io-5818/doc/book/pipeline/multibranch/" class="">Branches and Pull Requests</a>
</li>
<li>
<a href="/jenkins.io/jemkins.io-5818/doc/book/pipeline/docker/" class="">Using Docker with Pipeline</a>
</li>
<li>
<a href="/jenkins.io/jemkins.io-5818/doc/book/pipeline/shared-libraries/" class="">Extending with Shared Libraries</a>
</li>
<li>
<a href="/jenkins.io/jemkins.io-5818/doc/book/pipeline/development/" class="">Pipeline Development Tools</a>
</li>
<li>
<a href="/jenkins.io/jemkins.io-5818/doc/book/pipeline/syntax/" class="active">Pipeline Syntax</a>
</li>
<li>
<a href="/jenkins.io/jemkins.io-5818/doc/book/pipeline/pipeline-best-practices/" class="">Pipeline Best Practices</a>
</li>
<li>
<a href="/jenkins.io/jemkins.io-5818/doc/book/pipeline/scaling-pipeline/" class="">Scaling Pipelines</a>
</li>
<li>
<a href="/jenkins.io/jemkins.io-5818/doc/book/pipeline/cps-method-mismatches/" class="">Pipeline CPS Method Mismatches</a>
</li>
</ul>
</small>
</li>
<li>
<a href="/jenkins.io/jemkins.io-5818/doc/book/blueocean/" class="">Blue Ocean</a>
</li>
<li>
<a href="/jenkins.io/jemkins.io-5818/doc/book/managing/" class="">Managing Jenkins</a>
</li>
<li>
<a href="/jenkins.io/jemkins.io-5818/doc/book/security/" class="">Securing Jenkins</a>
</li>
<li>
<a href="/jenkins.io/jemkins.io-5818/doc/book/system-administration/" class="">System Administration</a>
</li>
<li>
<a href="/jenkins.io/jemkins.io-5818/doc/book/scaling/" class="">Scaling Jenkins</a>
</li>
<li>
<a href="/jenkins.io/jemkins.io-5818/doc/book/troubleshooting/" class="">Troubleshooting Jenkins</a>
</li>
<li>
<a href="/jenkins.io/jemkins.io-5818/doc/book/glossary/" class="">Glossary</a>
</li>
</ul>
<h5>
Tutorials
</h5>
<ul>
<li>
<a href="/jenkins.io/jemkins.io-5818/doc/pipeline/tour/getting-started/" class="">Guided Tour</a>
</li>
<li>
<a href="/jenkins.io/jemkins.io-5818/doc/tutorials#pipeline" class="">Jenkins Pipeline</a>
</li>
<li>
<a href="/jenkins.io/jemkins.io-5818/doc/tutorials#tools" class="">Using Build Tools</a>
</li>
</ul>
<h5>
Resources
</h5>
<ul>
<li>
<a href="/jenkins.io/jemkins.io-5818/doc/book/pipeline/syntax/" class="active">Pipeline Syntax reference</a>
</li>
<li>
<a href="/jenkins.io/jemkins.io-5818/doc/pipeline/steps/" class="">Pipeline Steps reference</a>
</li>
<li>
<a href="/jenkins.io/jemkins.io-5818/doc/upgrade-guide/" class="">LTS Upgrade guides</a>
</li>
</ul>
</div>
</div>
<div class="col-lg-9">
<div>
<div class="row">
<div class="col-md-4">
<a class="prev doc-page-link" href="../development">
⇐ Pipeline Development Tools
</a>
</div>
<div class="col-md-4">
<a class="up doc-page-link" href="../">
⇑ Pipeline
</a>
<a class="index doc-page-link" href="../../">
Index
</a>
</div>
<div class="col-md-4">
<a class="next doc-page-link" href="../pipeline-best-practices">
Pipeline Best Practices ⇒
</a>
</div>
</div>
</div>
<div>
<div class="row body">
<div class="section">
<h1>
Pipeline Syntax
</h1>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#declarative-pipeline">Declarative Pipeline</a>
<ul class="sectlevel2">
<li><a href="#limitations">Limitations</a></li>
<li><a href="#declarative-sections">Sections</a>
<ul class="sectlevel3">
<li><a href="#agent">agent</a></li>
<li><a href="#post">post</a></li>
<li><a href="#stages">stages</a></li>
<li><a href="#steps">steps</a></li>
</ul>
</li>
<li><a href="#declarative-directives">Directives</a>
<ul class="sectlevel3">
<li><a href="#environment">environment</a></li>
<li><a href="#options">options</a></li>
<li><a href="#parameters">parameters</a></li>
<li><a href="#triggers">triggers</a></li>
<li><a href="#cron-syntax">Jenkins cron syntax</a></li>
<li><a href="#stage">stage</a></li>
<li><a href="#tools">tools</a></li>
<li><a href="#input">input</a></li>
<li><a href="#when">when</a></li>
</ul>
</li>
<li><a href="#sequential-stages">Sequential Stages</a></li>
<li><a href="#parallel">Parallel</a></li>
<li><a href="#declarative-matrix">Matrix</a>
<ul class="sectlevel3">
<li><a href="#matrix-axes">axes</a></li>
<li><a href="#matrix-stages">stages</a></li>
<li><a href="#matrix-excludes">excludes (optional)</a></li>
<li><a href="#matrix-cell-directives">Matrix cell-level directives (optional)</a></li>
</ul>
</li>
<li><a href="#declarative-steps">Steps</a>
<ul class="sectlevel3">
<li><a href="#script">script</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#scripted-pipeline">Scripted Pipeline</a>
<ul class="sectlevel2">
<li><a href="#flow-control">Flow Control</a></li>
<li><a href="#scripted-steps">Steps</a></li>
<li><a href="#differences-from-plain-groovy">Differences from plain Groovy</a></li>
</ul>
</li>
<li><a href="#compare">Syntax Comparison</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This section builds on the information introduced in
<a href="../getting-started">Getting started with Pipeline</a> and should be treated
solely as a reference. For more information on how to use Pipeline syntax in
practical examples, refer to the
<a href="../jenkinsfile">Using a Jenkinsfile</a> section of this chapter. As of version
2.5 of the Pipeline plugin, Pipeline supports two discrete syntaxes which are
detailed below. For the pros and cons of each, see the <a href="#compare">Syntax Comparison</a>.</p>
</div>
<div class="paragraph">
<p>As discussed at the <a href="../">start of this chapter</a>, the most fundamental part
of a Pipeline is the "step". Basically, steps tell Jenkins <em>what</em> to do and
serve as the basic building block for both Declarative and Scripted Pipeline
syntax.</p>
</div>
<div class="paragraph">
<p>For an overview of available steps, please refer to the
<a href="/doc/pipeline/steps">Pipeline Steps reference</a>
which contains a comprehensive list of steps built into Pipeline as well as
steps provided by plugins.</p>
</div>
</div>
</div>
<div class="sect1 syntax">
<h2 id="declarative-pipeline"><a class="anchor" href="#declarative-pipeline"></a>Declarative Pipeline</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Declarative Pipeline is a relatively recent addition to Jenkins Pipeline
<sup class="footnote" id="_footnote_declarative-version">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup>
which presents a more simplified and opinionated syntax on top of the Pipeline
sub-systems.</p>
</div>
<div class="paragraph">
<p>All valid Declarative Pipelines must be enclosed within a <code>pipeline</code> block, for
example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="groovy"><span class="n">pipeline</span> <span class="o">{</span>
    <span class="cm">/* insert Declarative Pipeline here */</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The basic statements and expressions which are valid in Declarative Pipeline
follow the same rules as
<a href="http://groovy-lang.org/syntax.html">Groovy&#8217;s syntax</a>
with the following exceptions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The top-level of the Pipeline must be a <em>block</em>, specifically: <code>pipeline { }</code>.</p>
</li>
<li>
<p>No semicolons as statement separators. Each statement has to be on its own
line.</p>
</li>
<li>
<p>Blocks must only consist of <a href="#declarative-sections">Sections</a>,
<a href="#declarative-directives">Directives</a>, <a href="#declarative-steps">Steps</a>, or assignment statements.</p>
</li>
<li>
<p>A property reference statement is treated as a no-argument method invocation. So, for
example, <code>input</code> is treated as <code>input()</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can use the
<a href="../getting-started/#directive-generator">Declarative Directive Generator</a>
to help you get started with configuring the directives and sections in your
Declarative Pipeline.</p>
</div>
<div class="sect2">
<h3 id="limitations"><a class="anchor" href="#limitations"></a>Limitations</h3>
<div class="paragraph">
<p>There is currently an <a href="https://issues.jenkins.io/browse/JENKINS-37984">open issue</a>
which limits the maximum size of the code within the <code>pipeline{}</code> block. This limitation
does not apply to Scripted pipelines.</p>
</div>
</div>
<div class="sect2">
<h3 id="declarative-sections"><a class="anchor" href="#declarative-sections"></a>Sections</h3>
<div class="paragraph">
<p>Sections in Declarative Pipeline typically contain one or more
<a href="#declarative-directives">Directives</a> or <a href="#declarative-steps">Steps</a>.</p>
</div>
<div class="sect3">
<h4 id="agent"><a class="anchor" href="#agent"></a>agent</h4>
<div class="paragraph">
<p>The <code>agent</code> section specifies where the entire Pipeline, or a specific stage,
will execute in the Jenkins environment depending on where the <code>agent</code>
section is placed. The section must be defined at the top-level inside the
<code>pipeline</code> block, but stage-level usage is optional.</p>
</div>
<table class="tableblock frame-all grid-all stretch syntax">
<colgroup>
<col style="width: 10%;">
<col style="width: 90%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">Required</p></th>
<td class="tableblock halign-right valign-top"><div class="content"><div class="paragraph">
<p>Yes</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">Parameters</p></th>
<td class="tableblock halign-right valign-top"><div class="content"><div class="paragraph">
<p><a href="#agent-parameters">Described below</a></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">Allowed</p></th>
<td class="tableblock halign-right valign-top"><div class="content"><div class="paragraph">
<p>In the top-level <code>pipeline</code> block and each <code>stage</code> block.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="differences-between-top-and-stage-level"><a class="anchor" href="#differences-between-top-and-stage-level"></a>Differences between top and stage level Agents</h5>
<div class="paragraph">
<p>There are some nuances when adding an agent to the top level or a stage level, and this when the <code>options</code> directive is applied.</p>
</div>
<div class="sect5">
<h6 id="top-level-agents"><a class="anchor" href="#top-level-agents"></a>Top Level Agents</h6>
<div class="paragraph">
<p>In <code>agents</code> declared at the outermost level of the Pipeline, the options are invoked <strong>after</strong> entering the agent.
As an example, when using <code>timeout</code> it will be only applied to the execution <strong>within</strong> the agent.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code>node("myAgent") {
    timeout(unit: 'SECONDS', time: 5) {
        stage("One"){
            sleep 10
            echo 'hello'
        }
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="stage-level-agents"><a class="anchor" href="#stage-level-agents"></a>Stage Agents</h6>
<div class="paragraph">
<p>In <code>agents</code> declared within a stage, the options are invoked <strong>before</strong> entering the <code>agent</code> and <strong>before</strong> checking any <code>when</code> conditions.
In this case, when using <code>timeout</code>, it is applied <strong>before</strong> the <code>agent</code> is allocated.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code>timeout(unit: 'SECONDS', time: 5) {
    stage("One"){
        node {
            sleep 10
            echo 'Hello'
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This timeout will include the agent provisioning time.
Because the timeout includes the agent provisioning time, the Pipeline may fail in cases where agent allocation is delayed.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="agent-parameters"><a class="anchor" href="#agent-parameters"></a>Parameters</h5>
<div class="paragraph">
<p>In order to support the wide variety of use-cases Pipeline authors may have,
the <code>agent</code> section supports a few different types of parameters. These
parameters can be applied at the top-level of the <code>pipeline</code> block, or within
each <code>stage</code> directive.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">any</dt>
<dd>
<p>Execute the Pipeline, or stage, on any available agent. For example: <code>agent any</code></p>
</dd>
<dt class="hdlist1">none</dt>
<dd>
<p>When applied at the top-level of the <code>pipeline</code> block no global agent
will be allocated for the entire Pipeline run and each <code>stage</code> section will
need to contain its own <code>agent</code> section. For example: <code>agent none</code></p>
</dd>
<dt class="hdlist1">label</dt>
<dd>
<p>Execute the Pipeline, or stage, on an agent available in the Jenkins
environment with the provided label. For example: <code>agent { label 'my-defined-label' }</code></p>
<div class="paragraph">
<p>Label conditions can also be used. For example: <code>agent { label 'my-label1 &amp;&amp; my-label2' }</code> or <code>agent { label 'my-label1 || my-label2' }</code></p>
</div>
</dd>
<dt class="hdlist1">node</dt>
<dd>
<p><code>agent { node { label 'labelName' } }</code> behaves the same as
<code>agent { label 'labelName' }</code>, but <code>node</code> allows for additional options (such
as <code>customWorkspace</code>).</p>
</dd>
<dt class="hdlist1">docker</dt>
<dd>
<p>Execute the Pipeline, or stage, with the given container which will be
dynamically provisioned on a <a href="../../glossary/#node">node</a> pre-configured to
accept Docker-based Pipelines, or on a node matching the optionally defined
<code>label</code> parameter.  <code>docker</code> also optionally accepts an <code>args</code> parameter
which may contain arguments to pass directly to a <code>docker run</code> invocation, and
an <code>alwaysPull</code> option, which will force a <code>docker pull</code> even if the image
name is already present.
For example: <code>agent { docker 'maven:3.8.6-eclipse-temurin-11' }</code> or</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="groovy"><span class="n">agent</span> <span class="o">{</span>
    <span class="n">docker</span> <span class="o">{</span>
        <span class="n">image</span> <span class="s1">'maven:3.8.6-eclipse-temurin-11'</span>
        <span class="n">label</span> <span class="s1">'my-defined-label'</span>
        <span class="n">args</span>  <span class="s1">'-v /tmp:/tmp'</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>docker</code> also optionally accepts a <code>registryUrl</code> and <code>registryCredentialsId</code> parameters
which will help to specify the Docker Registry to use and its credentials. The parameter
<code>registryCredentialsId</code> could be used alone for private repositories within the docker hub.
For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="groovy"><span class="n">agent</span> <span class="o">{</span>
    <span class="n">docker</span> <span class="o">{</span>
        <span class="n">image</span> <span class="s1">'myregistry.com/node'</span>
        <span class="n">label</span> <span class="s1">'my-defined-label'</span>
        <span class="n">registryUrl</span> <span class="s1">'https://myregistry.com/'</span>
        <span class="n">registryCredentialsId</span> <span class="s1">'myPredefinedCredentialsInJenkins'</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
</dd>
<dt class="hdlist1">dockerfile</dt>
<dd>
<p>Execute the Pipeline, or stage, with a container built from a
<code>Dockerfile</code> contained in the source repository. In order to use this option,
the <code>Jenkinsfile</code> must be loaded from either a <strong>Multibranch Pipeline</strong> or a
<strong>Pipeline from SCM</strong>. Conventionally this is the <code>Dockerfile</code> in the root of the
source repository: <code>agent { dockerfile true }</code>. If building a <code>Dockerfile</code> in
another directory, use the <code>dir</code> option: <code>agent { dockerfile { dir 'someSubDir'
} }</code>. If your <code>Dockerfile</code> has another name, you can specify the file name with
the <code>filename</code> option. You can pass additional arguments to the <code>docker build &#8230;&#8203;</code>
command with the <code>additionalBuildArgs</code> option, like <code>agent { dockerfile {
additionalBuildArgs '--build-arg foo=bar' } }</code>.
For example, a repository with the file <code>build/Dockerfile.build</code>, expecting
a build argument <code>version</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="groovy"><span class="n">agent</span> <span class="o">{</span>
    <span class="c1">// Equivalent to "docker build -f Dockerfile.build --build-arg version=1.0.2 ./build/</span>
    <span class="n">dockerfile</span> <span class="o">{</span>
        <span class="n">filename</span> <span class="s1">'Dockerfile.build'</span>
        <span class="n">dir</span> <span class="s1">'build'</span>
        <span class="n">label</span> <span class="s1">'my-defined-label'</span>
        <span class="n">additionalBuildArgs</span>  <span class="s1">'--build-arg version=1.0.2'</span>
        <span class="n">args</span> <span class="s1">'-v /tmp:/tmp'</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>dockerfile</code> also optionally accepts a <code>registryUrl</code> and <code>registryCredentialsId</code> parameters
which will help to specify the Docker Registry to use and its credentials.
For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="groovy"><span class="n">agent</span> <span class="o">{</span>
    <span class="n">dockerfile</span> <span class="o">{</span>
        <span class="n">filename</span> <span class="s1">'Dockerfile.build'</span>
        <span class="n">dir</span> <span class="s1">'build'</span>
        <span class="n">label</span> <span class="s1">'my-defined-label'</span>
        <span class="n">registryUrl</span> <span class="s1">'https://myregistry.com/'</span>
        <span class="n">registryCredentialsId</span> <span class="s1">'myPredefinedCredentialsInJenkins'</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
</dd>
<dt class="hdlist1">kubernetes</dt>
<dd>
<p>Execute the Pipeline, or stage, inside a pod deployed on a Kubernetes cluster. In order to use this option,
the <code>Jenkinsfile</code> must be loaded from either a <strong>Multibranch Pipeline</strong> or a
<strong>Pipeline from SCM</strong>. The Pod template is defined inside the kubernetes { } block.
For example, if you want a pod with a Kaniko container inside it, you would define it as follows:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="groovy"><span class="n">agent</span> <span class="o">{</span>
    <span class="n">kubernetes</span> <span class="o">{</span>
        <span class="n">defaultContainer</span> <span class="s1">'kaniko'</span>
        <span class="n">yaml</span> <span class="s1">'''
kind: Pod
spec:
  containers:
  - name: kaniko
    image: gcr.io/kaniko-project/executor:debug
    imagePullPolicy: Always
    command:
    - sleep
    args:
    - 99d
    volumeMounts:
      - name: aws-secret
        mountPath: /root/.aws/
      - name: docker-registry-config
        mountPath: /kaniko/.docker
  volumes:
    - name: aws-secret
      secret:
        secretName: aws-secret
    - name: docker-registry-config
      configMap:
        name: docker-registry-config
'''</span>
   <span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You will need to create a secret <code>aws-secret</code> for Kaniko to be able to authenticate with ECR. This secret should contain the contents of <code>~/.aws/credentials</code>. The other volume is a ConfigMap which should contain the endpoint of your ECR registry.
For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="json"><span class="p">{</span><span class="w">
      </span><span class="nl">"credHelpers"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"&lt;your-aws-account-id&gt;.dkr.ecr.eu-central-1.amazonaws.com"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ecr-login"</span><span class="w">
      </span><span class="p">}</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Refer to the following example for reference: <a href="https://github.com/jenkinsci/kubernetes-plugin/blob/master/examples/kaniko.groovy" class="bare">https://github.com/jenkinsci/kubernetes-plugin/blob/master/examples/kaniko.groovy</a></p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="common-options"><a class="anchor" href="#common-options"></a>Common Options</h5>
<div class="paragraph">
<p>These are a few options that can be applied to two or more <code>agent</code> implementations.
They are not required unless explicitly stated.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">label</dt>
<dd>
<p>A string. The label or label condition on which to run the Pipeline or individual <code>stage</code>.</p>
<div class="paragraph">
<p>This option is valid for <code>node</code>, <code>docker</code>, and <code>dockerfile</code>, and is required for
<code>node</code>.</p>
</div>
</dd>
<dt class="hdlist1">customWorkspace</dt>
<dd>
<p>A string. Run the Pipeline or individual <code>stage</code> this <code>agent</code>
is applied to within this custom workspace, rather than the default. It can be
either a relative path, in which case the custom workspace will be under the
workspace root on the node, or an absolute path. For example:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="groovy"><span class="n">agent</span> <span class="o">{</span>
    <span class="n">node</span> <span class="o">{</span>
        <span class="n">label</span> <span class="s1">'my-defined-label'</span>
        <span class="n">customWorkspace</span> <span class="s1">'/some/other/path'</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This option is valid for <code>node</code>, <code>docker</code>, and <code>dockerfile</code>.</p>
</div>
</dd>
<dt class="hdlist1">reuseNode</dt>
<dd>
<p>A boolean, false by default. If true, run the container on the node
specified at the top-level of the Pipeline, in the same workspace, rather than
on a new node entirely.</p>
<div class="paragraph">
<p>This option is valid for <code>docker</code> and <code>dockerfile</code>, and only has an effect when
used on an <code>agent</code> for an individual <code>stage</code>.</p>
</div>
</dd>
<dt class="hdlist1">args</dt>
<dd>
<p>A string. Runtime arguments to pass to <code>docker run</code>.</p>
<div class="paragraph">
<p>This option is valid for <code>docker</code> and <code>dockerfile</code>.</p>
</div>
</dd>
</dl>
</div>
<div id="agent-example" class="exampleblock">
<div class="title">Example 1. Docker Agent, Declarative Pipeline</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="groovy"><span class="n">pipeline</span> <span class="o">{</span>
    <span class="n">agent</span> <span class="o">{</span> <span class="n">docker</span> <span class="s1">'maven:3.8.6-eclipse-temurin-11'</span> <span class="o">}</span> <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="n">stages</span> <span class="o">{</span>
        <span class="n">stage</span><span class="o">(</span><span class="s1">'Example Build'</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">steps</span> <span class="o">{</span>
                <span class="n">sh</span> <span class="s1">'mvn -B clean verify'</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Execute all the steps defined in this Pipeline within a newly created container
of the given name and tag (<code>maven:3.8.6-eclipse-temurin-11</code>).</td>
</tr>
</table>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title">Example 2. Stage-level Agent Section</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="groovy"><span class="n">pipeline</span> <span class="o">{</span>
    <span class="n">agent</span> <span class="n">none</span> <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="n">stages</span> <span class="o">{</span>
        <span class="n">stage</span><span class="o">(</span><span class="s1">'Example Build'</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">agent</span> <span class="o">{</span> <span class="n">docker</span> <span class="s1">'maven:3.8.6-eclipse-temurin-11'</span> <span class="o">}</span> <i class="conum" data-value="2"></i><b>(2)</b>
            <span class="n">steps</span> <span class="o">{</span>
                <span class="n">echo</span> <span class="s1">'Hello, Maven'</span>
                <span class="n">sh</span> <span class="s1">'mvn --version'</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="n">stage</span><span class="o">(</span><span class="s1">'Example Test'</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">agent</span> <span class="o">{</span> <span class="n">docker</span> <span class="s1">'openjdk:8-jre'</span> <span class="o">}</span> <i class="conum" data-value="3"></i><b>(3)</b>
            <span class="n">steps</span> <span class="o">{</span>
                <span class="n">echo</span> <span class="s1">'Hello, JDK'</span>
                <span class="n">sh</span> <span class="s1">'java -version'</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Defining <code>agent none</code> at the top-level of the Pipeline ensures that
<a href="../../glossary/#executor">an Executor</a> will not be assigned unnecessarily.
Using <code>agent none</code> also forces each <code>stage</code> section to contain its own <code>agent</code> section.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Execute the steps in this stage in a newly created container using this image.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Execute the steps in this stage in a newly created container using a different image
from the previous stage.</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="post"><a class="anchor" href="#post"></a>post</h4>
<div class="paragraph">
<p>The <code>post</code> section defines one or more additional <a href="#declarative-steps">steps</a>
that are run upon the completion of a Pipeline&#8217;s or stage&#8217;s run (depending on
the location of the <code>post</code> section within the Pipeline). <code>post</code> can support any
of the following <a href="#post-conditions">post-condition</a> blocks: <code>always</code>,
<code>changed</code>, <code>fixed</code>, <code>regression</code>, <code>aborted</code>, <code>failure</code>, <code>success</code>,
<code>unstable</code>, <code>unsuccessful</code>, and <code>cleanup</code>. These condition blocks allow the execution
of steps inside each condition depending on the completion status of
the Pipeline or stage. The condition blocks are executed in the order
shown below.</p>
</div>
<table class="tableblock frame-all grid-all stretch syntax">
<colgroup>
<col style="width: 10%;">
<col style="width: 90%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">Required</p></th>
<td class="tableblock halign-right valign-top"><div class="content"><div class="paragraph">
<p>No</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">Parameters</p></th>
<td class="tableblock halign-right valign-top"><div class="content"><div class="paragraph">
<p><em>None</em></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">Allowed</p></th>
<td class="tableblock halign-right valign-top"><div class="content"><div class="paragraph">
<p>In the top-level <code>pipeline</code> block and each <code>stage</code> block.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="post-conditions"><a class="anchor" href="#post-conditions"></a>Conditions</h5>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>always</code></dt>
<dd>
<p>Run the steps in the <code>post</code> section regardless of the completion
status of the Pipeline&#8217;s or stage&#8217;s run.</p>
</dd>
<dt class="hdlist1"><code>changed</code></dt>
<dd>
<p>Only run the steps in <code>post</code> if the current Pipeline&#8217;s
run has a different completion status from its previous run.</p>
</dd>
<dt class="hdlist1"><code>fixed</code></dt>
<dd>
<p>Only run the steps in <code>post</code> if the current Pipeline&#8217;s
run is successful and the previous run failed or was unstable.</p>
</dd>
<dt class="hdlist1"><code>regression</code></dt>
<dd>
<p>Only run the steps in <code>post</code> if the current Pipeline&#8217;s
or status is failure, unstable, or aborted and the previous run
was successful.</p>
</dd>
<dt class="hdlist1"><code>aborted</code></dt>
<dd>
<p>Only run the steps in <code>post</code> if the current Pipeline&#8217;s
run has an "aborted" status, usually due to the Pipeline being manually aborted.
This is typically denoted by gray in the web UI.</p>
</dd>
<dt class="hdlist1"><code>failure</code></dt>
<dd>
<p>Only run the steps in <code>post</code> if the current Pipeline&#8217;s or stage&#8217;s
run has a "failed" status, typically denoted by red in the web UI.</p>
</dd>
<dt class="hdlist1"><code>success</code></dt>
<dd>
<p>Only run the steps in <code>post</code> if the current Pipeline&#8217;s or stage&#8217;s
run has a "success" status, typically denoted by blue or green in the web UI.</p>
</dd>
<dt class="hdlist1"><code>unstable</code></dt>
<dd>
<p>Only run the steps in <code>post</code> if the current Pipeline&#8217;s
run has an "unstable" status, usually caused by test failures, code violations,
etc. This is typically denoted by yellow in the web UI.</p>
</dd>
<dt class="hdlist1"><code>unsuccessful</code></dt>
<dd>
<p>Only run the steps in <code>post</code> if the current Pipeline&#8217;s or stage&#8217;s
run has not a "success" status. This is typically denoted in the web UI depending
on the status previously mentioned (for stages this may fire if the build itself is unstable).</p>
</dd>
<dt class="hdlist1"><code>cleanup</code></dt>
<dd>
<p>Run the steps in this <code>post</code> condition after every other
<code>post</code> condition has been evaluated, regardless of the Pipeline or
stage&#8217;s status.</p>
</dd>
</dl>
</div>
<div id="post-example" class="exampleblock">
<div class="title">Example 3. Post Section, Declarative Pipeline</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="groovy"><span class="n">pipeline</span> <span class="o">{</span>
    <span class="n">agent</span> <span class="n">any</span>
    <span class="n">stages</span> <span class="o">{</span>
        <span class="n">stage</span><span class="o">(</span><span class="s1">'Example'</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">steps</span> <span class="o">{</span>
                <span class="n">echo</span> <span class="s1">'Hello World'</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="n">post</span> <span class="o">{</span> <i class="conum" data-value="1"></i><b>(1)</b>
        <span class="n">always</span> <span class="o">{</span> <i class="conum" data-value="2"></i><b>(2)</b>
            <span class="n">echo</span> <span class="s1">'I will always say Hello again!'</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Conventionally, the <code>post</code> section should be placed at the end of the
Pipeline.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><a href="#post-conditions">Post-condition</a> blocks contain <a href="#declarative-steps">steps</a>
the same as the <a href="#steps">steps</a> section.</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="stages"><a class="anchor" href="#stages"></a>stages</h4>
<div class="paragraph">
<p>Containing a sequence of one or more <a href="#stage">stage</a> directives, the <code>stages</code> section is where
the bulk of the "work" described by a Pipeline will be located. At a minimum, it
is recommended that <code>stages</code> contain at least one <a href="#stage">stage</a> directive for each
discrete part of the continuous delivery process, such as Build, Test, and
Deploy.</p>
</div>
<table class="tableblock frame-all grid-all stretch syntax">
<colgroup>
<col style="width: 10%;">
<col style="width: 90%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">Required</p></th>
<td class="tableblock halign-right valign-top"><div class="content"><div class="paragraph">
<p>Yes</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">Parameters</p></th>
<td class="tableblock halign-right valign-top"><div class="content"><div class="paragraph">
<p><em>None</em></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">Allowed</p></th>
<td class="tableblock halign-right valign-top"><div class="content"><div class="paragraph">
<p>Only once, inside the <code>pipeline</code> block.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div id="stages-example" class="exampleblock">
<div class="title">Example 4. Stages, Declarative Pipeline</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="groovy"><span class="n">pipeline</span> <span class="o">{</span>
    <span class="n">agent</span> <span class="n">any</span>
    <span class="n">stages</span> <span class="o">{</span> <i class="conum" data-value="1"></i><b>(1)</b>
        <span class="n">stage</span><span class="o">(</span><span class="s1">'Example'</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">steps</span> <span class="o">{</span>
                <span class="n">echo</span> <span class="s1">'Hello World'</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>stages</code> section will typically follow the directives such as <code>agent</code>,
<code>options</code>, etc.</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="steps"><a class="anchor" href="#steps"></a>steps</h4>
<div class="paragraph">
<p>The <code>steps</code> section defines a series of one or more <a href="#declarative-steps">steps</a>
to be executed in a given <code>stage</code> directive.</p>
</div>
<table class="tableblock frame-all grid-all stretch syntax">
<colgroup>
<col style="width: 10%;">
<col style="width: 90%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">Required</p></th>
<td class="tableblock halign-right valign-top"><div class="content"><div class="paragraph">
<p>Yes</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">Parameters</p></th>
<td class="tableblock halign-right valign-top"><div class="content"><div class="paragraph">
<p><em>None</em></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">Allowed</p></th>
<td class="tableblock halign-right valign-top"><div class="content"><div class="paragraph">
<p>Inside each <code>stage</code> block.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div id="steps-example" class="exampleblock">
<div class="title">Example 5. Single Step, Declarative Pipeline</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="grovy">pipeline {
    agent any
    stages {
        stage('Example') {
            steps { <i class="conum" data-value="1"></i><b>(1)</b>
                echo 'Hello World'
            }
        }
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>steps</code> section must contain one or more steps.</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="declarative-directives"><a class="anchor" href="#declarative-directives"></a>Directives</h3>
<div class="sect3">
<h4 id="environment"><a class="anchor" href="#environment"></a>environment</h4>
<div class="paragraph">
<p>The <code>environment</code> directive specifies a sequence of key-value pairs which will
be defined as environment variables for all steps, or stage-specific steps,
depending on where the <code>environment</code> directive is located within the Pipeline.</p>
</div>
<div class="paragraph">
<p>This directive supports a special helper method <code>credentials()</code> which can be
used to access pre-defined Credentials by their identifier in the Jenkins
environment.</p>
</div>
<table class="tableblock frame-all grid-all stretch syntax">
<colgroup>
<col style="width: 10%;">
<col style="width: 90%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">Required</p></th>
<td class="tableblock halign-right valign-top"><div class="content"><div class="paragraph">
<p>No</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">Parameters</p></th>
<td class="tableblock halign-right valign-top"><div class="content"><div class="paragraph">
<p><em>None</em></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">Allowed</p></th>
<td class="tableblock halign-right valign-top"><div class="content"><div class="paragraph">
<p>Inside the <code>pipeline</code> block, or within <code>stage</code> directives.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="supported-credentials-type"><a class="anchor" href="#supported-credentials-type"></a>Supported Credentials Type</h5>
<div class="dlist">
<dl>
<dt class="hdlist1">Secret Text</dt>
<dd>
<p>the environment variable specified will be set to the Secret Text content</p>
</dd>
<dt class="hdlist1">Secret File</dt>
<dd>
<p>the environment variable specified will be set to the location of the File
file that is temporarily created</p>
</dd>
<dt class="hdlist1">Username and password</dt>
<dd>
<p>the environment variable specified will be set to <code>username:password</code> and two
additional environment variables will be automatically defined: <code>MYVARNAME_USR</code>
and <code>MYVARNAME_PSW</code> respectively.</p>
</dd>
<dt class="hdlist1">SSH with Private Key</dt>
<dd>
<p>the environment variable specified will be set to the location of the SSH key
file that is temporarily created and two additional environment variables may
be automatically defined: <code>MYVARNAME_USR</code> and <code>MYVARNAME_PSW</code> (holding the
passphrase).</p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Unsupported credentials type causes the pipeline to fail with the message: <code>org.jenkinsci.plugins.credentialsbinding.impl.CredentialNotFoundException: No suitable binding handler could be found for type &lt;unsupportedType&gt;.</code></p>
</div>
</td>
</tr>
</table>
</div>
<div id="environment-example" class="exampleblock">
<div class="title">Example 6. Secret Text Credentials, Declarative Pipeline</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="groovy"><span class="n">pipeline</span> <span class="o">{</span>
    <span class="n">agent</span> <span class="n">any</span>
    <span class="n">environment</span> <span class="o">{</span> <i class="conum" data-value="1"></i><b>(1)</b>
        <span class="n">CC</span> <span class="o">=</span> <span class="s1">'clang'</span>
    <span class="o">}</span>
    <span class="n">stages</span> <span class="o">{</span>
        <span class="n">stage</span><span class="o">(</span><span class="s1">'Example'</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">environment</span> <span class="o">{</span> <i class="conum" data-value="2"></i><b>(2)</b>
                <span class="n">AN_ACCESS_KEY</span> <span class="o">=</span> <span class="n">credentials</span><span class="o">(</span><span class="s1">'my-predefined-secret-text'</span><span class="o">)</span> <i class="conum" data-value="3"></i><b>(3)</b>
            <span class="o">}</span>
            <span class="n">steps</span> <span class="o">{</span>
                <span class="n">sh</span> <span class="s1">'printenv'</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>An <code>environment</code> directive used in the top-level <code>pipeline</code> block will
apply to all steps within the Pipeline.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>An <code>environment</code> directive defined within a <code>stage</code> will only apply the
given environment variables to steps within the <code>stage</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The <code>environment</code> block has a helper method <code>credentials()</code> defined which
can be used to access pre-defined Credentials by their identifier in the
Jenkins environment.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title">Example 7. Username and Password Credentials</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="groovy"><span class="n">pipeline</span> <span class="o">{</span>
    <span class="n">agent</span> <span class="n">any</span>
    <span class="n">stages</span> <span class="o">{</span>
        <span class="n">stage</span><span class="o">(</span><span class="s1">'Example Username/Password'</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">environment</span> <span class="o">{</span>
                <span class="n">SERVICE_CREDS</span> <span class="o">=</span> <span class="n">credentials</span><span class="o">(</span><span class="s1">'my-predefined-username-password'</span><span class="o">)</span>
            <span class="o">}</span>
            <span class="n">steps</span> <span class="o">{</span>
                <span class="n">sh</span> <span class="s1">'echo "Service user is $SERVICE_CREDS_USR"'</span>
                <span class="n">sh</span> <span class="s1">'echo "Service password is $SERVICE_CREDS_PSW"'</span>
                <span class="n">sh</span> <span class="s1">'curl -u $SERVICE_CREDS https://myservice.example.com'</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="n">stage</span><span class="o">(</span><span class="s1">'Example SSH Username with private key'</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">environment</span> <span class="o">{</span>
                <span class="n">SSH_CREDS</span> <span class="o">=</span> <span class="n">credentials</span><span class="o">(</span><span class="s1">'my-predefined-ssh-creds'</span><span class="o">)</span>
            <span class="o">}</span>
            <span class="n">steps</span> <span class="o">{</span>
                <span class="n">sh</span> <span class="s1">'echo "SSH private key is located at $SSH_CREDS"'</span>
                <span class="n">sh</span> <span class="s1">'echo "SSH user is $SSH_CREDS_USR"'</span>
                <span class="n">sh</span> <span class="s1">'echo "SSH passphrase is $SSH_CREDS_PSW"'</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="options"><a class="anchor" href="#options"></a>options</h4>
<div class="paragraph">
<p>The <code>options</code> directive allows configuring Pipeline-specific options from
within the Pipeline itself. Pipeline provides a number of these options, such
as <code>buildDiscarder</code>, but they may also be provided by plugins, such as
<code>timestamps</code>.</p>
</div>
<table class="tableblock frame-all grid-all stretch syntax">
<colgroup>
<col style="width: 10%;">
<col style="width: 90%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">Required</p></th>
<td class="tableblock halign-right valign-top"><div class="content"><div class="paragraph">
<p>No</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">Parameters</p></th>
<td class="tableblock halign-right valign-top"><div class="content"><div class="paragraph">
<p><em>None</em></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">Allowed</p></th>
<td class="tableblock halign-right valign-top"><div class="content"><div class="paragraph">
<p>Inside the <code>pipeline</code> block, or (with certain limitations) within <code>stage</code> directives.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="available-options"><a class="anchor" href="#available-options"></a>Available Options</h5>
<div class="dlist">
<dl>
<dt class="hdlist1">buildDiscarder</dt>
<dd>
<p>Persist artifacts and console output for the specific number
of recent Pipeline runs. For example: <code>options { buildDiscarder(logRotator(numToKeepStr: '1')) }</code></p>
</dd>
<dt class="hdlist1">checkoutToSubdirectory</dt>
<dd>
<p>Perform the automatic source control checkout
in a subdirectory of the workspace. For example: <code>options { checkoutToSubdirectory('foo') }</code></p>
</dd>
<dt class="hdlist1">disableConcurrentBuilds</dt>
<dd>
<p>Disallow concurrent executions of the Pipeline. Can
be useful for preventing simultaneous accesses to shared resources, etc. For
example: <code>options { disableConcurrentBuilds() }</code></p>
</dd>
<dt class="hdlist1">disableResume</dt>
<dd>
<p>Do not allow the pipeline to resume if the controller restarts.
For example: <code>options { disableResume() }</code></p>
</dd>
<dt class="hdlist1">newContainerPerStage</dt>
<dd>
<p>Used with <code>docker</code> or <code>dockerfile</code> top-level
agent. When specified, each stage will run in a new container instance
on the same node, rather than all stages running in the same container instance.</p>
</dd>
<dt class="hdlist1">overrideIndexTriggers</dt>
<dd>
<p>Allows overriding default treatment of branch indexing triggers.
If branch indexing triggers are disabled at the multibranch or organization label, <code>options { overrideIndexTriggers(true) }</code>
will enable them for this job only. Otherwise, <code>options { overrideIndexTriggers(false) }</code> will
disable branch indexing triggers for this job only.</p>
</dd>
<dt class="hdlist1">preserveStashes</dt>
<dd>
<p>Preserve stashes from completed builds, for use with
stage restarting. For example: <code>options { preserveStashes() }</code> to
preserve the stashes from the most recent completed build, or <code>options
{ preserveStashes(buildCount: 5) }</code> to preserve the stashes from the five most
recent completed builds.</p>
</dd>
<dt class="hdlist1">quietPeriod</dt>
<dd>
<p>Set the quiet period, in seconds, for the Pipeline, overriding the global default.
For example: <code>options { quietPeriod(30) }</code></p>
</dd>
<dt class="hdlist1">retry</dt>
<dd>
<p>On failure, retry the entire Pipeline the specified number of times.
For example: <code>options { retry(3) }</code></p>
</dd>
<dt class="hdlist1">skipDefaultCheckout</dt>
<dd>
<p>Skip checking out code from source control by default in
the <code>agent</code> directive. For example: <code>options { skipDefaultCheckout() }</code></p>
</dd>
<dt class="hdlist1">skipStagesAfterUnstable</dt>
<dd>
<p>Skip stages once the build status has gone to UNSTABLE. For example: <code>options { skipStagesAfterUnstable() }</code></p>
</dd>
<dt class="hdlist1">timeout</dt>
<dd>
<p>Set a timeout period for the Pipeline run, after which Jenkins should
abort the Pipeline. For example: <code>options { timeout(time: 1, unit: 'HOURS') }</code></p>
</dd>
</dl>
</div>
<div id="options-example" class="exampleblock">
<div class="title">Example 8. Global Timeout, Declarative Pipeline</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="groovy"><span class="n">pipeline</span> <span class="o">{</span>
    <span class="n">agent</span> <span class="n">any</span>
    <span class="n">options</span> <span class="o">{</span>
        <span class="n">timeout</span><span class="o">(</span><span class="nl">time:</span> <span class="mi">1</span><span class="o">,</span> <span class="nl">unit:</span> <span class="s1">'HOURS'</span><span class="o">)</span> <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="o">}</span>
    <span class="n">stages</span> <span class="o">{</span>
        <span class="n">stage</span><span class="o">(</span><span class="s1">'Example'</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">steps</span> <span class="o">{</span>
                <span class="n">echo</span> <span class="s1">'Hello World'</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Specifying a global execution timeout of one hour, after which Jenkins will abort the Pipeline run.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">timestamps</dt>
<dd>
<p>Prepend all console output generated by the Pipeline run with the
time at which the line was emitted. For example: <code>options { timestamps() }</code></p>
</dd>
<dt class="hdlist1">parallelsAlwaysFailFast</dt>
<dd>
<p>Set failfast true for all subsequent parallel stages in the pipeline.
For example: <code>options { parallelsAlwaysFailFast() }</code></p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>A comprehensive list of available options is pending the completion of
<a href="https://github.com/jenkins-infra/helpdesk/issues/820">help desk ticket 820</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="stage-options"><a class="anchor" href="#stage-options"></a>stage options</h5>
<div class="paragraph">
<p>The <code>options</code> directive for a <code>stage</code> is similar to the <code>options</code> directive at
the root of the Pipeline. However, the <code>stage</code>-level <code>options</code> can only contain
steps like <code>retry</code>, <code>timeout</code>, or <code>timestamps</code>, or Declarative options that are
relevant to a <code>stage</code>, like <code>skipDefaultCheckout</code>.</p>
</div>
<div class="paragraph">
<p>Inside a <code>stage</code>, the steps in the <code>options</code> directive are invoked before
entering the <code>agent</code> or checking any <code>when</code> conditions.</p>
</div>
<div class="sect5">
<h6 id="available-stage-options"><a class="anchor" href="#available-stage-options"></a>Available Stage Options</h6>
<div class="dlist">
<dl>
<dt class="hdlist1">skipDefaultCheckout</dt>
<dd>
<p>Skip checking out code from source control by default in
the <code>agent</code> directive. For example: <code>options { skipDefaultCheckout() }</code></p>
</dd>
<dt class="hdlist1">timeout</dt>
<dd>
<p>Set a timeout period for this stage, after which Jenkins should
abort the stage. For example: <code>options { timeout(time: 1, unit: 'HOURS') }</code></p>
</dd>
</dl>
</div>
<div id="stage-options-example" class="exampleblock">
<div class="title">Example 9. Stage Timeout, Declarative Pipeline</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="groovy"><span class="n">pipeline</span> <span class="o">{</span>
    <span class="n">agent</span> <span class="n">any</span>
    <span class="n">stages</span> <span class="o">{</span>
        <span class="n">stage</span><span class="o">(</span><span class="s1">'Example'</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">options</span> <span class="o">{</span>
                <span class="n">timeout</span><span class="o">(</span><span class="nl">time:</span> <span class="mi">1</span><span class="o">,</span> <span class="nl">unit:</span> <span class="s1">'HOURS'</span><span class="o">)</span> <i class="conum" data-value="1"></i><b>(1)</b>
            <span class="o">}</span>
            <span class="n">steps</span> <span class="o">{</span>
                <span class="n">echo</span> <span class="s1">'Hello World'</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Specifying an execution timeout of one hour for the <code>Example</code> stage, after
which Jenkins will abort the Pipeline run.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">retry</dt>
<dd>
<p>On failure, retry this stage the specified number of times.
For example: <code>options { retry(3) }</code></p>
</dd>
<dt class="hdlist1">timestamps</dt>
<dd>
<p>Prepend all console output generated during this stage with the
time at which the line was emitted. For example: <code>options { timestamps() }</code></p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="parameters"><a class="anchor" href="#parameters"></a>parameters</h4>
<div class="paragraph">
<p>The <code>parameters</code> directive provides a list of parameters that a user should
provide when triggering the Pipeline. The values for these user-specified
parameters are made available to Pipeline steps via the <code>params</code> object,
see the <a href="#parameters-example">Parameters, Declarative Pipeline</a> for its specific usage.</p>
</div>
<table class="tableblock frame-all grid-all stretch syntax">
<colgroup>
<col style="width: 10%;">
<col style="width: 90%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">Required</p></th>
<td class="tableblock halign-right valign-top"><div class="content"><div class="paragraph">
<p>No</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">Parameters</p></th>
<td class="tableblock halign-right valign-top"><div class="content"><div class="paragraph">
<p><em>None</em></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">Allowed</p></th>
<td class="tableblock halign-right valign-top"><div class="content"><div class="paragraph">
<p>Only once, inside the <code>pipeline</code> block.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="available-parameters"><a class="anchor" href="#available-parameters"></a>Available Parameters</h5>
<div class="dlist">
<dl>
<dt class="hdlist1">string</dt>
<dd>
<p>A parameter of a string type, for example: <code>parameters { string(name: 'DEPLOY_ENV', defaultValue: 'staging', description: '') }</code></p>
</dd>
<dt class="hdlist1">text</dt>
<dd>
<p>A text parameter, which can contain multiple lines, for example: <code>parameters { text(name: 'DEPLOY_TEXT', defaultValue: 'One\nTwo\nThree\n', description: '') }</code></p>
</dd>
<dt class="hdlist1">booleanParam</dt>
<dd>
<p>A boolean parameter, for example: <code>parameters { booleanParam(name: 'DEBUG_BUILD', defaultValue: true, description: '') }</code></p>
</dd>
<dt class="hdlist1">choice</dt>
<dd>
<p>A choice parameter, for example: <code>parameters { choice(name: 'CHOICES', choices: ['one', 'two', 'three'], description: '') }</code></p>
</dd>
<dt class="hdlist1">password</dt>
<dd>
<p>A password parameter, for example: <code>parameters { password(name: 'PASSWORD', defaultValue: 'SECRET', description: 'A secret password') }</code></p>
</dd>
</dl>
</div>
<div id="parameters-example" class="exampleblock">
<div class="title">Example 10. Parameters, Declarative Pipeline</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="groovy"><span class="n">pipeline</span> <span class="o">{</span>
    <span class="n">agent</span> <span class="n">any</span>
    <span class="n">parameters</span> <span class="o">{</span>
        <span class="n">string</span><span class="o">(</span><span class="nl">name:</span> <span class="s1">'PERSON'</span><span class="o">,</span> <span class="nl">defaultValue:</span> <span class="s1">'Mr Jenkins'</span><span class="o">,</span> <span class="nl">description:</span> <span class="s1">'Who should I say hello to?'</span><span class="o">)</span>

        <span class="n">text</span><span class="o">(</span><span class="nl">name:</span> <span class="s1">'BIOGRAPHY'</span><span class="o">,</span> <span class="nl">defaultValue:</span> <span class="s1">''</span><span class="o">,</span> <span class="nl">description:</span> <span class="s1">'Enter some information about the person'</span><span class="o">)</span>

        <span class="n">booleanParam</span><span class="o">(</span><span class="nl">name:</span> <span class="s1">'TOGGLE'</span><span class="o">,</span> <span class="nl">defaultValue:</span> <span class="kc">true</span><span class="o">,</span> <span class="nl">description:</span> <span class="s1">'Toggle this value'</span><span class="o">)</span>

        <span class="n">choice</span><span class="o">(</span><span class="nl">name:</span> <span class="s1">'CHOICE'</span><span class="o">,</span> <span class="nl">choices:</span> <span class="o">[</span><span class="s1">'One'</span><span class="o">,</span> <span class="s1">'Two'</span><span class="o">,</span> <span class="s1">'Three'</span><span class="o">],</span> <span class="nl">description:</span> <span class="s1">'Pick something'</span><span class="o">)</span>

        <span class="n">password</span><span class="o">(</span><span class="nl">name:</span> <span class="s1">'PASSWORD'</span><span class="o">,</span> <span class="nl">defaultValue:</span> <span class="s1">'SECRET'</span><span class="o">,</span> <span class="nl">description:</span> <span class="s1">'Enter a password'</span><span class="o">)</span>
    <span class="o">}</span>
    <span class="n">stages</span> <span class="o">{</span>
        <span class="n">stage</span><span class="o">(</span><span class="s1">'Example'</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">steps</span> <span class="o">{</span>
                <span class="n">echo</span> <span class="s2">"Hello ${params.PERSON}"</span>

                <span class="n">echo</span> <span class="s2">"Biography: ${params.BIOGRAPHY}"</span>

                <span class="n">echo</span> <span class="s2">"Toggle: ${params.TOGGLE}"</span>

                <span class="n">echo</span> <span class="s2">"Choice: ${params.CHOICE}"</span>

                <span class="n">echo</span> <span class="s2">"Password: ${params.PASSWORD}"</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>A comprehensive list of available parameters is pending the completion of
<a href="https://github.com/jenkins-infra/helpdesk/issues/820">help desk ticket 820</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="triggers"><a class="anchor" href="#triggers"></a>triggers</h4>
<div class="paragraph">
<p>The <code>triggers</code> directive defines the automated ways in which the Pipeline
should be re-triggered. For Pipelines which are integrated with a source such
as GitHub or BitBucket, <code>triggers</code> may not be necessary as webhooks-based
integration will likely already be present. The triggers currently available are
<code>cron</code>, <code>pollSCM</code> and <code>upstream</code>.</p>
</div>
<table class="tableblock frame-all grid-all stretch syntax">
<colgroup>
<col style="width: 10%;">
<col style="width: 90%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">Required</p></th>
<td class="tableblock halign-right valign-top"><div class="content"><div class="paragraph">
<p>No</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">Parameters</p></th>
<td class="tableblock halign-right valign-top"><div class="content"><div class="paragraph">
<p><em>None</em></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">Allowed</p></th>
<td class="tableblock halign-right valign-top"><div class="content"><div class="paragraph">
<p>Only once, inside the <code>pipeline</code> block.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="dlist">
<dl>
<dt class="hdlist1">cron</dt>
<dd>
<p>Accepts a cron-style string to define a regular interval at which the
Pipeline should be re-triggered, for example: <code>triggers { cron('H */4 * * 1-5') }</code></p>
</dd>
<dt class="hdlist1">pollSCM</dt>
<dd>
<p>Accepts a cron-style string to define a regular interval at which
Jenkins should check for new source changes. If new changes exist, the Pipeline
will be re-triggered. For example: <code>triggers { pollSCM('H */4 * * 1-5') }</code></p>
</dd>
<dt class="hdlist1">upstream</dt>
<dd>
<p>Accepts a comma-separated string of jobs and a threshold. When any
job in the string finishes with the minimum threshold, the Pipeline will be
re-triggered. For example:
<code>triggers { upstream(upstreamProjects: 'job1,job2', threshold: hudson.model.Result.SUCCESS) }</code></p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>pollSCM</code> trigger is only available in Jenkins 2.22 or later.</p>
</div>
</td>
</tr>
</table>
</div>
<div id="triggers-example" class="exampleblock">
<div class="title">Example 11. Triggers, Declarative Pipeline</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="groovy"><span class="c1">// Declarative //</span>
<span class="n">pipeline</span> <span class="o">{</span>
    <span class="n">agent</span> <span class="n">any</span>
    <span class="n">triggers</span> <span class="o">{</span>
        <span class="n">cron</span><span class="o">(</span><span class="s1">'H */4 * * 1-5'</span><span class="o">)</span>
    <span class="o">}</span>
    <span class="n">stages</span> <span class="o">{</span>
        <span class="n">stage</span><span class="o">(</span><span class="s1">'Example'</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">steps</span> <span class="o">{</span>
                <span class="n">echo</span> <span class="s1">'Hello World'</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="cron-syntax"><a class="anchor" href="#cron-syntax"></a>Jenkins cron syntax</h4>
<div class="paragraph">
<p>The Jenkins cron syntax follows the syntax of the
<a href="https://en.wikipedia.org/wiki/Cron">cron utility</a> (with minor differences).
Specifically, each line consists of 5 fields separated by TAB or whitespace:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">MINUTE</th>
<th class="tableblock halign-left valign-top">HOUR</th>
<th class="tableblock halign-left valign-top">DOM</th>
<th class="tableblock halign-left valign-top">MONTH</th>
<th class="tableblock halign-left valign-top">DOW</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minutes within the hour (0–59)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The hour of the day (0–23)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The day of the month (1–31)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The month (1–12)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The day of the week (0–7) where 0 and 7 are Sunday.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>To specify multiple values for one field, the following operators are
available. In the order of precedence,</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>*</code> specifies all valid values</p>
</li>
<li>
<p><code>M-N</code> specifies a range of values</p>
</li>
<li>
<p><code>M-N/X</code> or <code>*/X</code> steps by intervals of <code>X</code> through the specified range or whole valid range</p>
</li>
<li>
<p><code>A,B,&#8230;&#8203;,Z</code> enumerates multiple values</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To allow periodically scheduled tasks to produce even load on the system,
the symbol <code>H</code> (for “hash”) should be used wherever possible.
For example, using <code>0 0 * * *</code> for a dozen daily jobs
will cause a large spike at midnight.
In contrast, using <code>H H * * *</code> would still execute each job once a day,
but not all at the same time, better using limited resources.</p>
</div>
<div class="paragraph">
<p>The <code>H</code> symbol can be used with a range. For example, <code>H H(0-7) * * *</code>
means some time between 12:00 AM (midnight) to 7:59 AM.
You can also use step intervals with <code>H</code>, with or without ranges.</p>
</div>
<div class="paragraph">
<p>The <code>H</code> symbol can be thought of as a random value over a range,
but it actually is a hash of the job name, not a random function, so that
the value remains stable for any given project.</p>
</div>
<div class="paragraph">
<p>Beware that for the day of month field, short cycles such as <code>*/3</code>
or <code>H/3</code> will not work consistently near the end of most months,
due to variable month lengths.  For example, <code>*/3</code> will run on the
1st, 4th, …31st days of a long month, then again the next day of
the next month.  Hashes are always chosen in the 1-28 range, so
<code>H/3</code> will produce a gap between runs of between 3 and 6 days at
the end of a month.  (Longer cycles will also have inconsistent
lengths but the effect may be relatively less noticeable.)</p>
</div>
<div class="paragraph">
<p>Empty lines and lines that start with <code>#</code> will be ignored as comments.</p>
</div>
<div class="paragraph">
<p>In addition, <code>@yearly</code>, <code>@annually</code>, <code>@monthly</code>,
<code>@weekly</code>, <code>@daily</code>, <code>@midnight</code>,
and <code>@hourly</code> are supported as convenient aliases.
These use the hash system for automatic balancing.
For example, <code>@hourly</code> is the same as <code>H * * * *</code> and could mean at any time during the hour.
<code>@midnight</code> actually means some time between 12:00 AM and 2:59 AM.</p>
</div>
<table id="cron-syntax-examples" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Jenkins cron syntax examples</caption>
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">every fifteen minutes (perhaps at :07, :22, :37, :52)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>triggers{ cron('H/15 * * * *') }</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">every ten minutes in the first half of every hour (three times, perhaps at :04, :14, :24)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>triggers{ cron('H(0-29)/10 * * * *') }</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">once every two hours at 45 minutes past the hour starting at 9:45 AM and finishing at 3:45 PM every weekday.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>triggers{ cron('45 9-16/2 * * 1-5') }</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">once in every two hours slot between 9 AM and 5 PM every weekday (perhaps at 10:38 AM, 12:38 PM, 2:38 PM, 4:38 PM)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>triggers{ cron('H H(9-16)/2 * * 1-5') }</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">once a day on the 1st and 15th of every month except December</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>triggers{ cron('H H 1,15 1-11 *') }</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="stage"><a class="anchor" href="#stage"></a>stage</h4>
<div class="paragraph">
<p>The <code>stage</code> directive goes in the <code>stages</code> section and should contain a
<a href="#steps">steps</a> section, an optional <code>agent</code> section, or other stage-specific directives.
Practically speaking, all of the real work done by a Pipeline will be wrapped
in one or more <code>stage</code> directives.</p>
</div>
<table class="tableblock frame-all grid-all stretch syntax">
<colgroup>
<col style="width: 10%;">
<col style="width: 90%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">Required</p></th>
<td class="tableblock halign-right valign-top"><div class="content"><div class="paragraph">
<p>At least one</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">Parameters</p></th>
<td class="tableblock halign-right valign-top"><div class="content"><div class="paragraph">
<p>One mandatory parameter, a string for the name of the stage.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">Allowed</p></th>
<td class="tableblock halign-right valign-top"><div class="content"><div class="paragraph">
<p>Inside the <code>stages</code> section.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div id="stage-example" class="exampleblock">
<div class="title">Example 12. Stage, Declarative Pipeline</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="groovy"><span class="c1">// Declarative //</span>
<span class="n">pipeline</span> <span class="o">{</span>
    <span class="n">agent</span> <span class="n">any</span>
    <span class="n">stages</span> <span class="o">{</span>
        <span class="n">stage</span><span class="o">(</span><span class="s1">'Example'</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">steps</span> <span class="o">{</span>
                <span class="n">echo</span> <span class="s1">'Hello World'</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="tools"><a class="anchor" href="#tools"></a>tools</h4>
<div class="paragraph">
<p>A section defining tools to auto-install and put on the <code>PATH</code>. This is ignored
if <code>agent none</code> is specified.</p>
</div>
<table class="tableblock frame-all grid-all stretch syntax">
<colgroup>
<col style="width: 10%;">
<col style="width: 90%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">Required</p></th>
<td class="tableblock halign-right valign-top"><div class="content"><div class="paragraph">
<p>No</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">Parameters</p></th>
<td class="tableblock halign-right valign-top"><div class="content"><div class="paragraph">
<p><em>None</em></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">Allowed</p></th>
<td class="tableblock halign-right valign-top"><div class="content"><div class="paragraph">
<p>Inside the <code>pipeline</code> block or a <code>stage</code> block.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="supported-tools"><a class="anchor" href="#supported-tools"></a>Supported Tools</h5>
<div class="dlist">
<dl>
<dt class="hdlist1">maven</dt>
<dt class="hdlist1">jdk</dt>
<dt class="hdlist1">gradle</dt>
</dl>
</div>
<div id="tools-example" class="exampleblock">
<div class="title">Example 13. Tools, Declarative Pipeline</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="groovy"><span class="n">pipeline</span> <span class="o">{</span>
    <span class="n">agent</span> <span class="n">any</span>
    <span class="n">tools</span> <span class="o">{</span>
        <span class="n">maven</span> <span class="s1">'apache-maven-3.0.1'</span> <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="o">}</span>
    <span class="n">stages</span> <span class="o">{</span>
        <span class="n">stage</span><span class="o">(</span><span class="s1">'Example'</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">steps</span> <span class="o">{</span>
                <span class="n">sh</span> <span class="s1">'mvn --version'</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The tool name must be pre-configured in Jenkins under <strong>Manage Jenkins</strong> &#8594;
<strong>Global Tool Configuration</strong>.</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="input"><a class="anchor" href="#input"></a>input</h4>
<div class="paragraph">
<p>The <code>input</code> directive on a <code>stage</code> allows you to prompt for input, using the
<a href="/doc/pipeline/steps/pipeline-input-step/#input-wait-for-interactive-input"><code>input</code> step</a>.
The <code>stage</code> will pause after any <code>options</code> have been applied, and before
entering the <code>agent</code> block for that <code>stage</code> or evaluating the <code>when</code> condition of the <code>stage</code>. If the <code>input</code>
is approved, the <code>stage</code> will then continue. Any parameters provided as part of
the <code>input</code> submission will be available in the environment for the rest of the
<code>stage</code>.</p>
</div>
<div class="sect4">
<h5 id="configuration-options"><a class="anchor" href="#configuration-options"></a>Configuration options</h5>
<div class="dlist">
<dl>
<dt class="hdlist1">message</dt>
<dd>
<p>Required. This will be presented to the user when they go to submit
the <code>input</code>.</p>
</dd>
<dt class="hdlist1">id</dt>
<dd>
<p>An optional identifier for this <code>input</code>. The default value is based on the <code>stage</code> name.</p>
</dd>
<dt class="hdlist1">ok</dt>
<dd>
<p>Optional text for the "ok" button on the <code>input</code> form.</p>
</dd>
<dt class="hdlist1">submitter</dt>
<dd>
<p>An optional comma-separated list of users or external group names
who are allowed to submit this <code>input</code>. Defaults to allowing any user.</p>
</dd>
<dt class="hdlist1">submitterParameter</dt>
<dd>
<p>An optional name of an environment variable to set with
the <code>submitter</code> name, if present.</p>
</dd>
<dt class="hdlist1">parameters</dt>
<dd>
<p>An optional list of parameters to prompt the submitter to provide.
See <a href="#parameters">parameters</a> for more information.</p>
</dd>
</dl>
</div>
<div id="input-example" class="exampleblock">
<div class="title">Example 14. Input Step, Declarative Pipeline</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="groovy"><span class="n">pipeline</span> <span class="o">{</span>
    <span class="n">agent</span> <span class="n">any</span>
    <span class="n">stages</span> <span class="o">{</span>
        <span class="n">stage</span><span class="o">(</span><span class="s1">'Example'</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">input</span> <span class="o">{</span>
                <span class="n">message</span> <span class="s2">"Should we continue?"</span>
                <span class="n">ok</span> <span class="s2">"Yes, we should."</span>
                <span class="n">submitter</span> <span class="s2">"alice,bob"</span>
                <span class="n">parameters</span> <span class="o">{</span>
                    <span class="n">string</span><span class="o">(</span><span class="nl">name:</span> <span class="s1">'PERSON'</span><span class="o">,</span> <span class="nl">defaultValue:</span> <span class="s1">'Mr Jenkins'</span><span class="o">,</span> <span class="nl">description:</span> <span class="s1">'Who should I say hello to?'</span><span class="o">)</span>
                <span class="o">}</span>
            <span class="o">}</span>
            <span class="n">steps</span> <span class="o">{</span>
                <span class="n">echo</span> <span class="s2">"Hello, ${PERSON}, nice to meet you."</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="when"><a class="anchor" href="#when"></a>when</h4>
<div class="paragraph">
<p>The <code>when</code> directive allows the Pipeline to determine whether the stage should
be executed depending on the given condition.
The <code>when</code> directive must contain at least one condition.
If the <code>when</code> directive contains more than one condition,
all the child conditions must return true for the stage to execute.
This is the same as if the child conditions were nested in an <code>allOf</code> condition
(see the <a href="#when-example">examples</a> below). If an <code>anyOf</code> condition is used, note that the condition skips remaining tests as soon as the first "true" condition is found.</p>
</div>
<div class="paragraph">
<p>More complex conditional structures can be built
using the nesting conditions: <code>not</code>, <code>allOf</code>, or <code>anyOf</code>.
Nesting conditions may be nested to any arbitrary depth.</p>
</div>
<table class="tableblock frame-all grid-all stretch syntax">
<colgroup>
<col style="width: 10%;">
<col style="width: 90%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">Required</p></th>
<td class="tableblock halign-right valign-top"><div class="content"><div class="paragraph">
<p>No</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">Parameters</p></th>
<td class="tableblock halign-right valign-top"><div class="content"><div class="paragraph">
<p><em>None</em></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">Allowed</p></th>
<td class="tableblock halign-right valign-top"><div class="content"><div class="paragraph">
<p>Inside a <code>stage</code> directive</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="built-in-conditions"><a class="anchor" href="#built-in-conditions"></a>Built-in Conditions</h5>
<div class="dlist">
<dl>
<dt class="hdlist1">branch</dt>
<dd>
<p>Execute the stage when the branch being built matches the branch
pattern (ANT style path glob) given, for example: <code>when { branch 'master' }</code>. Note that this only works on
a multibranch Pipeline.</p>
<div class="paragraph">
<p>The optional parameter <code>comparator</code> may be added after an attribute
to specify how any patterns are evaluated for a match:
<code>EQUALS</code> for a simple string comparison,
<code>GLOB</code> (the default) for an ANT style path glob (same as for example <code>changeset</code>), or
<code>REGEXP</code> for regular expression matching.
For example: <code>when { branch pattern: "release-\\d+", comparator: "REGEXP"}</code></p>
</div>
</dd>
<dt class="hdlist1">buildingTag</dt>
<dd>
<p>Execute the stage when the build is building a tag.
Example: <code>when { buildingTag() }</code></p>
</dd>
<dt class="hdlist1">changelog</dt>
<dd>
<p>Execute the stage if the build&#8217;s SCM changelog contains a given regular expression pattern,
for example: <code>when { changelog '.*^\\[DEPENDENCY\\] .+$' }</code></p>
</dd>
<dt class="hdlist1">changeset</dt>
<dd>
<p>Execute the stage if the build&#8217;s SCM changeset contains one or more files matching the given pattern.
Example: <code>when { changeset "**/*.js" }</code></p>
<div class="paragraph">
<p>The optional parameter <code>comparator</code> may be added after an attribute
to specify how any patterns are evaluated for a match:
<code>EQUALS</code> for a simple string comparison,
<code>GLOB</code> (the default) for an ANT style path glob case insensitive, this can be turned off with the <code>caseSensitive</code> parameter, or
<code>REGEXP</code> for regular expression matching.
For example: <code>when { changeset pattern: ".<strong>TEST\\.java", comparator: "REGEXP" }</code> or <code>when { changeset pattern: "</strong>*/*TEST.java", caseSensitive: true }</code></p>
</div>
</dd>
<dt class="hdlist1">changeRequest</dt>
<dd>
<p>Executes the stage if the current build is for a "change request"
(a.k.a. Pull Request on GitHub and Bitbucket, Merge Request on GitLab, Change in Gerrit, etc.).
When no parameters are passed the stage runs on every change request,
for example: <code>when { changeRequest() }</code>.</p>
<div class="paragraph">
<p>By adding a filter attribute with parameter to the change request,
the stage can be made to run only on matching change requests.
Possible attributes are
<code>id</code>, <code>target</code>, <code>branch</code>, <code>fork</code>, <code>url</code>, <code>title</code>, <code>author</code>, <code>authorDisplayName</code>, and <code>authorEmail</code>.
Each of these corresponds to
a <code>CHANGE_*</code> environment variable, for example: <code>when { changeRequest target: 'master' }</code>.</p>
</div>
<div class="paragraph">
<p>The optional parameter <code>comparator</code> may be added after an attribute
to specify how any patterns are evaluated for a match:
<code>EQUALS</code> for a simple string comparison (the default),
<code>GLOB</code> for an ANT style path glob (same as for example <code>changeset</code>), or
<code>REGEXP</code> for regular expression matching.
Example: <code>when { changeRequest authorEmail: "[\\w_-.]+@example.com", comparator: 'REGEXP' }</code></p>
</div>
</dd>
<dt class="hdlist1">environment</dt>
<dd>
<p>Execute the stage when the specified environment variable is set
to the given value, for example: <code>when { environment name: 'DEPLOY_TO', value: 'production' }</code></p>
</dd>
<dt class="hdlist1">equals</dt>
<dd>
<p>Execute the stage when the expected value is equal to the actual value,
for example: <code>when { equals expected: 2, actual: currentBuild.number }</code></p>
</dd>
<dt class="hdlist1">expression</dt>
<dd>
<p>Execute the stage when the specified Groovy expression evaluates
to true, for example: <code>when { expression { return params.DEBUG_BUILD } }</code> Note that when returning strings from your expressions they must be converted to booleans or return <code>null</code> to evaluate to false. Simply returning "0" or "false" will still evaluate to "true".</p>
</dd>
<dt class="hdlist1">tag</dt>
<dd>
<p>Execute the stage if the <code>TAG_NAME</code> variable matches the given pattern.
Example: <code>when { tag "release-*" }</code>.
If an empty pattern is provided the stage will execute if the <code>TAG_NAME</code> variable exists
(same as <code>buildingTag()</code>).</p>
<div class="paragraph">
<p>The optional parameter <code>comparator</code> may be added after an attribute
to specify how any patterns are evaluated for a match:
<code>EQUALS</code> for a simple string comparison,
<code>GLOB</code> (the default) for an ANT style path glob (same as for example <code>changeset</code>), or
<code>REGEXP</code> for regular expression matching.
For example: <code>when { tag pattern: "release-\\d+", comparator: "REGEXP"}</code></p>
</div>
</dd>
<dt class="hdlist1">not</dt>
<dd>
<p>Execute the stage when the nested condition is false.
Must contain one condition.
For example: <code>when { not { branch 'master' } }</code></p>
</dd>
<dt class="hdlist1">allOf</dt>
<dd>
<p>Execute the stage when all of the nested conditions are true.
Must contain at least one condition.
For example: <code>when { allOf { branch 'master'; environment name: 'DEPLOY_TO', value: 'production' } }</code></p>
</dd>
<dt class="hdlist1">anyOf</dt>
<dd>
<p>Execute the stage when at least one of the nested conditions is true.
Must contain at least one condition.
For example: <code>when { anyOf { branch 'master'; branch 'staging' } }</code></p>
</dd>
<dt class="hdlist1">triggeredBy</dt>
<dd>
<p>Execute the stage when the current build has been triggered by the param given.
For example:</p>
<div class="ulist">
<ul>
<li>
<p><code>when { triggeredBy 'SCMTrigger' }</code></p>
</li>
<li>
<p><code>when { triggeredBy 'TimerTrigger' }</code></p>
</li>
<li>
<p><code>when { triggeredBy 'BuildUpstreamCause' }</code></p>
</li>
<li>
<p><code>when { triggeredBy  cause: "UserIdCause", detail: "vlinde" }</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="evaluating-when-before-entering-agent-in-a-stage"><a class="anchor" href="#evaluating-when-before-entering-agent-in-a-stage"></a>Evaluating <code>when</code> before entering <code>agent</code> in a <code>stage</code></h5>
<div class="paragraph">
<p>By default, the <code>when</code> condition for a <code>stage</code> will be evaluated after
entering the <code>agent</code> for that <code>stage</code>, if one is defined. However, this can
be changed by specifying the <code>beforeAgent</code> option within the <code>when</code>
block. If <code>beforeAgent</code> is set to <code>true</code>, the <code>when</code> condition will be
evaluated first, and the <code>agent</code> will only be entered if the <code>when</code>
condition evaluates to true.</p>
</div>
</div>
<div class="sect4">
<h5 id="evaluating-when-before-the-input-directive"><a class="anchor" href="#evaluating-when-before-the-input-directive"></a>Evaluating <code>when</code> before the <code>input</code> directive</h5>
<div class="paragraph">
<p>By default, the when condition for a stage will not be evaluated before the input, if one is defined.
However, this can be changed by specifying the <code>beforeInput</code> option within the when block. If <code>beforeInput</code> is set to true,
the when condition will be evaluated first, and the input will only be entered if the when condition evaluates to true.</p>
</div>
<div class="paragraph">
<p><code>beforeInput true</code> takes precedence over <code>beforeAgent true</code>.</p>
</div>
</div>
<div class="sect4">
<h5 id="evaluating-when-before-the-options-directive"><a class="anchor" href="#evaluating-when-before-the-options-directive"></a>Evaluating <code>when</code> before the <code>options</code> directive</h5>
<div class="paragraph">
<p>By default, the <code>when</code> condition for a <code>stage</code> will be evaluated after
entering the <code>options</code> for that <code>stage</code>, if any are defined. However, this can
be changed by specifying the <code>beforeOptions</code> option within the <code>when</code>
block. If <code>beforeOptions</code> is set to <code>true</code>, the <code>when</code> condition will be
evaluated first, and the <code>options</code> will only be entered if the <code>when</code>
condition evaluates to true.</p>
</div>
<div class="paragraph">
<p><code>beforeOptions true</code> takes precedence over <code>beforeInput true</code> and <code>beforeAgent true</code>.</p>
</div>
<div id="when-example" class="exampleblock">
<div class="title">Example 15. Single Condition, Declarative Pipeline</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="groovy"><span class="n">pipeline</span> <span class="o">{</span>
    <span class="n">agent</span> <span class="n">any</span>
    <span class="n">stages</span> <span class="o">{</span>
        <span class="n">stage</span><span class="o">(</span><span class="s1">'Example Build'</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">steps</span> <span class="o">{</span>
                <span class="n">echo</span> <span class="s1">'Hello World'</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="n">stage</span><span class="o">(</span><span class="s1">'Example Deploy'</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">when</span> <span class="o">{</span>
                <span class="n">branch</span> <span class="s1">'production'</span>
            <span class="o">}</span>
            <span class="n">steps</span> <span class="o">{</span>
                <span class="n">echo</span> <span class="s1">'Deploying'</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title">Example 16. Multiple Condition, Declarative Pipeline</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="groovy"><span class="n">pipeline</span> <span class="o">{</span>
    <span class="n">agent</span> <span class="n">any</span>
    <span class="n">stages</span> <span class="o">{</span>
        <span class="n">stage</span><span class="o">(</span><span class="s1">'Example Build'</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">steps</span> <span class="o">{</span>
                <span class="n">echo</span> <span class="s1">'Hello World'</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="n">stage</span><span class="o">(</span><span class="s1">'Example Deploy'</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">when</span> <span class="o">{</span>
                <span class="n">branch</span> <span class="s1">'production'</span>
                <span class="n">environment</span> <span class="nl">name:</span> <span class="s1">'DEPLOY_TO'</span><span class="o">,</span> <span class="nl">value:</span> <span class="s1">'production'</span>
            <span class="o">}</span>
            <span class="n">steps</span> <span class="o">{</span>
                <span class="n">echo</span> <span class="s1">'Deploying'</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title">Example 17. Nested condition (same behavior as previous example)</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="groovy"><span class="n">pipeline</span> <span class="o">{</span>
    <span class="n">agent</span> <span class="n">any</span>
    <span class="n">stages</span> <span class="o">{</span>
        <span class="n">stage</span><span class="o">(</span><span class="s1">'Example Build'</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">steps</span> <span class="o">{</span>
                <span class="n">echo</span> <span class="s1">'Hello World'</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="n">stage</span><span class="o">(</span><span class="s1">'Example Deploy'</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">when</span> <span class="o">{</span>
                <span class="n">allOf</span> <span class="o">{</span>
                    <span class="n">branch</span> <span class="s1">'production'</span>
                    <span class="n">environment</span> <span class="nl">name:</span> <span class="s1">'DEPLOY_TO'</span><span class="o">,</span> <span class="nl">value:</span> <span class="s1">'production'</span>
                <span class="o">}</span>
            <span class="o">}</span>
            <span class="n">steps</span> <span class="o">{</span>
                <span class="n">echo</span> <span class="s1">'Deploying'</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title">Example 18. Multiple condition and nested condition</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="groovy"><span class="n">pipeline</span> <span class="o">{</span>
    <span class="n">agent</span> <span class="n">any</span>
    <span class="n">stages</span> <span class="o">{</span>
        <span class="n">stage</span><span class="o">(</span><span class="s1">'Example Build'</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">steps</span> <span class="o">{</span>
                <span class="n">echo</span> <span class="s1">'Hello World'</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="n">stage</span><span class="o">(</span><span class="s1">'Example Deploy'</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">when</span> <span class="o">{</span>
                <span class="n">branch</span> <span class="s1">'production'</span>
                <span class="n">anyOf</span> <span class="o">{</span>
                    <span class="n">environment</span> <span class="nl">name:</span> <span class="s1">'DEPLOY_TO'</span><span class="o">,</span> <span class="nl">value:</span> <span class="s1">'production'</span>
                    <span class="n">environment</span> <span class="nl">name:</span> <span class="s1">'DEPLOY_TO'</span><span class="o">,</span> <span class="nl">value:</span> <span class="s1">'staging'</span>
                <span class="o">}</span>
            <span class="o">}</span>
            <span class="n">steps</span> <span class="o">{</span>
                <span class="n">echo</span> <span class="s1">'Deploying'</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title">Example 19. Expression condition and nested condition</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="groovy"><span class="n">pipeline</span> <span class="o">{</span>
    <span class="n">agent</span> <span class="n">any</span>
    <span class="n">stages</span> <span class="o">{</span>
        <span class="n">stage</span><span class="o">(</span><span class="s1">'Example Build'</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">steps</span> <span class="o">{</span>
                <span class="n">echo</span> <span class="s1">'Hello World'</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="n">stage</span><span class="o">(</span><span class="s1">'Example Deploy'</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">when</span> <span class="o">{</span>
                <span class="n">expression</span> <span class="o">{</span> <span class="n">BRANCH_NAME</span> <span class="o">==~</span> <span class="s">/(production|staging)/</span> <span class="o">}</span>
                <span class="n">anyOf</span> <span class="o">{</span>
                    <span class="n">environment</span> <span class="nl">name:</span> <span class="s1">'DEPLOY_TO'</span><span class="o">,</span> <span class="nl">value:</span> <span class="s1">'production'</span>
                    <span class="n">environment</span> <span class="nl">name:</span> <span class="s1">'DEPLOY_TO'</span><span class="o">,</span> <span class="nl">value:</span> <span class="s1">'staging'</span>
                <span class="o">}</span>
            <span class="o">}</span>
            <span class="n">steps</span> <span class="o">{</span>
                <span class="n">echo</span> <span class="s1">'Deploying'</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title">Example 20. <code>beforeAgent</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="groovy"><span class="n">pipeline</span> <span class="o">{</span>
    <span class="n">agent</span> <span class="n">none</span>
    <span class="n">stages</span> <span class="o">{</span>
        <span class="n">stage</span><span class="o">(</span><span class="s1">'Example Build'</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">steps</span> <span class="o">{</span>
                <span class="n">echo</span> <span class="s1">'Hello World'</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="n">stage</span><span class="o">(</span><span class="s1">'Example Deploy'</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">agent</span> <span class="o">{</span>
                <span class="n">label</span> <span class="s2">"some-label"</span>
            <span class="o">}</span>
            <span class="n">when</span> <span class="o">{</span>
                <span class="n">beforeAgent</span> <span class="kc">true</span>
                <span class="n">branch</span> <span class="s1">'production'</span>
            <span class="o">}</span>
            <span class="n">steps</span> <span class="o">{</span>
                <span class="n">echo</span> <span class="s1">'Deploying'</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title">Example 21. <code>beforeInput</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="groovy"><span class="n">pipeline</span> <span class="o">{</span>
    <span class="n">agent</span> <span class="n">none</span>
    <span class="n">stages</span> <span class="o">{</span>
        <span class="n">stage</span><span class="o">(</span><span class="s1">'Example Build'</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">steps</span> <span class="o">{</span>
                <span class="n">echo</span> <span class="s1">'Hello World'</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="n">stage</span><span class="o">(</span><span class="s1">'Example Deploy'</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">when</span> <span class="o">{</span>
                <span class="n">beforeInput</span> <span class="kc">true</span>
                <span class="n">branch</span> <span class="s1">'production'</span>
            <span class="o">}</span>
            <span class="n">input</span> <span class="o">{</span>
                <span class="n">message</span> <span class="s2">"Deploy to production?"</span>
                <span class="n">id</span> <span class="s2">"simple-input"</span>
            <span class="o">}</span>
            <span class="n">steps</span> <span class="o">{</span>
                <span class="n">echo</span> <span class="s1">'Deploying'</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title">Example 22. <code>beforeOptions</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="groovy"><span class="n">pipeline</span> <span class="o">{</span>
    <span class="n">agent</span> <span class="n">none</span>
    <span class="n">stages</span> <span class="o">{</span>
        <span class="n">stage</span><span class="o">(</span><span class="s1">'Example Build'</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">steps</span> <span class="o">{</span>
                <span class="n">echo</span> <span class="s1">'Hello World'</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="n">stage</span><span class="o">(</span><span class="s1">'Example Deploy'</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">when</span> <span class="o">{</span>
                <span class="n">beforeOptions</span> <span class="kc">true</span>
                <span class="n">branch</span> <span class="s1">'testing'</span>
            <span class="o">}</span>
            <span class="n">options</span> <span class="o">{</span>
                <span class="n">lock</span> <span class="nl">label:</span> <span class="s1">'testing-deploy-envs'</span><span class="o">,</span> <span class="nl">quantity:</span> <span class="mi">1</span><span class="o">,</span> <span class="nl">variable:</span> <span class="s1">'deployEnv'</span>
            <span class="o">}</span>
            <span class="n">steps</span> <span class="o">{</span>
                <span class="n">echo</span> <span class="s2">"Deploying to ${deployEnv}"</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title">Example 23. <code>triggeredBy</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="groovy"><span class="n">pipeline</span> <span class="o">{</span>
    <span class="n">agent</span> <span class="n">none</span>
    <span class="n">stages</span> <span class="o">{</span>
        <span class="n">stage</span><span class="o">(</span><span class="s1">'Example Build'</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">steps</span> <span class="o">{</span>
                <span class="n">echo</span> <span class="s1">'Hello World'</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="n">stage</span><span class="o">(</span><span class="s1">'Example Deploy'</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">when</span> <span class="o">{</span>
                <span class="n">triggeredBy</span> <span class="s2">"TimerTrigger"</span>
            <span class="o">}</span>
            <span class="n">steps</span> <span class="o">{</span>
                <span class="n">echo</span> <span class="s1">'Deploying'</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="sequential-stages"><a class="anchor" href="#sequential-stages"></a>Sequential Stages</h3>
<div class="paragraph">
<p>Stages in Declarative Pipeline may have a <code>stages</code> section containing a list of nested stages to be run in sequential order.
Note that a stage must have one and only one of <code>steps</code>, <code>stages</code>, <code>parallel</code>, or <code>matrix</code>.
It is not possible to nest a <code>parallel</code> or <code>matrix</code> block within a <code>stage</code> directive if that <code>stage</code>
directive is nested within a <code>parallel</code>  or <code>matrix</code> block itself. However, a <code>stage</code>
directive within a <code>parallel</code> or <code>matrix</code> block can use all other functionality of a <code>stage</code>,
including <code>agent</code>, <code>tools</code>, <code>when</code>, etc.</p>
</div>
<div id="sequential-stages-example" class="exampleblock">
<div class="title">Example 24. Sequential Stages, Declarative Pipeline</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="groovy"><span class="n">pipeline</span> <span class="o">{</span>
    <span class="n">agent</span> <span class="n">none</span>
    <span class="n">stages</span> <span class="o">{</span>
        <span class="n">stage</span><span class="o">(</span><span class="s1">'Non-Sequential Stage'</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">agent</span> <span class="o">{</span>
                <span class="n">label</span> <span class="s1">'for-non-sequential'</span>
            <span class="o">}</span>
            <span class="n">steps</span> <span class="o">{</span>
                <span class="n">echo</span> <span class="s2">"On Non-Sequential Stage"</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="n">stage</span><span class="o">(</span><span class="s1">'Sequential'</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">agent</span> <span class="o">{</span>
                <span class="n">label</span> <span class="s1">'for-sequential'</span>
            <span class="o">}</span>
            <span class="n">environment</span> <span class="o">{</span>
                <span class="n">FOR_SEQUENTIAL</span> <span class="o">=</span> <span class="s2">"some-value"</span>
            <span class="o">}</span>
            <span class="n">stages</span> <span class="o">{</span>
                <span class="n">stage</span><span class="o">(</span><span class="s1">'In Sequential 1'</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">steps</span> <span class="o">{</span>
                        <span class="n">echo</span> <span class="s2">"In Sequential 1"</span>
                    <span class="o">}</span>
                <span class="o">}</span>
                <span class="n">stage</span><span class="o">(</span><span class="s1">'In Sequential 2'</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">steps</span> <span class="o">{</span>
                        <span class="n">echo</span> <span class="s2">"In Sequential 2"</span>
                    <span class="o">}</span>
                <span class="o">}</span>
                <span class="n">stage</span><span class="o">(</span><span class="s1">'Parallel In Sequential'</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">parallel</span> <span class="o">{</span>
                        <span class="n">stage</span><span class="o">(</span><span class="s1">'In Parallel 1'</span><span class="o">)</span> <span class="o">{</span>
                            <span class="n">steps</span> <span class="o">{</span>
                                <span class="n">echo</span> <span class="s2">"In Parallel 1"</span>
                            <span class="o">}</span>
                        <span class="o">}</span>
                        <span class="n">stage</span><span class="o">(</span><span class="s1">'In Parallel 2'</span><span class="o">)</span> <span class="o">{</span>
                            <span class="n">steps</span> <span class="o">{</span>
                                <span class="n">echo</span> <span class="s2">"In Parallel 2"</span>
                            <span class="o">}</span>
                        <span class="o">}</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="parallel"><a class="anchor" href="#parallel"></a>Parallel</h3>
<div class="paragraph">
<p>Stages in Declarative Pipeline may have a <code>parallel</code> section containing a list of nested stages to be run in parallel.
Note that a stage must have one and only one of <code>steps</code>, <code>stages</code>, <code>parallel</code>, or <code>matrix</code>.
It is not possible to nest a <code>parallel</code> or <code>matrix</code> block within a <code>stage</code> directive if that <code>stage</code>
directive is nested within a <code>parallel</code>  or <code>matrix</code> block itself. However, a <code>stage</code>
directive within a <code>parallel</code> or <code>matrix</code> block can use all other functionality of a <code>stage</code>,
including <code>agent</code>, <code>tools</code>, <code>when</code>, etc.</p>
</div>
<div class="paragraph">
<p>In addition, you can force your <code>parallel</code> stages to all be aborted when any one
of them fails, by adding <code>failFast true</code> to the <code>stage</code> containing the
<code>parallel</code>. Another option for adding <code>failfast</code> is adding an option to the
pipeline definition: <code>parallelsAlwaysFailFast()</code></p>
</div>
<div id="parallel-stages-example" class="exampleblock">
<div class="title">Example 25. Parallel Stages, Declarative Pipeline</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="groovy"><span class="n">pipeline</span> <span class="o">{</span>
    <span class="n">agent</span> <span class="n">any</span>
    <span class="n">stages</span> <span class="o">{</span>
        <span class="n">stage</span><span class="o">(</span><span class="s1">'Non-Parallel Stage'</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">steps</span> <span class="o">{</span>
                <span class="n">echo</span> <span class="s1">'This stage will be executed first.'</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="n">stage</span><span class="o">(</span><span class="s1">'Parallel Stage'</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">when</span> <span class="o">{</span>
                <span class="n">branch</span> <span class="s1">'master'</span>
            <span class="o">}</span>
            <span class="n">failFast</span> <span class="kc">true</span>
            <span class="n">parallel</span> <span class="o">{</span>
                <span class="n">stage</span><span class="o">(</span><span class="s1">'Branch A'</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">agent</span> <span class="o">{</span>
                        <span class="n">label</span> <span class="s2">"for-branch-a"</span>
                    <span class="o">}</span>
                    <span class="n">steps</span> <span class="o">{</span>
                        <span class="n">echo</span> <span class="s2">"On Branch A"</span>
                    <span class="o">}</span>
                <span class="o">}</span>
                <span class="n">stage</span><span class="o">(</span><span class="s1">'Branch B'</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">agent</span> <span class="o">{</span>
                        <span class="n">label</span> <span class="s2">"for-branch-b"</span>
                    <span class="o">}</span>
                    <span class="n">steps</span> <span class="o">{</span>
                        <span class="n">echo</span> <span class="s2">"On Branch B"</span>
                    <span class="o">}</span>
                <span class="o">}</span>
                <span class="n">stage</span><span class="o">(</span><span class="s1">'Branch C'</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">agent</span> <span class="o">{</span>
                        <span class="n">label</span> <span class="s2">"for-branch-c"</span>
                    <span class="o">}</span>
                    <span class="n">stages</span> <span class="o">{</span>
                        <span class="n">stage</span><span class="o">(</span><span class="s1">'Nested 1'</span><span class="o">)</span> <span class="o">{</span>
                            <span class="n">steps</span> <span class="o">{</span>
                                <span class="n">echo</span> <span class="s2">"In stage Nested 1 within Branch C"</span>
                            <span class="o">}</span>
                        <span class="o">}</span>
                        <span class="n">stage</span><span class="o">(</span><span class="s1">'Nested 2'</span><span class="o">)</span> <span class="o">{</span>
                            <span class="n">steps</span> <span class="o">{</span>
                                <span class="n">echo</span> <span class="s2">"In stage Nested 2 within Branch C"</span>
                            <span class="o">}</span>
                        <span class="o">}</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title">Example 26. <code>parallelsAlwaysFailFast</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="groovy"><span class="n">pipeline</span> <span class="o">{</span>
    <span class="n">agent</span> <span class="n">any</span>
    <span class="n">options</span> <span class="o">{</span>
        <span class="n">parallelsAlwaysFailFast</span><span class="o">()</span>
    <span class="o">}</span>
    <span class="n">stages</span> <span class="o">{</span>
        <span class="n">stage</span><span class="o">(</span><span class="s1">'Non-Parallel Stage'</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">steps</span> <span class="o">{</span>
                <span class="n">echo</span> <span class="s1">'This stage will be executed first.'</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="n">stage</span><span class="o">(</span><span class="s1">'Parallel Stage'</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">when</span> <span class="o">{</span>
                <span class="n">branch</span> <span class="s1">'master'</span>
            <span class="o">}</span>
            <span class="n">parallel</span> <span class="o">{</span>
                <span class="n">stage</span><span class="o">(</span><span class="s1">'Branch A'</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">agent</span> <span class="o">{</span>
                        <span class="n">label</span> <span class="s2">"for-branch-a"</span>
                    <span class="o">}</span>
                    <span class="n">steps</span> <span class="o">{</span>
                        <span class="n">echo</span> <span class="s2">"On Branch A"</span>
                    <span class="o">}</span>
                <span class="o">}</span>
                <span class="n">stage</span><span class="o">(</span><span class="s1">'Branch B'</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">agent</span> <span class="o">{</span>
                        <span class="n">label</span> <span class="s2">"for-branch-b"</span>
                    <span class="o">}</span>
                    <span class="n">steps</span> <span class="o">{</span>
                        <span class="n">echo</span> <span class="s2">"On Branch B"</span>
                    <span class="o">}</span>
                <span class="o">}</span>
                <span class="n">stage</span><span class="o">(</span><span class="s1">'Branch C'</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">agent</span> <span class="o">{</span>
                        <span class="n">label</span> <span class="s2">"for-branch-c"</span>
                    <span class="o">}</span>
                    <span class="n">stages</span> <span class="o">{</span>
                        <span class="n">stage</span><span class="o">(</span><span class="s1">'Nested 1'</span><span class="o">)</span> <span class="o">{</span>
                            <span class="n">steps</span> <span class="o">{</span>
                                <span class="n">echo</span> <span class="s2">"In stage Nested 1 within Branch C"</span>
                            <span class="o">}</span>
                        <span class="o">}</span>
                        <span class="n">stage</span><span class="o">(</span><span class="s1">'Nested 2'</span><span class="o">)</span> <span class="o">{</span>
                            <span class="n">steps</span> <span class="o">{</span>
                                <span class="n">echo</span> <span class="s2">"In stage Nested 2 within Branch C"</span>
                            <span class="o">}</span>
                        <span class="o">}</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="declarative-matrix"><a class="anchor" href="#declarative-matrix"></a>Matrix</h3>
<div class="paragraph">
<p>Stages in Declarative Pipeline may have a <code>matrix</code> section defining a multi-dimensional matrix of name-value combinations to be run in parallel.
We&#8217;ll refer these combinations as "cells" in a matrix.
Each cell in a matrix can include one or more stages to be run sequentially using the configuration for that cell.
Note that a stage must have one and only one of <code>steps</code>, <code>stages</code>, <code>parallel</code>, or <code>matrix</code>.
It is not possible to nest a <code>parallel</code> or <code>matrix</code> block within a <code>stage</code> directive if that <code>stage</code>
directive is nested within a <code>parallel</code>  or <code>matrix</code> block itself. However, a <code>stage</code>
directive within a <code>parallel</code> or <code>matrix</code> block can use all other functionality of a <code>stage</code>,
including <code>agent</code>, <code>tools</code>, <code>when</code>, etc.</p>
</div>
<div class="paragraph">
<p>In addition, you can force your <code>matrix</code> cells to all be aborted when any one
of them fails, by adding <code>failFast true</code> to the <code>stage</code> containing the
<code>matrix</code>. Another option for adding <code>failfast</code> is adding an option to the
pipeline definition: <code>parallelsAlwaysFailFast()</code></p>
</div>
<div class="paragraph">
<p>The <code>matrix</code> section must include an <code>axes</code> section and a <code>stages</code> section.
The <code>axes</code> section defines the values for each <code>axis</code> in the matrix.
The <code>stages</code> section defines a list of <code>stage</code>s to run sequentially in each cell.
A <code>matrix</code> may have an <code>excludes</code> section to remove invalid cells from the matrix.
Many of the directives available on  <code>stage</code>, including <code>agent</code>, <code>tools</code>, <code>when</code>, etc.,
can also be added to <code>matrix</code> to control the behavior of each cell.</p>
</div>
<div class="sect3">
<h4 id="matrix-axes"><a class="anchor" href="#matrix-axes"></a>axes</h4>
<div class="paragraph">
<p>The <code>axes</code> section specifies one or more <code>axis</code> directives.
Each <code>axis</code> consists of a <code>name</code> and a list of <code>values</code>.
All the values from each axis are combined with the others to produce the cells.</p>
</div>
<div id="matrix-axes-example" class="exampleblock">
<div class="title">Example 27. One-axis with 3 cells</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="groovy"><span class="n">matrix</span> <span class="o">{</span>
    <span class="n">axes</span> <span class="o">{</span>
        <span class="n">axis</span> <span class="o">{</span>
            <span class="n">name</span> <span class="s1">'PLATFORM'</span>
            <span class="n">values</span> <span class="s1">'linux'</span><span class="o">,</span> <span class="s1">'mac'</span><span class="o">,</span> <span class="s1">'windows'</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="c1">// ...</span>
<span class="o">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title">Example 28. Two-axis with 12 cells (three by four)</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="groovy"><span class="n">matrix</span> <span class="o">{</span>
    <span class="n">axes</span> <span class="o">{</span>
        <span class="n">axis</span> <span class="o">{</span>
            <span class="n">name</span> <span class="s1">'PLATFORM'</span>
            <span class="n">values</span> <span class="s1">'linux'</span><span class="o">,</span> <span class="s1">'mac'</span><span class="o">,</span> <span class="s1">'windows'</span>
        <span class="o">}</span>
        <span class="n">axis</span> <span class="o">{</span>
            <span class="n">name</span> <span class="s1">'BROWSER'</span>
            <span class="n">values</span> <span class="s1">'chrome'</span><span class="o">,</span> <span class="s1">'edge'</span><span class="o">,</span> <span class="s1">'firefox'</span><span class="o">,</span> <span class="s1">'safari'</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="c1">// ...</span>
<span class="o">}</span></code></pre>
</div>
</div>
</div>
</div>
<div id="three-axes" class="exampleblock">
<div class="title">Example 29. Three-axis matrix with 24 cells (three by four by two)</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="groovy"><span class="n">matrix</span> <span class="o">{</span>
    <span class="n">axes</span> <span class="o">{</span>
        <span class="n">axis</span> <span class="o">{</span>
            <span class="n">name</span> <span class="s1">'PLATFORM'</span>
            <span class="n">values</span> <span class="s1">'linux'</span><span class="o">,</span> <span class="s1">'mac'</span><span class="o">,</span> <span class="s1">'windows'</span>
        <span class="o">}</span>
        <span class="n">axis</span> <span class="o">{</span>
            <span class="n">name</span> <span class="s1">'BROWSER'</span>
            <span class="n">values</span> <span class="s1">'chrome'</span><span class="o">,</span> <span class="s1">'edge'</span><span class="o">,</span> <span class="s1">'firefox'</span><span class="o">,</span> <span class="s1">'safari'</span>
        <span class="o">}</span>
        <span class="n">axis</span> <span class="o">{</span>
            <span class="n">name</span> <span class="s1">'ARCHITECTURE'</span>
            <span class="n">values</span> <span class="s1">'32-bit'</span><span class="o">,</span> <span class="s1">'64-bit'</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="c1">// ...</span>
<span class="o">}</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="matrix-stages"><a class="anchor" href="#matrix-stages"></a>stages</h4>
<div class="paragraph">
<p>The <code>stages</code> section specifies one or more <code>stage`s to be executed sequentially in each cell.
This section is identical to any other
<a href="#sequential-stages">`stages</code> section</a>.</p>
</div>
<div id="matrix-stages-example" class="exampleblock">
<div class="title">Example 30. One-axis with 3 cells, each cell runs three stages - "build", "test", and "deploy"</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="groovy"><span class="n">matrix</span> <span class="o">{</span>
    <span class="n">axes</span> <span class="o">{</span>
        <span class="n">axis</span> <span class="o">{</span>
            <span class="n">name</span> <span class="s1">'PLATFORM'</span>
            <span class="n">values</span> <span class="s1">'linux'</span><span class="o">,</span> <span class="s1">'mac'</span><span class="o">,</span> <span class="s1">'windows'</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="n">stages</span> <span class="o">{</span>
        <span class="n">stage</span><span class="o">(</span><span class="s1">'build'</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// ...</span>
        <span class="o">}</span>
        <span class="n">stage</span><span class="o">(</span><span class="s1">'test'</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// ...</span>
        <span class="o">}</span>
        <span class="n">stage</span><span class="o">(</span><span class="s1">'deploy'</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// ...</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title">Example 31. Two-axis with 12 cells (three by four)</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="groovy"><span class="n">matrix</span> <span class="o">{</span>
    <span class="n">axes</span> <span class="o">{</span>
        <span class="n">axis</span> <span class="o">{</span>
            <span class="n">name</span> <span class="s1">'PLATFORM'</span>
            <span class="n">values</span> <span class="s1">'linux'</span><span class="o">,</span> <span class="s1">'mac'</span><span class="o">,</span> <span class="s1">'windows'</span>
        <span class="o">}</span>
        <span class="n">axis</span> <span class="o">{</span>
            <span class="n">name</span> <span class="s1">'BROWSER'</span>
            <span class="n">values</span> <span class="s1">'chrome'</span><span class="o">,</span> <span class="s1">'edge'</span><span class="o">,</span> <span class="s1">'firefox'</span><span class="o">,</span> <span class="s1">'safari'</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="n">stages</span> <span class="o">{</span>
        <span class="n">stage</span><span class="o">(</span><span class="s1">'build-and-test'</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// ...</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="matrix-excludes"><a class="anchor" href="#matrix-excludes"></a>excludes (optional)</h4>
<div class="paragraph">
<p>The optional <code>excludes</code> section lets authors specify one or more <code>exclude</code> filter expressions that select cells to be excluded from the expanded set of matrix cells (aka, sparsening).
Filters are constructed using a basic directive structure of one or more of exclude <code>axis</code> directives each with a <code>name</code> and <code>values</code> list.</p>
</div>
<div class="paragraph">
<p>The <code>axis</code> directives inside an <code>exclude</code> generate a set of combinations (similar to generating the matrix cells).
The matrix cells that match all the values from an <code>exclude</code> combination are removed from the matrix.
If more than one <code>exclude</code> directive is supplied, each is evaluated separately to remove cells.</p>
</div>
<div class="paragraph">
<p>When dealing with a long list of values to exclude, exclude <code>axis</code> directives can use <code>notValues</code> instead of <code>values</code>.
These will exclude cells that <strong>do not</strong> match one of the values passed to <code>notValues</code>.</p>
</div>
<div id="matrix-excludes-example" class="exampleblock">
<div class="title">Example 32. Three-axis matrix with 24 cells, exclude '32-bit, mac' (4 cells excluded)</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="groovy"><span class="n">matrix</span> <span class="o">{</span>
    <span class="n">axes</span> <span class="o">{</span>
        <span class="n">axis</span> <span class="o">{</span>
            <span class="n">name</span> <span class="s1">'PLATFORM'</span>
            <span class="n">values</span> <span class="s1">'linux'</span><span class="o">,</span> <span class="s1">'mac'</span><span class="o">,</span> <span class="s1">'windows'</span>
        <span class="o">}</span>
        <span class="n">axis</span> <span class="o">{</span>
            <span class="n">name</span> <span class="s1">'BROWSER'</span>
            <span class="n">values</span> <span class="s1">'chrome'</span><span class="o">,</span> <span class="s1">'edge'</span><span class="o">,</span> <span class="s1">'firefox'</span><span class="o">,</span> <span class="s1">'safari'</span>
        <span class="o">}</span>
        <span class="n">axis</span> <span class="o">{</span>
            <span class="n">name</span> <span class="s1">'ARCHITECTURE'</span>
            <span class="n">values</span> <span class="s1">'32-bit'</span><span class="o">,</span> <span class="s1">'64-bit'</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="n">excludes</span> <span class="o">{</span>
        <span class="n">exclude</span> <span class="o">{</span>
            <span class="n">axis</span> <span class="o">{</span>
                <span class="n">name</span> <span class="s1">'PLATFORM'</span>
                <span class="n">values</span> <span class="s1">'mac'</span>
            <span class="o">}</span>
            <span class="n">axis</span> <span class="o">{</span>
                <span class="n">name</span> <span class="s1">'ARCHITECTURE'</span>
                <span class="n">values</span> <span class="s1">'32-bit'</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="c1">// ...</span>
<span class="o">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Exclude the <code>linux, safari</code> combination and exclude any platform that is <strong>not</strong> <code>windows</code> with the <code>edge</code> browser.</p>
</div>
<div class="exampleblock">
<div class="title">Example 33. Three-axis matrix with 24 cells, exclude '32-bit, mac' and invalid browser combinations (9 cells excluded)</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="groovy"><span class="n">matrix</span> <span class="o">{</span>
    <span class="n">axes</span> <span class="o">{</span>
        <span class="n">axis</span> <span class="o">{</span>
            <span class="n">name</span> <span class="s1">'PLATFORM'</span>
            <span class="n">values</span> <span class="s1">'linux'</span><span class="o">,</span> <span class="s1">'mac'</span><span class="o">,</span> <span class="s1">'windows'</span>
        <span class="o">}</span>
        <span class="n">axis</span> <span class="o">{</span>
            <span class="n">name</span> <span class="s1">'BROWSER'</span>
            <span class="n">values</span> <span class="s1">'chrome'</span><span class="o">,</span> <span class="s1">'edge'</span><span class="o">,</span> <span class="s1">'firefox'</span><span class="o">,</span> <span class="s1">'safari'</span>
        <span class="o">}</span>
        <span class="n">axis</span> <span class="o">{</span>
            <span class="n">name</span> <span class="s1">'ARCHITECTURE'</span>
            <span class="n">values</span> <span class="s1">'32-bit'</span><span class="o">,</span> <span class="s1">'64-bit'</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="n">excludes</span> <span class="o">{</span>
        <span class="n">exclude</span> <span class="o">{</span>
            <span class="c1">// 4 cells</span>
            <span class="n">axis</span> <span class="o">{</span>
                <span class="n">name</span> <span class="s1">'PLATFORM'</span>
                <span class="n">values</span> <span class="s1">'mac'</span>
            <span class="o">}</span>
            <span class="n">axis</span> <span class="o">{</span>
                <span class="n">name</span> <span class="s1">'ARCHITECTURE'</span>
                <span class="n">values</span> <span class="s1">'32-bit'</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="n">exclude</span> <span class="o">{</span>
            <span class="c1">// 2 cells</span>
            <span class="n">axis</span> <span class="o">{</span>
                <span class="n">name</span> <span class="s1">'PLATFORM'</span>
                <span class="n">values</span> <span class="s1">'linux'</span>
            <span class="o">}</span>
            <span class="n">axis</span> <span class="o">{</span>
                <span class="n">name</span> <span class="s1">'BROWSER'</span>
                <span class="n">values</span> <span class="s1">'safari'</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="n">exclude</span> <span class="o">{</span>
            <span class="c1">// 3 more cells and '32-bit, mac' (already excluded)</span>
            <span class="n">axis</span> <span class="o">{</span>
                <span class="n">name</span> <span class="s1">'PLATFORM'</span>
                <span class="n">notValues</span> <span class="s1">'windows'</span>
            <span class="o">}</span>
            <span class="n">axis</span> <span class="o">{</span>
                <span class="n">name</span> <span class="s1">'BROWSER'</span>
                <span class="n">values</span> <span class="s1">'edge'</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="c1">// ...</span>
<span class="o">}</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="matrix-cell-directives"><a class="anchor" href="#matrix-cell-directives"></a>Matrix cell-level directives (optional)</h4>
<div class="paragraph">
<p>Matrix lets users efficiently configure the overall environment for each cell, by adding stage-level directives under <code>matrix</code> itself.
These directives behave the same as they would on a stage but they can also accept values provided by the matrix for each cell.</p>
</div>
<div class="paragraph">
<p>The <code>axis</code> and <code>exclude</code> directives define the static set of cells that make up the matrix.
That set of combinations is generated before the start of the pipeline run.
The "per-cell" directives, on the other hand, are evaluated at runtime.</p>
</div>
<div class="paragraph">
<p>These directives include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#agent">agent</a></p>
</li>
<li>
<p><a href="#environment">environment</a></p>
</li>
<li>
<p><a href="#input">input</a></p>
</li>
<li>
<p><a href="#options">options</a></p>
</li>
<li>
<p><a href="#post">post</a></p>
</li>
<li>
<p><a href="#tools">tools</a></p>
</li>
<li>
<p><a href="#when">when</a></p>
</li>
</ul>
</div>
<div id="matrix-cell-example" class="exampleblock">
<div class="title">Example 34. Complete Matrix Example, Declarative Pipeline</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="groovy"><span class="n">pipeline</span> <span class="o">{</span>
    <span class="n">parameters</span> <span class="o">{</span>
        <span class="n">choice</span><span class="o">(</span><span class="nl">name:</span> <span class="s1">'PLATFORM_FILTER'</span><span class="o">,</span> <span class="nl">choices:</span> <span class="o">[</span><span class="s1">'all'</span><span class="o">,</span> <span class="s1">'linux'</span><span class="o">,</span> <span class="s1">'windows'</span><span class="o">,</span> <span class="s1">'mac'</span><span class="o">],</span> <span class="nl">description:</span> <span class="s1">'Run on specific platform'</span><span class="o">)</span>
    <span class="o">}</span>
    <span class="n">agent</span> <span class="n">none</span>
    <span class="n">stages</span> <span class="o">{</span>
        <span class="n">stage</span><span class="o">(</span><span class="s1">'BuildAndTest'</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">matrix</span> <span class="o">{</span>
                <span class="n">agent</span> <span class="o">{</span>
                    <span class="n">label</span> <span class="s2">"${PLATFORM}-agent"</span>
                <span class="o">}</span>
                <span class="n">when</span> <span class="o">{</span> <span class="n">anyOf</span> <span class="o">{</span>
                    <span class="n">expression</span> <span class="o">{</span> <span class="n">params</span><span class="o">.</span><span class="na">PLATFORM_FILTER</span> <span class="o">==</span> <span class="s1">'all'</span> <span class="o">}</span>
                    <span class="n">expression</span> <span class="o">{</span> <span class="n">params</span><span class="o">.</span><span class="na">PLATFORM_FILTER</span> <span class="o">==</span> <span class="n">env</span><span class="o">.</span><span class="na">PLATFORM</span> <span class="o">}</span>
                <span class="o">}</span> <span class="o">}</span>
                <span class="n">axes</span> <span class="o">{</span>
                    <span class="n">axis</span> <span class="o">{</span>
                        <span class="n">name</span> <span class="s1">'PLATFORM'</span>
                        <span class="n">values</span> <span class="s1">'linux'</span><span class="o">,</span> <span class="s1">'windows'</span><span class="o">,</span> <span class="s1">'mac'</span>
                    <span class="o">}</span>
                    <span class="n">axis</span> <span class="o">{</span>
                        <span class="n">name</span> <span class="s1">'BROWSER'</span>
                        <span class="n">values</span> <span class="s1">'firefox'</span><span class="o">,</span> <span class="s1">'chrome'</span><span class="o">,</span> <span class="s1">'safari'</span><span class="o">,</span> <span class="s1">'edge'</span>
                    <span class="o">}</span>
                <span class="o">}</span>
                <span class="n">excludes</span> <span class="o">{</span>
                    <span class="n">exclude</span> <span class="o">{</span>
                        <span class="n">axis</span> <span class="o">{</span>
                            <span class="n">name</span> <span class="s1">'PLATFORM'</span>
                            <span class="n">values</span> <span class="s1">'linux'</span>
                        <span class="o">}</span>
                        <span class="n">axis</span> <span class="o">{</span>
                            <span class="n">name</span> <span class="s1">'BROWSER'</span>
                            <span class="n">values</span> <span class="s1">'safari'</span>
                        <span class="o">}</span>
                    <span class="o">}</span>
                    <span class="n">exclude</span> <span class="o">{</span>
                        <span class="n">axis</span> <span class="o">{</span>
                            <span class="n">name</span> <span class="s1">'PLATFORM'</span>
                            <span class="n">notValues</span> <span class="s1">'windows'</span>
                        <span class="o">}</span>
                        <span class="n">axis</span> <span class="o">{</span>
                            <span class="n">name</span> <span class="s1">'BROWSER'</span>
                            <span class="n">values</span> <span class="s1">'edge'</span>
                        <span class="o">}</span>
                    <span class="o">}</span>
                <span class="o">}</span>
                <span class="n">stages</span> <span class="o">{</span>
                    <span class="n">stage</span><span class="o">(</span><span class="s1">'Build'</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">steps</span> <span class="o">{</span>
                            <span class="n">echo</span> <span class="s2">"Do Build for ${PLATFORM} - ${BROWSER}"</span>
                        <span class="o">}</span>
                    <span class="o">}</span>
                    <span class="n">stage</span><span class="o">(</span><span class="s1">'Test'</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">steps</span> <span class="o">{</span>
                            <span class="n">echo</span> <span class="s2">"Do Test for ${PLATFORM} - ${BROWSER}"</span>
                        <span class="o">}</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="declarative-steps"><a class="anchor" href="#declarative-steps"></a>Steps</h3>
<div class="paragraph">
<p>Declarative Pipelines may use all the available steps documented in the
<a href="/doc/pipeline/steps">Pipeline Steps reference</a>,
which contains a comprehensive list of steps, with the addition of the steps
listed below which are <strong>only supported</strong> in Declarative Pipeline.</p>
</div>
<div class="sect3">
<h4 id="script"><a class="anchor" href="#script"></a>script</h4>
<div class="paragraph">
<p>The <code>script</code> step takes a block of <a href="#scripted-pipeline">Scripted Pipeline</a> and executes that in
the Declarative Pipeline. For most use-cases, the <code>script</code> step should be
unnecessary in Declarative Pipelines, but it can provide a useful "escape
hatch." <code>script</code> blocks of non-trivial size and/or complexity should be moved
into <a href="../shared-libraries/">Shared Libraries</a> instead.</p>
</div>
<div id="script-example" class="exampleblock">
<div class="title">Example 35. Script Block in Declarative Pipeline</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="groovy"><span class="n">pipeline</span> <span class="o">{</span>
    <span class="n">agent</span> <span class="n">any</span>
    <span class="n">stages</span> <span class="o">{</span>
        <span class="n">stage</span><span class="o">(</span><span class="s1">'Example'</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">steps</span> <span class="o">{</span>
                <span class="n">echo</span> <span class="s1">'Hello World'</span>

                <span class="n">script</span> <span class="o">{</span>
                    <span class="kt">def</span> <span class="n">browsers</span> <span class="o">=</span> <span class="o">[</span><span class="s1">'chrome'</span><span class="o">,</span> <span class="s1">'firefox'</span><span class="o">]</span>
                    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">browsers</span><span class="o">.</span><span class="na">size</span><span class="o">();</span> <span class="o">++</span><span class="n">i</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">echo</span> <span class="s2">"Testing the ${browsers[i]} browser"</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1 syntax">
<h2 id="scripted-pipeline"><a class="anchor" href="#scripted-pipeline"></a>Scripted Pipeline</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Scripted Pipeline, like <a href="#declarative-pipeline">Declarative Pipeline</a>, is built on top of the
underlying Pipeline sub-system. Unlike Declarative, Scripted Pipeline is
effectively a general-purpose DSL
<sup class="footnote" id="_footnote_dsl">[<a id="_footnoteref_2" class="footnote" href="#_footnotedef_2" title="View footnote.">2</a>]</sup> built with
<a href="http://groovy-lang.org/syntax.html">Groovy</a>.
Most functionality provided by the Groovy language is made available to users
of Scripted Pipeline, which means it can be a very expressive and flexible tool
with which one can author continuous delivery pipelines.</p>
</div>
<div class="sect2">
<h3 id="flow-control"><a class="anchor" href="#flow-control"></a>Flow Control</h3>
<div class="paragraph">
<p>Scripted Pipeline is serially executed from the top of a <code>Jenkinsfile</code>
downwards, like most traditional scripts in Groovy or other languages.
Providing flow control, therefore, rests on Groovy expressions, such as the
<code>if/else</code> conditionals, for example:</p>
</div>
<div class="exampleblock">
<div class="title">Example 36. Conditional Statement <code>if</code>, Scripted Pipeline</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="groovy"><span class="n">node</span> <span class="o">{</span>
    <span class="n">stage</span><span class="o">(</span><span class="s1">'Example'</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">env</span><span class="o">.</span><span class="na">BRANCH_NAME</span> <span class="o">==</span> <span class="s1">'master'</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">echo</span> <span class="s1">'I only execute on the master branch'</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">echo</span> <span class="s1">'I execute elsewhere'</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Another way Scripted Pipeline flow control can be managed is with Groovy&#8217;s
exception handling support. When <a href="#scripted-steps">Steps</a> fail for whatever reason
they throw an exception.  Handling behaviors on-error must make use of
the <code>try/catch/finally</code> blocks in Groovy, for example:</p>
</div>
<div class="exampleblock">
<div class="title">Example 37. Try-Catch Block, Scripted Pipeline</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="groovy"><span class="n">node</span> <span class="o">{</span>
    <span class="n">stage</span><span class="o">(</span><span class="s1">'Example'</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">sh</span> <span class="s1">'exit 1'</span>
        <span class="o">}</span>
        <span class="k">catch</span> <span class="o">(</span><span class="n">exc</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">echo</span> <span class="s1">'Something failed, I should sound the klaxons!'</span>
            <span class="k">throw</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="scripted-steps"><a class="anchor" href="#scripted-steps"></a>Steps</h3>
<div class="paragraph">
<p>As discussed at the <a href="../">start of this chapter</a>, the most fundamental part
of a Pipeline is the "step". Fundamentally, steps tell Jenkins <em>what</em> to do and
serve as the basic building block for both Declarative and Scripted Pipeline
syntax.</p>
</div>
<div class="paragraph">
<p>Scripted Pipeline does <strong>not</strong> introduce any steps which are specific to its
syntax;
<a href="/doc/pipeline/steps">Pipeline Steps reference</a> contains a comprehensive list of steps provided by Pipeline and plugins.</p>
</div>
</div>
<div class="sect2">
<h3 id="differences-from-plain-groovy"><a class="anchor" href="#differences-from-plain-groovy"></a>Differences from plain Groovy</h3>
<div class="paragraph">
<p>In order to provide <em>durability</em>, which means that running Pipelines can
survive a restart of the Jenkins <a href="../../glossary/#controller">controller</a>, Scripted
Pipeline must serialize data back to the controller. Due to this design
requirement, some Groovy idioms such as <code>collection.each { item &#8594; /* perform
operation */ }</code> are not fully supported.  See
<a href="https://issues.jenkins.io/browse/JENKINS-27421">JENKINS-27421</a>
and
<a href="https://issues.jenkins.io/browse/JENKINS-26481">JENKINS-26481</a>
for more information.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="compare"><a class="anchor" href="#compare"></a>Syntax Comparison</h2>
<div class="sectionbody">
<div class="videoblock">
<div class="content">
<iframe width="800" height="420" src="https://www.youtube.com/embed/GJBlskiaRrI?rel=0" frameborder="0" allowfullscreen></iframe>
</div>
</div>
<div class="paragraph">
<p>This video shares some differences between Scripted and Declarative Pipeline syntax.</p>
</div>
<div class="paragraph">
<p>When Jenkins Pipeline was first created, Groovy was selected as the foundation.
Jenkins has long shipped with an embedded Groovy engine to provide advanced
scripting capabilities for admins and users alike. Additionally, the
implementors of Jenkins Pipeline found Groovy to be a solid foundation upon
which to build what is now referred to as the "Scripted Pipeline" DSL.
<sup class="footnoteref">[<a class="footnote" href="#_footnotedef_2" title="View footnote.">2</a>]</sup>.</p>
</div>
<div class="paragraph">
<p>As it is a fully-featured programming environment, Scripted Pipeline offers a
tremendous amount of flexibility and extensibility to Jenkins users. The
Groovy learning-curve isn&#8217;t typically desirable for all members of a given
team, so Declarative Pipeline was created to offer a simpler and more
opinionated syntax for authoring Jenkins Pipeline.</p>
</div>
<div class="paragraph">
<p>Both are fundamentally the same Pipeline sub-system underneath. They
are both durable implementations of "Pipeline as code." They are both able to
use steps built into Pipeline or provided by plugins. Both are able to utilize
<a href="../shared-libraries/">Shared Libraries</a></p>
</div>
<div class="paragraph">
<p>Where they differ however is in syntax and flexibility. Declarative limits
what is available to the user with a more strict and pre-defined structure,
making it an ideal choice for simpler continuous delivery pipelines. Scripted
provides very few limits, insofar that the only limits on structure and syntax
tend to be defined by Groovy itself, rather than any Pipeline-specific systems,
making it an ideal choice for power-users and those with more complex
requirements. As the name implies, Declarative Pipeline encourages a
declarative programming model.
<sup class="footnote" id="_footnote_declarative">[<a id="_footnoteref_3" class="footnote" href="#_footnotedef_3" title="View footnote.">3</a>]</sup>
Whereas Scripted Pipelines follow a more imperative programming model.
<sup class="footnote" id="_footnote_imperative">[<a id="_footnoteref_4" class="footnote" href="#_footnotedef_4" title="View footnote.">4</a>]</sup></p>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. Version 2.5 of the "Pipeline plugin" introduces support for Declarative Pipeline syntax
</div>
<div class="footnote" id="_footnotedef_2">
<a href="#_footnoteref_2">2</a>. <a href="https://en.wikipedia.org/wiki/Domain-specific_language">Domain-specific language</a>
</div>
<div class="footnote" id="_footnotedef_3">
<a href="#_footnoteref_3">3</a>. <a href="https://en.wikipedia.org/wiki/Declarative_programming">Declarative Programming</a>
</div>
<div class="footnote" id="_footnotedef_4">
<a href="#_footnoteref_4">4</a>. <a href="https://en.wikipedia.org/wiki/Imperative_programming">Imperative Programming</a>
</div>
</div>
</div>
</div>
</div>
<hr>
<div>
<div class="row">
<div class="col-md-4">
<a class="prev doc-page-link" href="../development">
⇐ Pipeline Development Tools
</a>
</div>
<div class="col-md-4">
<a class="up doc-page-link" href="../">
⇑ Pipeline
</a>
<a class="index doc-page-link" href="../../">
Index
</a>
</div>
<div class="col-md-4">
<a class="next doc-page-link" href="../pipeline-best-practices">
Pipeline Best Practices ⇒
</a>
</div>
</div>
</div>
<hr>
<div class="container"></div>
<!-- starting partial _feedback-footer.html -->
<!-- HTML inclusion for chapter and section layouts (i.e. as footers) as well as
     for use in AsciiDoc file inclusions. -->

<!--
This feedback form was prepared from a Google Form, based on the techniques in
the following documentation sources:
https://codepen.io/learningcode/post/customize-a-google-form-for-your-website,
https://mrhaki.blogspot.com.au/2014/06/awesome-asciidoc-include-raw-html.html,
https://www.freshtechtips.com/2013/05/custom-google-drive-contact-form.html,
https://stackoverflow.com/questions/24436165/set-value-of-hidden-input-inside-form
-->

<!-- Feedback form functionality in JavaScript - refer to comments in this file
     for details on the functionality. -->
<script>
var feedbackForm = {
    formKey : 'e/1FAIpQLSfCEexH09x_-ytEyE7wetizqOvE_-06WkK89dpBLEJcYnOp8w'
};
$(document).ready(function() {
    window.onload = feedbackForm.start(window.location.href);
});
</script>
<script src="/js/feedback-form-functionality.js"></script>

<p><a href="#feedback" data-bs-toggle="collapse">Was this page helpful?</a></p>

<div id="feedback" class="collapse">

<p>Please submit your feedback about this page through this
<a href="/doc/feedback-form/">quick form</a>.</p>

<p>Alternatively, if you don't wish to complete the quick form, you can simply
indicate if you found this page helpful?</p>

<!-- Redirects to custom "thank you" page once form is submitted. -->
<script type="text/javascript">
var submitted=false;
</script>
<iframe name="hidden_iframe" id="hidden_iframe" style="display:none;"
onload="if(submitted) {window.location='/doc/thank-you-for-your-feedback/';}">
</iframe>
<form action="https://docs.google.com/forms/d/e/1FAIpQLSfCEexH09x_-ytEyE7wetizqOvE_-06WkK89dpBLEJcYnOp8w/formResponse" method="POST" id="ss-form" target="hidden_iframe" onsubmit="submitted=true;">

<!-- Set the value of the current URL into the form. -->
<input type="hidden" name="entry.1246830226" id="current-url" value=""/>

<!-- The answer bit -->
<p><input type="radio" name="entry.790002525" id="h1" value="Yes" required/>
<label for="h1">Yes</label>&nbsp;&nbsp;&nbsp;&nbsp;
<input type="radio" name="entry.790002525" id="h2" value="No"/>
<label for="h2">No</label></p>

<!-- The CAPTCHA bit -->

<p><label id="ssTestLabel" for="ssTestValue"></label><br/>
<input type="text" name="ssTestValue" value="" id="ssTestValue"/></p>

<!-- Submit button -->

<p><input class="button" type="submit" value="Submit"/></p>

</form>

<p>See existing feedback <a href="https://docs.google.com/spreadsheets/d/1IIdpVs39JDYKg0sLQIv-MNO928qcGApAIfdW5ohfD78" target="_blank" rel="noreferrer noopener">here</a>.</p>

</div>

<!-- ending partial _feedback-footer.html -->

</div>
</div>
</div>


<script src="/jenkins.io/jemkins.io-5818/assets/bower/anchor-js/anchor.min.js"></script>
<script src="/jenkins.io/jemkins.io-5818/assets/bower/@popperjs/core/umd/popper.min.js"></script>
<script src="/jenkins.io/jemkins.io-5818/assets/bower/bootstrap/js/bootstrap.min.js"></script>
<script data="ionicons" src="https://cdnjs.cloudflare.com/ajax/libs/ionicons/5.5.2/ionicons/ionicons.esm.js" type="module"></script>
<script data="ionicons" nomodule="" src="https://cdnjs.cloudflare.com/ajax/libs/ionicons/5.5.2/ionicons/ionicons.js"></script>
<footer id="footer">
<div class="container">
<div class="row">
<div class="col-md-4">
<p class="box">
<a href="https://github.com/jenkins-infra/jenkins.io/edit/master/content//doc/book/pipeline/syntax.adoc" title="Edit /doc/book/pipeline/syntax.adoc on GitHub">
<img alt="Edit /doc/book/pipeline/syntax.adoc on GitHub" class="icon-improve" src="/images/github-mark.svg">
Improve this page
</a>
&nbsp;
<a href="https://github.com/jenkins-infra/jenkins.io/issues/new?labels=bug&amp;template=4-bug.md&amp;title=Pipeline Syntax page - TODO: Put a summary here&amp;body=Problem with the [Pipeline Syntax](https://www.jenkins.io/doc/book/pipeline/syntax/) page, [source file](https://github.com/jenkins-infra/jenkins.io/blob/master/content/doc/book/pipeline/syntax.adoc)%0A%0ATODO: Describe the expected and actual behavior here %0A%0A%23%23 Screenshots %0A%0A TODO: Add screenshots if possible %0A%0A%23%23 Possible Solution %0A%0A%3C!-- If you have suggestions on a fix for the bug, please describe it here. --%3E %0A%0AN/A" title="Report a problem with /doc/book/pipeline/syntax.adoc">
<ion-icon class="report" name="warning"></ion-icon>
Report a problem
</a>
</p>
<div class="license-box">
<div id="creativecommons">
<a href="https://creativecommons.org/licenses/by-sa/4.0/">
<p>
<img alt="Creative Commons Attribution-ShareAlike license" src="https://licensebuttons.net/l/by-sa/4.0/88x31.png">
</p>
</a>
<p>
The content driving this site is licensed under the Creative
Commons Attribution-ShareAlike 4.0 license.
</p>
</div>
</div>
</div>
<div class="links col-md-8">
<div class="container">
<div class="row">
<div class="area col-md-3">
<div class="div-mar">
<h5>Resources</h5>
<ul class="resources">
<li>
<a href="/jenkins.io/jemkins.io-5818/download/">
Downloads
</a>
</li>
<li>
<a href="/jenkins.io/jemkins.io-5818/node/">
Blog
</a>
</li>
<li>
<a href="/jenkins.io/jemkins.io-5818/doc/">
Documentation
</a>
</li>
<li>
<a href="https://plugins.jenkins.io/">
Plugins
</a>
</li>
<li>
<a href="/jenkins.io/jemkins.io-5818/security/">
Security
</a>
</li>
<li>
<a href="/jenkins.io/jemkins.io-5818/participate/">
Contributing
</a>
</li>
</ul>
</div>
</div>
<div class="area col-md-3">
<div class="div-mar">
<h5>Project</h5>
<ul class="project">
<li>
<a href="/jenkins.io/jemkins.io-5818/project/">
Structure and governance
</a>
</li>
<li>
<a href="https://issues.jenkins.io">
Issue tracker
</a>
</li>
<li>
<a href="/jenkins.io/jemkins.io-5818/project/roadmap/">
Roadmap
</a>
</li>
<li>
<a href="https://github.com/jenkinsci">
GitHub
</a>
</li>
<li>
<a href="https://ci.jenkins.io">
Jenkins on Jenkins
</a>
</li>
</ul>
</div>
</div>
<div class="area col-md-3">
<div class="div-mar">
<h5>Community</h5>
<ul class="community">
<li>
<a href="https://community.jenkins.io">
Forum
</a>
</li>
<li>
<a href="/jenkins.io/jemkins.io-5818/events/">
Events
</a>
</li>
<li>
<a href="/jenkins.io/jemkins.io-5818/mailing-lists/">
Mailing lists
</a>
</li>
<li>
<a href="/jenkins.io/jemkins.io-5818/chat/">
Chats
</a>
</li>
<li>
<a href="/jenkins.io/jemkins.io-5818/sigs/">
Special Interest Groups
</a>
</li>
<li>
<a href="https://twitter.com/jenkinsci">
Twitter
</a>
</li>
<li>
<a href="https://reddit.com/r/jenkinsci">
Reddit
</a>
</li>
</ul>
</div>
</div>
<div class="area col-md-3">
<div class="div-mar">
<h5>Other</h5>
<ul class="other">
<li>
<a href="/jenkins.io/jemkins.io-5818/conduct/">
Code of Conduct
</a>
</li>
<li>
<a href="/jenkins.io/jemkins.io-5818/press/">
Press information
</a>
</li>
<li>
<a href="/jenkins.io/jemkins.io-5818/merchandise/">
Merchandise
</a>
</li>
<li>
<a href="/jenkins.io/jemkins.io-5818/artwork/">
Artwork
</a>
</li>
<li>
<a href="/jenkins.io/jemkins.io-5818/awards/">
Awards
</a>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</footer>
<script>
 (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
 
ga('create', 'UA-000000-0', 'auto');
ga('send', 'pageview');
ga('set', 'anonymizeIp', true);

</script>

<script>
  $(function(){
    var $body = $(document.body);
    $(".nav-link.dropdown-toggle").on("mousedown", function(){
      $body.addClass("no-outline");
    })
    $body.on("keydown", function(){
      $body.removeClass("no-outline");
    })
  })
</script>
<script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3" type="text/javascript"></script>
<script type="text/javascript">
docsearch({
  container: document.querySelector('input.searchbox').parentNode,
  indexName: 'jenkins',
  appId: "M6L7Q4Z8HS",
  apiKey: "52f8dfbff76ffd9106f1c68fee16154b",
  algoliaOptions: { 'facetFilters': ["tags:en"] },
  debug: false
});
</script>
</body>
</html>
