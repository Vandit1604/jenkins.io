<!DOCTYPE html>
<html lang="en">
<head>
<title>
Docker image updates
</title>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<meta content="Jenkins – an open source automation server which enables developers around the world to reliably build, test, and deploy their software" name="description">
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
<meta content="ie=edge" http-equiv="x-ua-compatible">
<link href="https://Vandit1604.github.io/jenkins.io/independent-scrolling-patch/blog/2021/02/08/docker-base-os-upgrade/" rel="canonical">
<!-- Favicons -->
<link href="/favicon.ico" rel="shortcut icon" type="image/x-icon">
<link href="/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180">
<link href="/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png">
<link href="/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png">
<link href="/site.webmanifest" rel="manifest">
<link color="#5bbad5" href="/safari-pinned-tab.svg" rel="mask-icon">
<meta content="#2b5797" name="msapplication-TileColor">
<meta content="#ffffff" name="theme-color">
<meta content="Docker image updates" name="apple-mobile-web-app-title">
<!-- Twitter Card data -->
<meta content="summary_large_image" name="twitter:card">
<meta content="@JenkinsCI" name="twitter:site">
<meta content="Docker image updates" name="twitter:title">
<meta content="Jenkins – an open source automation server which enables developers around the world to reliably build, test, and deploy their software" name="twitter:description">
<meta content="@JenkinsCI" name="twitter:creator">
<!-- Twitter Summary card images must be at least 120x120px -->
<meta content="/jenkins.io/independent-scrolling-patch/images/docker/dockerJenkins-updated-os-2021-02.png" name="twitter:image">
<!-- Open Graph data -->
<meta content="Docker image updates" property="og:title">
<meta content="article" property="og:type">
<meta content="https://Vandit1604.github.io/jenkins.io/independent-scrolling-patch/blog/2021/02/08/docker-base-os-upgrade/" property="og:url">
<meta content="Jenkins – an open source automation server which enables developers around the world to reliably build, test, and deploy their software" name="og:description">
<meta content="Docker image updates" property="og:site_name">
<meta content="/jenkins.io/independent-scrolling-patch/images/docker/dockerJenkins-updated-os-2021-02.png" name="og:image">
<link href="/jenkins.io/independent-scrolling-patch/assets/bower/bootstrap/css/bootstrap.min.css" media="screen" rel="stylesheet">
<link href="/jenkins.io/independent-scrolling-patch/css/jenkins.css" media="screen" rel="stylesheet">
<link href="/jenkins.io/independent-scrolling-patch/stylesheets/styles.css" media="screen" rel="stylesheet">
<!-- Non-obtrusive CSS styles -->
<link href="/jenkins.io/independent-scrolling-patch/css/footer.css" media="screen" rel="stylesheet">
<link href="/jenkins.io/independent-scrolling-patch/css/font-awesome.min.css" media="screen" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/@docsearch/css@3" rel="stylesheet">
</head>
<body>
<script src="/jenkins.io/independent-scrolling-patch/assets/bower/jquery/jquery.min.js"></script>
<!-- starting partial toptoolbar.html.haml -->
<jio-navbar class="fixed-top" id="ji-toolbar" property="https://www.jenkins.io" showSearchBox=""></jio-navbar>
<!-- Spacing to make the fixed-top sticky navbar not occlude any content below it -->
<div class="pt-4">
&nbsp;
</div>

<!-- ending partial toptoolbar.html.haml -->
<!-- starting partial anchors.html.haml -->
<script>
  window.addEventListener('DOMContentLoaded', function () {
    for (var i = 1 ; i <= 6 ; i ++) {
      anchors.add('.app-post-page h' + i);
    }
  })
</script>

<!-- ending partial anchors.html.haml -->
<article class="container app-post-page">
<div class="app-!-display-flex">
<a class="app-back-link" href="/jenkins.io/independent-scrolling-patch/node/">
Back to blog
</a>
</div>
<h1>
Docker image updates
</h1>
<div class="post-attrs">
<a class="app-author-link" href="/blog/authors/markewaite/"><div class="app-avatar"><img alt="Mark Waite" class="app-avatar__image" src="/images/avatars/markewaite.jpg"></div> Mark Waite</a>
February 08, 2021
<a class="twitter-share-button" data-lang="en" href="https://twitter.com/intent/tweet?text=Docker+image+updates&amp;url=https%3A%2F%2Fwww.jenkins.io%2Fjenkins.io%2Findependent-scrolling-patch%2Fblog%2F2021%2F02%2F08%2Fdocker-base-os-upgrade%2F" rel="noreferrer nofollow" target="_blank">
Tweet
</a>
</div>
<div class="blog-content">
<div class="paragraph">
<p>Beginning with Jenkins 2.279 and Jenkins 2.263.4, the Jenkins project is upgrading the base operating system and Java version used in the <code>jenkins/jenkins:latest</code> and <code>jenkins/jenkins:lts</code> images.
The update replaces OpenJDK 8u242 with AdoptOpenJDK 8u282 and replaces Debian 9 (<a href="https://www.debian.org/releases/stretch/">"Stretch"</a>) with Debian 10 (<a href="https://www.debian.org/releases/buster/">"Buster"</a>).</p>
</div>
<div class="paragraph">
<p><span class="image right center"><img src="/images/docker/dockerJenkins.png" alt="Jenkins and Docker" height="224"></span></p>
</div>
<div class="sect1">
<h2 id="why"><a class="anchor" href="#why"></a>Why?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We&#8217;re changing the base image so that we have a better supported operating system and a more current Java release for Jenkins controllers.</p>
</div>
<div class="sect2">
<h3 id="better-supported-operating-system"><a class="anchor" href="#better-supported-operating-system"></a>Better supported operating system</h3>
<div class="paragraph">
<p>The Docker images provided by the Jenkins project rely on the operating system security processes of the operating system provider.</p>
</div>
<div class="paragraph">
<p>Our Docker images have used Debian 9 (<a href="https://www.debian.org/releases/stretch/">"Stretch"</a>) for multiple years.
Debian 9 security updates have been <a href="https://www.debian.org/releases/stretch/">discontinued as of July 6, 2020</a>.
Debian 9 Long Term Support security updates will be discontinued at the <a href="https://www.debian.org/releases/stretch/">end of June 2022</a>.
The upgrade to Debian 10 keeps us on an operating system maintained by the operating system security team.</p>
</div>
</div>
<div class="sect2">
<h3 id="more-current-java-release"><a class="anchor" href="#more-current-java-release"></a>More current Java release</h3>
<div class="paragraph">
<p>The Debian 9 Docker images were based on the <a href="https://hub.docker.com/layers/openjdk/library/openjdk/8-jdk-stretch/images/sha256-6896e96ce729fd54da25b8d831400773efeef39780c65bffb2d64c1412189455"><code>openjdk:8-jdk-stretch</code> Docker image</a>.
The last update to that image was one year ago with the release of JDK 8u242.
We need a maintained Docker base image that keeps pace with JDK releases and operating system updates so that the controller is running the most recent Java updates and most recent operating system updates.</p>
</div>
<div class="paragraph">
<p>Other Jenkins controller images have already switched from using <code>openjdk</code> base images to instead use base images provided by <a href="https://projects.eclipse.org/projects/adoptium">Eclipse Adoptium</a>.
<a href="https://projects.eclipse.org/projects/adoptium">Eclipse Adoptium</a> is the Eclipse project formed when <a href="https://blog.adoptopenjdk.net/2020/06/adoptopenjdk-to-join-the-eclipse-foundation/">AdoptOpenJDK joined the Eclipse Foundation</a>.
This change adapts the <code>jenkins/jenkins:latest</code> and <code>jenkins/jenkins:lts</code> images to use the Adoptium JDK images in the same pattern as is already used for the Jenkins JDK 11 Docker images like <code>jenkins/jenkins:lts-jdk11</code>.
The Jenkins Platform SIG has enjoyed very good results in our interactions with the Eclipse Adoptium project.
We look forward to continuing our collaboration with them.</p>
</div>
<div class="paragraph">
<p>Thanks a lot to <a href="/blog/authors/slide_o_mix/">Alex Earl</a> and <a href="https://github.com/james-crowley">Jim Crowley</a> for the image build restructuring groundwork that made the image upgrade possible!
Also thanks to <a href="/blog/authors/oleg_nenashev/">Oleg Nenashev</a> and other contributors for their reviews and testing.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="packaging-changes"><a class="anchor" href="#packaging-changes"></a>Packaging changes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Jenkins Docker image based on Debian 10 ("Buster") includes some different packages than Debian 9 ("Stretch").
Some packages have been removed because they are no longer supported by their communities.
Some packages have been removed due to infrequent and decreasing use.
Users of the Jenkins Docker images may need to extend their definition of their Docker image to include packages that are no longer included in the base image.</p>
</div>
<div class="sect2">
<h3 id="scm-packages-removed"><a class="anchor" href="#scm-packages-removed"></a>SCM packages removed</h3>
<div class="paragraph">
<p>The following source control management packages are no longer included in the Jenkins controller images for <code>jenkins/jenkins:latest</code> or for <code>jenkins/jenkins:lts</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>bzr</p>
</li>
<li>
<p>mercurial</p>
</li>
<li>
<p>subversion</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="other-packages-removed"><a class="anchor" href="#other-packages-removed"></a>Other packages removed</h3>
<div class="paragraph">
<p>Additional packages that are no longer included in the Jenkins controller images include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>bzip2</p>
</li>
<li>
<p>mime-support</p>
</li>
<li>
<p>python (the Python project stopped supporting Python 2 January 1, 2020)</p>
</li>
<li>
<p>xz-utils</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A detailed list of the exact package changes is available in the <a href="https://github.com/jenkinsci/docker/pull/1070">pull request</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="upgrade-and-compatibility-notes"><a class="anchor" href="#upgrade-and-compatibility-notes"></a>Upgrade and compatibility notes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Jenkins controller images are designed to be extended to meet user needs.
Custom Jenkins controller images can be created from the base images and are designed to allow additional Jenkins plugins and additional operating system packages.</p>
</div>
<div class="paragraph">
<p>For example, the <a href="/doc/book/installing/docker/">Installing Docker</a> instructions illustrate a technique to install the <a href="https://plugins.jenkins.io/blueocean">Blue Ocean plugins</a> and some operating system packages in a custom Docker image.</p>
</div>
<div class="sect2">
<h3 id="docker-image-with-subversion"><a class="anchor" href="#docker-image-with-subversion"></a>Docker image with Subversion</h3>
<div class="paragraph">
<p>The following Docker image definition installs the most recent <a href="/download/lts/">Jenkins Long Term Support</a> release with the <a href="https://plugins.jenkins.io/subversion">subversion plugin</a> and the operating system <code>subversion</code> command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code>FROM jenkins/jenkins:lts
USER root
RUN apt-get update &amp;&amp; \
    apt-get install -y --no-install-recommends subversion
USER jenkins
RUN jenkins-plugin-cli --plugins subversion:2.14.0</code></pre>
</div>
</div>
<div class="paragraph">
<p>Build a new docker image from this Dockerfile and assign the image a meaningful name, e.g. "myjenkins-subversion:1.1":</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash">docker build <span class="nt">-t</span> myjenkins-subversion:1.1 .</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="docker-image-with-mercurial"><a class="anchor" href="#docker-image-with-mercurial"></a>Docker image with Mercurial</h3>
<div class="paragraph">
<p>The following Docker image definition installs the most recent <a href="/download/weekly/">Jenkins Weekly</a> release with the <a href="https://plugins.jenkins.io/mercurial">mercurial plugin</a> and the operating system <code>hg</code> command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code>FROM jenkins/jenkins:latest
USER root
RUN apt-get update &amp;&amp; \
    apt-get install -y --no-install-recommends mercurial
USER jenkins
RUN jenkins-plugin-cli --plugins mercurial:2.12</code></pre>
</div>
</div>
<div class="paragraph">
<p>Build a new docker image from this Dockerfile and assign the image a meaningful name, e.g. "myjenkins-mercurial:1.1":</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash">docker build <span class="nt">-t</span> myjenkins-mercurial:1.1 .</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="whats-next"><a class="anchor" href="#whats-next"></a>What&#8217;s next?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We will continue Docker image updates as new Java versions are released.</p>
</div>
<div class="paragraph">
<p>If you are interested in new features in Jenkins Docker packaging,
stay tuned for future announcements!
There are multiple ongoing initiatives which you can find on the <a href="/project/roadmap/">public Jenkins roadmap</a>.
Some stories:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Switching to AdoptOpenJDK.</p>
</li>
<li>
<p>General availability of Windows images.</p>
</li>
<li>
<p>Support for more platforms (AArch64, IBM s390x, PowerPC).</p>
</li>
<li>
<p>Introducing multi-platform Docker images.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you are interested in any of these projects and would like to contribute,
please reach out to the <a href="/sigs/platform">Platform Special Interest Group</a> which coordinates initiatives related to Jenkins in Docker.</p>
</div>
</div>
</div>
</div>
<ul class="app-tags">
<li>
<a class="app-tags__tag" href="/jenkins.io/independent-scrolling-patch/node/tags/announcement/">
announcement
</a>
</li>
<li>
<a class="app-tags__tag" href="/jenkins.io/independent-scrolling-patch/node/tags/docker/">
docker
</a>
</li>
<li>
<a class="app-tags__tag" href="/jenkins.io/independent-scrolling-patch/node/tags/platform-sig/">
platform-sig
</a>
</li>
</ul>
<h2>
About the author
</h2>
<!-- starting partial author.html.haml -->
<div class="app-author" id="about-the-author">
<!-- starting partial avatar.html.haml -->
<div class="app-avatar" style="min-width: 64px; width: 25vw; max-width: 128px">
<img alt="Mark Waite" class="app-avatar__image" src="/jenkins.io/independent-scrolling-patch/images/avatars/markewaite.jpg">
</div>

<!-- ending partial avatar.html.haml -->
<div class="app-author__content">
<p class="app-author__name">
<a href="/blog/authors/markewaite/">
Mark Waite
</a>
</p>
<div class="paragraph">
<p>Mark is the <a href="/project/team-leads/#documentation">Jenkins Documentation Officer</a>, a long-time Jenkins user and contributor, and maintains the <a href="https://plugins.jenkins.io/git">git plugin</a> and the <a href="https://plugins.jenkins.io/git-client">git client plugin</a>.
He is active in <a href="/sigs/">Jenkins special interest groups</a> including the <a href="/sigs/docs/">Docs SIG</a>, <a href="/sigs/platform">Platform SIG</a>, and <a href="/sigs/advocacy-and-outreach">Advocacy SIG</a>.</p>
</div>
<!-- starting partial social-media-buttons.html.haml -->
<ul class="app-social-media-buttons">
<li>
<a href="https://github.com/markewaite" rel="noreferrer noopener" target="_blank">
GitHub
</a>
</li>
<li>
<a href="https://twitter.com/MarkEWaite" rel="noreferrer noopener" target="_blank">
Twitter
</a>
</li>
<li>
<a href="https://www.linkedin.com/in/markwaite" rel="noreferrer noopener" target="_blank">
LinkedIn
</a>
</li>
</ul>

<!-- ending partial social-media-buttons.html.haml -->
</div>
</div>

<!-- ending partial author.html.haml -->
<!-- starting partial discuss.html.haml -->

<!-- ending partial discuss.html.haml -->
</article>


<script src="/jenkins.io/independent-scrolling-patch/assets/bower/anchor-js/anchor.min.js"></script>
<script src="/jenkins.io/independent-scrolling-patch/assets/bower/@popperjs/core/umd/popper.min.js"></script>
<script src="/jenkins.io/independent-scrolling-patch/assets/bower/bootstrap/js/bootstrap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/lit@2.5.0/polyfill-support.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@webcomponents/webcomponentsjs@2.6.0/webcomponents-loader.js"></script>
<script data="ionicons" defer="" src="https://cdnjs.cloudflare.com/ajax/libs/ionicons/5.5.2/ionicons/ionicons.esm.js" type="module"></script>
<script data="ionicons" defer="" nomodule="" src="https://cdnjs.cloudflare.com/ajax/libs/ionicons/5.5.2/ionicons/ionicons.js"></script>
<script defer="" src="https://cdn.jsdelivr.net/npm/@jenkinsci/jenkins-io-components/+esm" type="module"></script>
<script defer="" nomodule="" src="https://cdn.jsdelivr.net/npm/@jenkinsci/jenkins-io-components/"></script>
<jio-footer githubBranch="master" githubRepo="jenkins-infra/jenkins.io" property="https://www.jenkins.io" sourcePath="content//blog/2021/02/2021-02-08-docker-base-os-upgrade.adoc"></jio-footer>
<script>
 (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
 
ga('create', 'UA-000000-0', 'auto');
ga('send', 'pageview');
ga('set', 'anonymizeIp', true);

</script>

<script>
  $(function(){
    var $body = $(document.body);
    $body.on("keydown", function(){
      $body.removeClass("no-outline");
    })
  })
</script>
<script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3" type="text/javascript"></script>
<script type="text/javascript">
docsearch({
  container: document.querySelector('input.searchbox').parentNode,
  indexName: 'jenkins',
  appId: "M6L7Q4Z8HS",
  apiKey: "52f8dfbff76ffd9106f1c68fee16154b",
  algoliaOptions: { 'facetFilters': ["tags:en"] },
  debug: false
});
</script>
</body>
</html>
