<!DOCTYPE html>
<html lang="en">
<head>
<title>
Upgrading to Jenkins LTS 2.249.x
</title>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<meta content="Jenkins – an open source automation server which enables developers around the world to reliably build, test, and deploy their software" name="description">
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
<meta content="ie=edge" http-equiv="x-ua-compatible">
<link href="https://Vandit1604.github.io/jenkins.io/independent-scrolling-patch/doc/upgrade-guide/2.249/" rel="canonical">
<!-- Favicons -->
<link href="/favicon.ico" rel="shortcut icon" type="image/x-icon">
<link href="/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180">
<link href="/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png">
<link href="/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png">
<link href="/site.webmanifest" rel="manifest">
<link color="#5bbad5" href="/safari-pinned-tab.svg" rel="mask-icon">
<meta content="#2b5797" name="msapplication-TileColor">
<meta content="#ffffff" name="theme-color">
<meta content="Upgrading to Jenkins LTS 2.249.x" name="apple-mobile-web-app-title">
<!-- Twitter Card data -->
<meta content="summary_large_image" name="twitter:card">
<meta content="@JenkinsCI" name="twitter:site">
<meta content="Upgrading to Jenkins LTS 2.249.x" name="twitter:title">
<meta content="Jenkins – an open source automation server which enables developers around the world to reliably build, test, and deploy their software" name="twitter:description">
<meta content="@JenkinsCI" name="twitter:creator">
<!-- Twitter Summary card images must be at least 120x120px -->
<meta content="/jenkins.io/independent-scrolling-patch/images/logo-title-opengraph.png" name="twitter:image">
<!-- Open Graph data -->
<meta content="Upgrading to Jenkins LTS 2.249.x" property="og:title">
<meta content="article" property="og:type">
<meta content="https://Vandit1604.github.io/jenkins.io/independent-scrolling-patch/doc/upgrade-guide/2.249/" property="og:url">
<meta content="Jenkins – an open source automation server which enables developers around the world to reliably build, test, and deploy their software" name="og:description">
<meta content="Upgrading to Jenkins LTS 2.249.x" property="og:site_name">
<meta content="/jenkins.io/independent-scrolling-patch/images/logo-title-opengraph.png" name="og:image">
<link href="/jenkins.io/independent-scrolling-patch/assets/bower/bootstrap/css/bootstrap.min.css" media="screen" rel="stylesheet">
<link href="/jenkins.io/independent-scrolling-patch/css/jenkins.css" media="screen" rel="stylesheet">
<link href="/jenkins.io/independent-scrolling-patch/stylesheets/styles.css" media="screen" rel="stylesheet">
<!-- Non-obtrusive CSS styles -->
<link href="/jenkins.io/independent-scrolling-patch/css/footer.css" media="screen" rel="stylesheet">
<link href="/jenkins.io/independent-scrolling-patch/css/font-awesome.min.css" media="screen" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/@docsearch/css@3" rel="stylesheet">
</head>
<body>
<script src="/jenkins.io/independent-scrolling-patch/assets/bower/jquery/jquery.min.js"></script>
<!-- starting partial toptoolbar.html.haml -->
<jio-navbar class="fixed-top" id="ji-toolbar" property="https://www.jenkins.io" showSearchBox=""></jio-navbar>
<!-- Spacing to make the fixed-top sticky navbar not occlude any content below it -->
<div class="pt-4">
&nbsp;
</div>

<!-- ending partial toptoolbar.html.haml -->
<!-- starting partial anchors.html.haml -->
<script>
  window.addEventListener('DOMContentLoaded', function () {
    for (var i = 1 ; i <= 6 ; i ++) {
      anchors.add('.container .row .col-lg-9 h' + i);
    }
  })
</script>

<!-- ending partial anchors.html.haml -->
<div class="container">
<div class="row body flex-lg-nowrap">
<div class="col-lg-3" id="sidebar-menu">
<div class="sidebar-nav tour" id="sidebar-content">
<p>
<a href="/jenkins.io/independent-scrolling-patch/doc/" class="">> User Documentation Home</a>
</p>
<h5>
User Handbook
</h5>
<ul>
<li>
<a href="/jenkins.io/independent-scrolling-patch/doc/book/getting-started/" class="">User Handbook Overview</a>
</li>
<li>
<a href="/jenkins.io/independent-scrolling-patch/doc/book/installing/" class="">Installing Jenkins</a>
</li>
<li>
<a href="/jenkins.io/independent-scrolling-patch/doc/book/using/" class="">Using Jenkins</a>
</li>
<li>
<a href="/jenkins.io/independent-scrolling-patch/doc/book/pipeline/" class="">Pipeline</a>
</li>
<li>
<a href="/jenkins.io/independent-scrolling-patch/doc/book/blueocean/" class="">Blue Ocean</a>
</li>
<li>
<a href="/jenkins.io/independent-scrolling-patch/doc/book/managing/" class="">Managing Jenkins</a>
</li>
<li>
<a href="/jenkins.io/independent-scrolling-patch/doc/book/security/" class="">Securing Jenkins</a>
</li>
<li>
<a href="/jenkins.io/independent-scrolling-patch/doc/book/system-administration/" class="">System Administration</a>
</li>
<li>
<a href="/jenkins.io/independent-scrolling-patch/doc/book/scaling/" class="">Scaling Jenkins</a>
</li>
<li>
<a href="/jenkins.io/independent-scrolling-patch/doc/book/troubleshooting/" class="">Troubleshooting Jenkins</a>
</li>
<li>
<a href="/jenkins.io/independent-scrolling-patch/doc/book/glossary/" class="">Glossary</a>
</li>
</ul>
<h5>
Tutorials
</h5>
<ul>
<li>
<a href="/jenkins.io/independent-scrolling-patch/doc/pipeline/tour/getting-started/" class="">Guided Tour</a>
</li>
<li>
<a href="/jenkins.io/independent-scrolling-patch/doc/tutorials#pipeline" class="">Jenkins Pipeline</a>
</li>
<li>
<a href="/jenkins.io/independent-scrolling-patch/doc/tutorials#tools" class="">Using Build Tools</a>
</li>
</ul>
<h5>
Resources
</h5>
<ul>
<li>
<a href="/jenkins.io/independent-scrolling-patch/doc/book/pipeline/syntax/" class="">Pipeline Syntax reference</a>
</li>
<li>
<a href="/jenkins.io/independent-scrolling-patch/doc/pipeline/steps/" class="">Pipeline Steps reference</a>
</li>
<li>
<a href="/jenkins.io/independent-scrolling-patch/doc/upgrade-guide/" class="active">LTS Upgrade guides</a>
</li>
</ul>
</div>
</div>
<div class="col-lg-9">
<h1>
Upgrading to Jenkins LTS 2.249.x
</h1>
<p>
Each section covers the upgrade from the previous LTS release,
the section on 2.249.1 covers the upgrade from  2.235.5.
</p>
<h3 id="upgrading-to-jenkins-lts-2-249-3">
Upgrading to Jenkins 2.249.3
</h3>
<div class="paragraph">
<p>No notable changes requiring upgrade notes.</p>
</div>
<h3 id="upgrading-to-jenkins-lts-2-249-2">
Upgrading to Jenkins 2.249.2
</h3>
<div class="paragraph">
<p>No notable changes requiring upgrade notes.</p>
</div>
<h3 id="upgrading-to-jenkins-lts-2-249-1">
Upgrading to Jenkins 2.249.1
</h3>
<div class="sect3">
<h4 id="microsoft-net-framework-2-0-support-removed"><a class="anchor" href="#microsoft-net-framework-2-0-support-removed"></a>Microsoft .NET Framework 2.0 support removed</h4>
<div class="imageblock right">
<div class="content">
<img src="/images/post-images/2020/07-windows-support-updates/winsw-logo.png" alt="winsw logo" width="224px">
</div>
<div class="title">Figure 1. WinSW Logo</div>
</div>
<div class="paragraph">
<p>Starting from this release, we won&#8217;t support .NET Framework 2.0 for launching the Jenkins controller or agents as Windows services.
Microsoft.NET Framework 4.0 or above is now required for using the default service management features.</p>
</div>
<div class="paragraph">
<p>This release also upgrades <a href="https://github.com/winsw/winsw">Windows Service Wrapper (WinSW)</a> from 2.3.0 to 2.9.0 and replaces the bundled binary from .NET Framework 2.0 to 4.0.
There are many improvements and fixes in these versions,
big thanks to <a href="https://github.com/NextTurn">NextTurn</a> and all other contributors.
You can find the full WinSW changelog <a href="https://github.com/winsw/winsw/releases">here</a>,
just a few highlights important to Jenkins users:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Prompt for permission elevation when administrative access is required.
Now Jenkins users do not need to run the agent process as Administrator to install the agent as a service from GUI.</p>
</li>
<li>
<p>Enable TLS 1.1/1.2 in .NET Framework 4.0 packages on Windows 7 and Windows Server 2008 R2.</p>
</li>
<li>
<p>Enable strong cryptography when running .NET Framework 4.0 binaries on .NET 4.6.</p>
</li>
<li>
<p>Support security descriptor string in the Windows service definition.</p>
</li>
<li>
<p>Support 'If-Modified-Since' and proxy settings for automatic downloads.</p>
</li>
<li>
<p>Fix Runaway Process Killer extension so that it does not kill wrong processes with the same PID on startup.</p>
</li>
<li>
<p>Fix the default domain name in the <code>serviceaccount</code> parameter (<a href="https://issues.jenkins.io/browse/JENKINS-12660">JENKINS-12660</a>)</p>
</li>
<li>
<p>Fix archiving of old logs in the <code>roll-by-size-time</code> mode.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>As you may see, there are many improvements available with this version,
and we hope that it will make Windows service installation even more reliable.
Some of the changes in WinSW also replaced old workarounds in the Jenkins core,
making the code more maintainable.</p>
</div>
<div class="sect4">
<h5 id="use-cases-affected-by-net-framework-2-0-support-removal"><a class="anchor" href="#use-cases-affected-by-net-framework-2-0-support-removal"></a>Use-cases affected by .NET Framework 2.0 support removal</h5>
<div class="paragraph">
<p>If you use .NET Framework 2.0 to run the Jenkins Windows services,
the following use-cases are likely to be affected:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Installing the Jenkins controller as a Windows service from Web UI.
The official MSI Installer supports .NET Framework 2.0 for the moment, but it will be changed in future versions.</p>
</li>
<li>
<p>Installing agents as Windows services from GUI.
This feature is provided by in <a href="https://github.com/jenkinsci/windows-slave-installer-module">Windows Agent Installer Module</a> from the Jenkins core.</p>
</li>
<li>
<p>Installing agents over Windows Management Instrumentation (WMI) via the <a href="https://plugins.jenkins.io/windows-slaves">WMI Windows Agents</a> plugin</p>
</li>
<li>
<p>Auto-updating of Windows service wrappers on agents installed from GUI.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="upgrade-guidelines"><a class="anchor" href="#upgrade-guidelines"></a>Upgrade guidelines</h5>
<div class="paragraph">
<p>If all of your Jenkins controller and agent instances already use .NET Framework 4.0 or above,
there are no special upgrade steps required.
Please enjoy the new features!</p>
</div>
<div class="paragraph">
<p>If you run the Jenkins controller as a Windows Service with .NET Framework 2.0,
this instance will require an upgrade of .NET Framework to version 4.0 or above.
We recommend running with .NET Framework 4.6.1 or above,
because this .NET version provides many platform features by default
(e.g. TLS 1.2 encryption and strong cryptography),
and Windows Service Wrapper does not have to apply custom workarounds.</p>
</div>
<div class="paragraph">
<p>If you want to continue running some of your agents with .NET Framework 2.0,
the following extra upgrade steps are required:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Disable auto-upgrade of Windows Service Wrapper on agents by setting the
<code>-Dorg.jenkinsci.modules.windows_slave_installer.disableAutoUpdate=true</code> flag on the Jenkins controller side.</p>
</li>
<li>
<p>Upgrade agents with .NET Framework 4.0+ by downloading the recent Windows Service Wrapper 2.x
version from <a href="https://github.com/winsw/winsw/releases">WinSW GitHub Releases</a>
and manually replacing the wrapper ".exe" files in the agent workspaces.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="wmi-windows-agents-plugin"><a class="anchor" href="#wmi-windows-agents-plugin"></a>WMI Windows agents plugin</h4>
<div class="paragraph">
<p>The <a href="https://plugins.jenkins.io/windows-slaves">WMI Windows Agents</a> plugin version 1.7 has been released for Jenkins 2.249.1 and later.
Prior versions of the plugin will report a null pointer exception and the agent will fail to connect to Jenkins 2.249.1.</p>
</div>
<div class="paragraph">
<p>Jenkins 2.249.1 users of the <a href="https://plugins.jenkins.io/windows-slaves">WMI Windows Agents</a> plugin should upgrade to version 1.7.</p>
</div>
</div>
<div class="sect3">
<h4 id="view-statusfilter-removed-from-configuration-as-code"><a class="anchor" href="#view-statusfilter-removed-from-configuration-as-code"></a>View job status filter</h4>
<div class="paragraph">
<p>As part of a performance improvement for list views, the <code>statusFilter</code> key is now an optional, separate item in the Jenkins view configuration.</p>
</div>
<div class="paragraph">
<p>The job status filter has been moved to be a Job View Filter.
The order of this filter matters as its interaction with various other filters will affect what jobs are shown in the view.
If the status filter is the <strong>first</strong> filter (filtering only enabled jobs) and a later filter adds a disabled job. the disabled job will be visible.
If the status filter is <strong>last</strong> in the same scenario, the disabled job will <strong>not</strong> be visible.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The job status filter defined on views from previous Jenkins versions is <strong>not</strong> migrated in Jenkins 2.249.1
Refer to <a href="https://issues.jenkins.io/browse/JENKINS-62661">JENKINS-62661</a>.
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="configuration-as-code-statusfilter"><a class="anchor" href="#configuration-as-code-statusfilter"></a>Configuration as code statusFilter</h5>
<div class="paragraph">
<p>The <code>statusFilter</code> key in <a href="https://plugins.jenkins.io/configuration-as-code/">configuration as code</a> view definitions must be removed or replaced with a new entry as part of the upgrade to Jenkins 2.249.1.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Previous configuration</dt>
<dd>
<p>The previous configuration looked like this:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">  views:
  - list:
      columns:
      - "status"
      - "weather"
      - "jobName"
      description: "Jobs failing recently"
      jobFilters:
      - jobStatusFilter:
          aborted: true
          failed: true
          includeExcludeTypeString: "includeMatched"
      name: "Failed Jobs"
      statusFilter: true # This must be removed</pre>
</div>
</div>
</dd>
<dt class="hdlist1">New configuration</dt>
<dd>
<p>The new configuration looks like this:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">  views:
  - list:
      columns:
      - "status"
      - "weather"
      - "jobName"
      description: "Jobs failing recently"
      jobFilters:
      - jobStatusFilter:
          aborted: true
          failed: true
          includeExcludeTypeString: "includeMatched"
      - statusFilter: # This is the replacement section
          statusFilter: true
      name: "Failed Jobs"</pre>
</div>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>If the  <code>statusFilter</code> key is not updated or removed from the YAML file, Jenkins halts during startup with a stack trace.
The initial section of the failure stack trace looks like this:</p>
</div>
<div class="listingblock">
<div class="title">Configuration as code stack trace</div>
<div class="content">
<pre class="nowrap">SEVERE  jenkins.InitReactorRunner$1#onTaskFailed: Failed ConfigurationAsCode.init
io.jenkins.plugins.casc.ConfiguratorException: 'statusFilter' is deprecated
        at io.jenkins.plugins.casc.BaseConfigurator.configure(BaseConfigurator.java:321)
        at io.jenkins.plugins.casc.BaseConfigurator.configure(BaseConfigurator.java:270)
        ...</pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="alternate-url-removed-from-inbound-agent"><a class="anchor" href="#alternate-url-removed-from-inbound-agent"></a>Alternate URL removed from inbound agent</h4>
<div class="paragraph">
<p>Jenkins 2.249.1 no longer provides a fallback URL in the inbound agent launch file (the <code>slave-agent.jnlp</code> file).
Prior releases included an alternate URL in the inbound agent launch file when the launch file was requested through a URL that is not the Jenkins root URL.
If the Jenkins root URL was unreachable by the agent, the alternate URL was used.</p>
</div>
<div class="paragraph">
<p>The alternate URL must be provided as an argument to the <code>agent.jar</code> command for Jenkins 2.249.1 and later.
The inbound agent can connect to the alternate URL using commands like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash"><span class="nv">$ WORKDIR</span><span class="o">=</span>&lt;work-dir-from-agent-definition-page&gt;
<span class="nv">$ ALTERNATE_URL</span><span class="o">=</span>&lt;alternate-url-used-to-access-Jenkins&gt;
<span class="nv">$ SECRET_STRING</span><span class="o">=</span>&lt;secret-from-agent-definition-page&gt;
<span class="nv">$ AGENT_NAME</span><span class="o">=</span>&lt;agent-name-from-agent-definition-page&gt;
<span class="nv">$ </span>java <span class="nt">-cp</span> agent.jar hudson.remoting.jnlp.Main <span class="se">\</span>
  <span class="nt">-headless</span> <span class="se">\</span>
  <span class="nt">-workDir</span> <span class="nv">$WORKDIR</span> <span class="se">\</span>
  <span class="nt">-url</span> <span class="nv">$ALTERNATE_URL</span> <span class="se">\</span>
  <span class="nv">$SECRET_STRING</span> <span class="se">\</span>
  <span class="nv">$AGENT_NAME</span></code></pre>
</div>
</div>
</div>

</div>
</div>
</div>


<script src="/jenkins.io/independent-scrolling-patch/assets/bower/anchor-js/anchor.min.js"></script>
<script src="/jenkins.io/independent-scrolling-patch/assets/bower/@popperjs/core/umd/popper.min.js"></script>
<script src="/jenkins.io/independent-scrolling-patch/assets/bower/bootstrap/js/bootstrap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/lit@2.5.0/polyfill-support.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@webcomponents/webcomponentsjs@2.6.0/webcomponents-loader.js"></script>
<script data="ionicons" defer="" src="https://cdnjs.cloudflare.com/ajax/libs/ionicons/5.5.2/ionicons/ionicons.esm.js" type="module"></script>
<script data="ionicons" defer="" nomodule="" src="https://cdnjs.cloudflare.com/ajax/libs/ionicons/5.5.2/ionicons/ionicons.js"></script>
<script defer="" src="https://cdn.jsdelivr.net/npm/@jenkinsci/jenkins-io-components/+esm" type="module"></script>
<script defer="" nomodule="" src="https://cdn.jsdelivr.net/npm/@jenkinsci/jenkins-io-components/"></script>
<jio-footer githubBranch="master" githubRepo="jenkins-infra/jenkins.io" property="https://www.jenkins.io" sourcePath="content//doc/upgrade-guide.html.haml"></jio-footer>
<script>
 (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
 
ga('create', 'UA-000000-0', 'auto');
ga('send', 'pageview');
ga('set', 'anonymizeIp', true);

</script>

<script>
  $(function(){
    var $body = $(document.body);
    $body.on("keydown", function(){
      $body.removeClass("no-outline");
    })
  })
</script>
<script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3" type="text/javascript"></script>
<script type="text/javascript">
docsearch({
  container: document.querySelector('input.searchbox').parentNode,
  indexName: 'jenkins',
  appId: "M6L7Q4Z8HS",
  apiKey: "52f8dfbff76ffd9106f1c68fee16154b",
  algoliaOptions: { 'facetFilters': ["tags:en"] },
  debug: false
});
</script>
</body>
</html>
